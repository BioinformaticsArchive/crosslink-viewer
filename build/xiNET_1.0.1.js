d3=function(){function b(a){return null!=a&&!isNaN(a)}function e(a){return a.length}function d(a,c){try{for(var g in c)Object.defineProperty(a.prototype,g,{value:c[g],enumerable:!1})}catch(v){a.prototype=c}}function f(){}function h(){}function m(a,c,g){return function(){var v=g.apply(c,arguments);return v===c?a:v}}function n(){}function p(a){function c(){for(var c=g,v=-1,b=c.length,s;++v<b;)(s=c[v].on)&&s.apply(this,arguments);return a}var g=[],v=new f;c.on=function(c,r){var b=v.get(c),s;if(2>arguments.length)return b&&
b.on;b&&(b.on=null,g=g.slice(0,s=g.indexOf(b)).concat(g.slice(s+1)),v.remove(c));r&&g.push(v.set(c,{on:r}));return a};return c}function q(){l.event.stopPropagation();l.event.preventDefault()}function t(){for(var a=l.event,c;c=a.sourceEvent;)a=c;return a}function u(a,c){function g(){a.on(c,null)}a.on(c,function(){q();g()},!0);setTimeout(g,0)}function w(a){for(var c=new n,g=0,v=arguments.length;++g<v;)c[arguments[g]]=p(c);c.of=function(g,v){return function(b){try{var s=b.sourceEvent=l.event;b.target=
a;l.event=b;c[b.type].apply(g,v)}finally{l.event=s}}};return c}function z(a,c){var g=a.ownerSVGElement||a;if(g.createSVGPoint){var v=g.createSVGPoint();if(0>Ub&&(da.scrollX||da.scrollY)){var g=l.select(ea.body).append("svg").style("position","absolute").style("top",0).style("left",0),k=g[0][0].getScreenCTM();Ub=!(k.f||k.e);g.remove()}Ub?(v.x=c.pageX,v.y=c.pageY):(v.x=c.clientX,v.y=c.clientY);v=v.matrixTransform(a.getScreenCTM().inverse());return[v.x,v.y]}g=a.getBoundingClientRect();return[c.clientX-
g.left-a.clientLeft,c.clientY-g.top-a.clientTop]}function y(a){for(var c=-1,g=a.length,v=[];++c<g;)v.push(a[c]);return v}function G(a){Vb(a,U);return a}function E(a){return function(){return Wb(a,this)}}function M(a){return function(){return Xb(a,this)}}function P(a,c){function g(){this.removeAttribute(a)}function v(){this.removeAttributeNS(a.space,a.local)}function k(){this.setAttribute(a,c)}function r(){this.setAttributeNS(a.space,a.local,c)}function b(){var g=c.apply(this,arguments);null==g?this.removeAttribute(a):
this.setAttribute(a,g)}function s(){var g=c.apply(this,arguments);null==g?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,g)}a=l.ns.qualify(a);return null==c?a.local?v:g:"function"===typeof c?a.local?s:b:a.local?r:k}function L(a){return a.trim().replace(/\s+/g," ")}function B(a){return new RegExp("(?:^|\\s+)"+l.requote(a)+"(?:\\s+|$)","g")}function A(a,c){function g(){for(var g=-1;++g<k;)a[g](this,c)}function v(){for(var g=-1,v=c.apply(this,arguments);++g<k;)a[g](this,
v)}a=a.trim().split(/\s+/).map(I);var k=a.length;return"function"===typeof c?v:g}function I(a){var c=B(a);return function(g,v){if(k=g.classList)return v?k.add(a):k.remove(a);var k=g.getAttribute("class")||"";v?(c.lastIndex=0,c.test(k)||g.setAttribute("class",L(k+" "+a))):g.setAttribute("class",L(k.replace(c," ")))}}function N(a,c,g){function v(){this.style.removeProperty(a)}function k(){this.style.setProperty(a,c,g)}function b(){var v=c.apply(this,arguments);null==v?this.style.removeProperty(a):this.style.setProperty(a,
v,g)}return null==c?v:"function"===typeof c?b:k}function Q(a,c){function g(){delete this[a]}function v(){this[a]=c}function k(){var g=c.apply(this,arguments);null==g?delete this[a]:this[a]=g}return null==c?g:"function"===typeof c?k:v}function Sa(a){return function(){return ed(this,a)}}function cb(a){arguments.length||(a=l.ascending);return function(c,g){return!c-!g||a(c.__data__,g.__data__)}}function Z(){}function fd(a,c,g){function v(){var c=this[x];c&&(this.removeEventListener(a,c,c.$),delete this[x])}
function k(){var k=D(c,za(arguments));v.call(this);this.addEventListener(a,this[x]=k,k.$=g);k._=c}function b(){var c=new RegExp("^__on([^.]+)"+l.requote(a)+"$"),g,v;for(v in this)if(g=v.match(c)){var k=this[v];this.removeEventListener(g[1],k,k.$);delete this[v]}}var x="__on"+a,s=a.indexOf("."),D=ta;0<s&&(a=a.substring(0,s));var d=Yb.get(a);d&&(a=d,D=Ka);return s?c?k:v:c?Z:b}function ta(a,c){return function(g){var v=l.event;l.event=g;c[0]=this.__data__;try{a.apply(this,c)}finally{l.event=v}}}function Ka(a,
c){var g=ta(a,c);return function(a){var c=a.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||g.call(this,a)}}function ha(a,c){for(var g=0,v=a.length;g<v;g++)for(var k=a[g],b=0,x=k.length,s;b<x;b++)(s=k[b])&&c(s,b,g);return a}function Ea(a){Vb(a,Fa);return a}function $(){}function na(a,c,g){return new Zb(a,c,g)}function Zb(a,c,g){this.h=a;this.s=c;this.l=g}function db(a,c,g){function v(a){360<a?a-=360:0>a&&(a+=360);return 60>a?k+(b-k)*a/60:180>a?b:240>a?k+(b-k)*(240-a)/60:k}var k,b;
a=isNaN(a)?0:0>(a%=360)?a+360:a;c=isNaN(c)?0:0>c?0:1<c?1:c;g=0>g?0:1<g?1:g;b=.5>=g?g*(1+c):g+c-g*c;k=2*g-b;return ua(Math.round(255*v(a+120)),Math.round(255*v(a)),Math.round(255*v(a-120)))}function id(a){return 1<a?F/2:-1>a?-F/2:Math.asin(a)}function sf(a){return(Math.exp(a)-Math.exp(-a))/2}function jd(a){return(a=Math.sin(a/2))*a}function La(a,c,g){return new eb(a,c,g)}function eb(a,c,g){this.h=a;this.c=c;this.l=g}function $b(a,c,g){isNaN(a)&&(a=0);isNaN(c)&&(c=0);return Ma(g,Math.cos(a*=K)*c,Math.sin(a)*
c)}function Ma(a,c,g){return new fb(a,c,g)}function fb(a,c,g){this.l=a;this.a=c;this.b=g}function kd(a,c,g){a=(a+16)/116;g=a-g/200;c=ac(a+c/500)*ld;a=ac(a)*md;g=ac(g)*nd;return ua(bc(3.2404542*c-1.5371385*a-.4985314*g),bc(-.969266*c+1.8760108*a+.041556*g),bc(.0556434*c-.2040259*a+1.0572252*g))}function od(a,c,g){return 0<a?La(Math.atan2(g,c)*V,Math.sqrt(c*c+g*g),a):La(NaN,NaN,a)}function ac(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function cc(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}
function bc(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ua(a,c,g){return new dc(a,c,g)}function dc(a,c,g){this.r=a;this.g=c;this.b=g}function Na(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ec(a,c,g){var v=0,k=0,b=0,x,s;if(x=/([a-z]+)\((.*)\)/i.exec(a))switch(s=x[2].split(","),x[1]){case "hsl":return g(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100);case "rgb":return c(fc(s[0]),fc(s[1]),fc(s[2]))}if(g=gb.get(a))return c(g.r,
g.g,g.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(v=a.charAt(1),v+=v,k=a.charAt(2),k+=k,b=a.charAt(3),b+=b):7===a.length&&(v=a.substring(1,3),k=a.substring(3,5),b=a.substring(5,7)),v=parseInt(v,16),k=parseInt(k,16),b=parseInt(b,16));return c(v,k,b)}function pd(a,c,g){var v=Math.min(a/=255,c/=255,g/=255),k=Math.max(a,c,g),b=k-v,x=(k+v)/2;b?(v=.5>x?b/(k+v):b/(2-k-v),a=60*(a==k?(c-g)/b+(c<g?6:0):c==k?(g-a)/b+2:(a-c)/b+4)):(a=NaN,v=0<x&&1>x?0:a);return na(a,v,x)}function qd(a,c,g){a=gc(a);c=gc(c);g=
gc(g);var v=cc((.4124564*a+.3575761*c+.1804375*g)/ld),k=cc((.2126729*a+.7151522*c+.072175*g)/md);a=cc((.0193339*a+.119192*c+.9503041*g)/nd);return Ma(116*k-16,500*(v-k),200*(k-a))}function gc(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function fc(a){var c=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*c):c}function R(a){return"function"===typeof a?a:function(){return a}}function ka(a){return a}function hc(a){return function(c,g,v){2===arguments.length&&"function"===
typeof g&&(v=g,g=null);return ic(c,g,a,v)}}function ic(a,c,g,v){function k(){var a=D.status,c;if(!a&&D.responseText||200<=a&&300>a||304===a){try{c=g.call(b,D)}catch(v){x.error.call(b,v);return}x.load.call(b,c)}else x.error.call(b,D)}var b={},x=l.dispatch("progress","load","error"),s={},D=new (da.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);"onload"in D?D.onload=D.onerror=k:D.onreadystatechange=function(){3<D.readyState&&k()};D.onprogress=function(a){var c=l.event;l.event=
a;try{x.progress.call(b,D)}finally{l.event=c}};b.header=function(a,c){a=(a+"").toLowerCase();if(2>arguments.length)return s[a];null==c?delete s[a]:s[a]=c+"";return b};b.mimeType=function(a){if(!arguments.length)return c;c=null==a?null:a+"";return b};b.response=function(a){g=a;return b};["get","post"].forEach(function(a){b[a]=function(){return b.send.apply(b,[a].concat(za(arguments)))}});b.send=function(g,v,k){2===arguments.length&&"function"===typeof v&&(k=v,v=null);D.open(g,a,!0);null==c||"accept"in
s||(s.accept=c+",*/*");if(D.setRequestHeader)for(var x in s)D.setRequestHeader(x,s[x]);null!=c&&D.overrideMimeType&&D.overrideMimeType(c);if(null!=k)b.on("error",k).on("load",function(a){k(null,a)});D.send(null==v?null:v);return b};b.abort=function(){D.abort();return b};l.rebind(b,x,"on");return null==v?b:b.get(tf(v))}function tf(a){return 1===a.length?function(c,g){a(null==c?g:null)}:a}function rd(a,c){function g(a,g,b){3>arguments.length&&(b=g,g=null);var r=l.xhr(a,c,b);r.row=function(a){return arguments.length?
r.response(null==(g=a)?v:k(a)):g};return r.row(g)}function v(a){return g.parse(a.responseText)}function k(a){return function(c){return g.parse(c.responseText,a)}}function b(c){return c.map(x).join(a)}function x(a){return s.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var s=new RegExp('["'+a+"\n]"),D=a.charCodeAt(0);g.parse=function(a,c){var v;return g.parseRows(a,function(a,g){if(v)return v(a,g-1);var k=new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}");
v=c?function(a,g){return c(k(a),g)}:k})};g.parseRows=function(a,c){function g(){if(x>=r)return k;if(e)return e=!1,v;var c=x;if(34===a.charCodeAt(c)){for(var b=c;b++<r;)if(34===a.charCodeAt(b)){if(34!==a.charCodeAt(b+1))break;++b}x=b+2;var s=a.charCodeAt(b+1);13===s?(e=!0,10===a.charCodeAt(b+2)&&++x):10===s&&(e=!0);return a.substring(c+1,b).replace(/""/g,'"')}for(;x<r;){s=a.charCodeAt(x++);b=1;if(10===s)e=!0;else if(13===s)e=!0,10===a.charCodeAt(x)&&(++x,++b);else if(s!==D)continue;return a.substring(c,
x-b)}return a.substring(c)}for(var v={},k={},b=[],r=a.length,x=0,s=0,d,e;(d=g())!==k;){for(var f=[];d!==v&&d!==k;)f.push(d),d=g();c&&!(f=c(f,s++))||b.push(f)}return b};g.format=function(c){if(Array.isArray(c[0]))return g.formatRows(c);var v=new h,k=[];c.forEach(function(a){for(var c in a)v.has(c)||k.push(v.add(c))});return[k.map(x).join(a)].concat(c.map(function(c){return k.map(function(a){return x(c[a])}).join(a)})).join("\n")};g.formatRows=function(a){return a.map(b).join("\n")};return g}function jc(){var a=
td(),a=ud()-a;24<a?(isFinite(a)&&(clearTimeout(hb),hb=setTimeout(jc,a)),ib=0):(ib=1,vd(jc))}function td(){for(var a=Date.now(),c=jb;c;)a>=c.time&&(c.flush=c.callback(a-c.time)),c=c.next;return a}function ud(){for(var a,c=jb,g=Infinity;c;)c.flush?c=a?a.next=c.next:jb=c.next:(c.time<g&&(g=c.time),c=(a=c).next);kb=a;return g}function kc(a,c){return c-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function uf(a){return a+""}function lb(a,c){if(a&&wd.hasOwnProperty(a.type))wd[a.type](a,c)}function lc(a,c,g){var v=
-1;g=a.length-g;var k;for(c.lineStart();++v<g;)k=a[v],c.point(k[0],k[1]);c.lineEnd()}function xd(a,c){var g=-1,v=a.length;for(c.polygonStart();++g<v;)lc(a[g],c,1);c.polygonEnd()}function vf(){function a(a,c){a*=K;c=c*K/2+F/4;var g=a-v,d=Math.cos(c),e=Math.sin(c),f=b*e,l=k*d+f*Math.cos(g),g=f*Math.sin(g);Ta+=Math.atan2(g,l);v=a;k=d;b=e}var c,g,v,k,b;la.point=function(x,s){la.point=a;v=(c=x)*K;k=Math.cos(s=(g=s)*K/2+F/4);b=Math.sin(s)};la.lineEnd=function(){a(c,g)}}function Ua(a){var c=a[0];a=a[1];
var g=Math.cos(a);return[g*Math.cos(c),g*Math.sin(c),Math.sin(a)]}function mb(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]}function nb(a,c){return[a[1]*c[2]-a[2]*c[1],a[2]*c[0]-a[0]*c[2],a[0]*c[1]-a[1]*c[0]]}function mc(a,c){a[0]+=c[0];a[1]+=c[1];a[2]+=c[2]}function ob(a,c){return[a[0]*c,a[1]*c,a[2]*c]}function yd(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=c;a[1]/=c;a[2]/=c}function pb(a){return[Math.atan2(a[1],a[0]),Math.asin(Math.max(-1,Math.min(1,a[2])))]}function qb(a,c){return 1E-6>
Math.abs(a[0]-c[0])&&1E-6>Math.abs(a[1]-c[1])}function zd(a,c){if(!ca){++oa;a*=K;var g=Math.cos(c*=K);X+=(g*Math.cos(a)-X)/oa;Y+=(g*Math.sin(a)-Y)/oa;W+=(Math.sin(c)-W)/oa}}function wf(){var a,c;ca=1;nc();ca=2;var g=pa.point;pa.point=function(v,k){g(a=v,c=k)};pa.lineEnd=function(){pa.point(a,c);oc();pa.lineEnd=oc}}function nc(){function a(a,b){a*=K;var x=Math.cos(b*=K),s=x*Math.cos(a),x=x*Math.sin(a),D=Math.sin(b),d=Math.atan2(Math.sqrt((d=g*D-v*x)*d+(d=v*s-c*D)*d+(d=c*x-g*s)*d),c*s+g*x+v*D);oa+=
d;X+=d*(c+(c=s));Y+=d*(g+(g=x));W+=d*(v+(v=D))}var c,g,v;1<ca||(1>ca&&(ca=1,oa=X=Y=W=0),pa.point=function(k,b){k*=K;var x=Math.cos(b*=K);c=x*Math.cos(k);g=x*Math.sin(k);v=Math.sin(b);pa.point=a})}function oc(){pa.point=zd}function Va(){return!0}function Ad(a,c,g,v,b){var r=[],x=[];a.forEach(function(a){if(!(0>=(c=a.length-1))){var c,g=a[0],v=a[c];if(qb(g,v)){b.lineStart();for(v=0;v<c;++v)b.point((g=a[v])[0],g[1]);b.lineEnd()}else a={point:g,points:a,other:null,visited:!1,entry:!0,subject:!0},g={point:g,
points:[g],other:a,visited:!1,entry:!1,subject:!1},a.other=g,r.push(a),x.push(g),a={point:v,points:[v],other:null,visited:!1,entry:!1,subject:!0},g={point:v,points:[v],other:a,visited:!1,entry:!0,subject:!1},a.other=g,r.push(a),x.push(g)}});x.sort(c);Bd(r);Bd(x);if(r.length){if(g)for(a=1,g=!g(x[0].point),c=x.length;a<c;++a)x[a].entry=g=!g;g=r[0];for(var s,D;;){for(c=g;c.visited;)if((c=c.next)===g)return;s=c.points;b.lineStart();do{c.visited=c.other.visited=!0;if(c.entry){if(c.subject)for(a=0;a<s.length;a++)b.point((D=
s[a])[0],D[1]);else v(c.point,c.next.point,1,b);c=c.next}else{if(c.subject)for(s=c.prev.points,a=s.length;0<=--a;)b.point((D=s[a])[0],D[1]);else v(c.point,c.prev.point,-1,b);c=c.prev}c=c.other;s=c.points}while(!c.visited);b.lineEnd()}}}function Bd(a){if(c=a.length){for(var c,g=0,v=a[0],b;++g<c;)v.next=b=a[g],b.prev=v,v=b;v.next=b=a[0];b.prev=v}}function Cd(a,c,g){return function(v){function b(c,g){a(c,g)&&v.point(c,g)}function r(a,c){f.point(a,c)}function x(){h.point=r;f.lineStart()}function s(){h.point=
b;f.lineEnd()}function D(a,c){J.point(a,c);H.push([a,c])}function d(){J.lineStart();H=[]}function e(){D(H[0][0],H[0][1]);J.lineEnd();var a=J.clean(),c=S.buffer(),g=c.length;if(g)if(H=null,a&1){a=c[0];C+=Dd(a,1);var g=a.length-1,c=-1,b;for(v.lineStart();++c<g;)v.point((b=a[c])[0],b[1]);v.lineEnd()}else 1<g&&a&2&&c.push(c.pop().concat(c.shift())),n.push(c.filter(xf));else O=!0,m+=Dd(H,-1),H=null}var f=c(v),h={point:b,lineStart:x,lineEnd:s,polygonStart:function(){h.point=D;h.lineStart=d;h.lineEnd=e;
O=!1;m=C=0;n=[];v.polygonStart()},polygonEnd:function(){h.point=b;h.lineStart=x;h.lineEnd=s;n=l.merge(n);if(n.length)Ad(n,yf,null,g,v);else if(-1E-6>C||O&&-1E-6>m)v.lineStart(),g(null,null,1,v),v.lineEnd();v.polygonEnd();n=null},sphere:function(){v.polygonStart();v.lineStart();g(null,null,1,v);v.lineEnd();v.polygonEnd()}},n,C,m,O,S=Ed(),J=c(S),H;return h}}function xf(a){return 1<a.length}function Ed(){var a=[],c;return{lineStart:function(){a.push(c=[])},point:function(a,v){c.push([a,v])},lineEnd:Z,
buffer:function(){var g=a;a=[];c=null;return g},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Dd(a,c){if(!(g=a.length))return 0;for(var g,v=0,b=0,r=a[0],x=r[0],s=r[1],D=Math.cos(s),d=Math.atan2(c*Math.sin(x)*D,Math.sin(s)),e=1-c*Math.cos(x)*D,f=d;++v<g;)r=a[v],D=Math.cos(s=r[1]),r=Math.atan2(c*Math.sin(x=r[0])*D,Math.sin(s)),x=1-c*Math.cos(x)*D,1E-6>Math.abs(e-2)&&1E-6>Math.abs(x-2)||(1E-6>Math.abs(x)||1E-6>Math.abs(e)||(1E-6>Math.abs(Math.abs(r-d)-F)?2<x+e&&(b+=4*(r-
d)):b=1E-6>Math.abs(e-2)?b+4*(r-f):b+((3*F+r-d)%(2*F)-F)*(e+x)),f=d,d=r,e=x);return b}function yf(a,c){return(0>(a=a.point)[0]?a[1]-F/2-1E-6:F/2-a[1])-(0>(c=c.point)[0]?c[1]-F/2-1E-6:F/2-c[1])}function zf(a){function c(a,c){return Math.cos(a)*Math.cos(c)>b}function g(a,c,g){var v=Ua(a),r=Ua(c),x=[1,0,0],r=nb(v,r),s=mb(r,r),v=r[0],d=s-v*v;if(!d)return!g&&a;s=b*s/d;d=-b*v/d;v=nb(x,r);x=ob(x,s);r=ob(r,d);mc(x,r);r=mb(x,v);s=mb(v,v);d=r*r-s*(mb(x,x)-1);if(!(0>d)){var e=Math.sqrt(d),d=ob(v,(-r-e)/s);mc(d,
x);d=pb(d);if(!g)return d;g=a[0];var f=c[0];a=a[1];c=c[1];var h;f<g&&(h=g,g=f,f=h);var l=f-g,n=1E-6>Math.abs(l-F);!n&&c<a&&(h=a,a=c,c=h);if(n||1E-6>l?n?0<a+c^d[1]<(1E-6>Math.abs(d[0]-g)?a:c):a<=d[1]&&d[1]<=c:l>F^(g<=d[0]&&d[0]<=f))return c=ob(v,(-r+e)/s),mc(c,x),[d,pb(c)]}}function v(c,g){var v=r?a:F-a,b=0;c<-v?b|=1:c>v&&(b|=2);g<-v?b|=4:g>v&&(b|=8);return b}var b=Math.cos(a),r=0<b,x=1E-6<Math.abs(b),s=pc(a,6*K);return Cd(c,function(a){var b,k,s,d,e;return{lineStart:function(){d=s=!1;e=1},point:function(f,
h){var l=[f,h],n,m=c(f,h),H=r?m?0:v(f,h):m?v(f+(0>f?F:-F),h):0;!b&&(d=s=m)&&a.lineStart();m!==s&&(n=g(b,l),qb(b,n)||qb(l,n))&&(l[0]+=1E-6,l[1]+=1E-6,m=c(l[0],l[1]));if(m!==s)e=0,m?(a.lineStart(),n=g(l,b),a.point(n[0],n[1])):(n=g(b,l),a.point(n[0],n[1]),a.lineEnd()),b=n;else if(x&&b&&r^m){var q;H&k||!(q=g(l,b,!0))||(e=0,r?(a.lineStart(),a.point(q[0][0],q[0][1]),a.point(q[1][0],q[1][1]),a.lineEnd()):(a.point(q[1][0],q[1][1]),a.lineEnd(),a.lineStart(),a.point(q[0][0],q[0][1])))}!m||b&&qb(b,l)||a.point(l[0],
l[1]);b=l;s=m;k=H},lineEnd:function(){s&&a.lineEnd();b=null},clean:function(){return e|(d&&s)<<1}}},s)}function Af(a,c,g,v){function b(v,k){return 1E-6>Math.abs(v[0]-a)?0<k?0:3:1E-6>Math.abs(v[0]-g)?0<k?2:1:1E-6>Math.abs(v[1]-c)?0<k?1:0:0<k?3:2}function r(a,c){return x(a.point,c.point)}function x(a,c){var g=b(a,1),v=b(c,1);return g!==v?g-v:0===g?c[1]-a[1]:1===g?a[0]-c[0]:2===g?a[1]-c[1]:c[0]-a[0]}return function(s){function d(r){r=b(r,-1);return e([0===r||3===r?a:g,1<r?v:c])}function e(a){for(var c=
0,g=O.length,v=a[1],b=0;b<g;++b)for(var k=1,r=O[b],x=r.length,s=r[0],d;k<x;++k)d=r[k],s[1]<=v?d[1]>v&&0<(d[0]-s[0])*(a[1]-s[1])-(a[0]-s[0])*(d[1]-s[1])&&++c:d[1]<=v&&0>(d[0]-s[0])*(a[1]-s[1])-(a[0]-s[0])*(d[1]-s[1])&&--c,s=d;return 0!==c}function f(r,s,d,D){var e=0,hd=0;if(null==r||(e=b(r,d))!==(hd=b(s,d))||0>x(r,s)^0<d){do D.point(0===e||3===e?a:g,1<e?v:c);while((e=(e+d+4)%4)!==hd)}else D.point(s[0],s[1])}function h(b,k){a<=b&&b<=g&&c<=k&&k<=v&&s.point(b,k)}function n(b,k){b=Math.max(-1E9,Math.min(1E9,
b));k=Math.max(-1E9,Math.min(1E9,k));var r=a<=b&&b<=g&&c<=k&&k<=v;O&&S.push([b,k]);if(w)H=b,p=k,t=r,w=!1,r&&(s.lineStart(),s.point(b,k));else if(r&&u)s.point(b,k);else{var x=[T,ia],d=[b,k],D;D=d[0]-x[0];var e=d[1]-x[1],f=[0,1];1E-6>Math.abs(D)&&1E-6>Math.abs(e)?D=a<=x[0]&&x[0]<=g&&c<=x[1]&&x[1]<=v:rb(a-x[0],D,f)&&rb(x[0]-g,-D,f)&&rb(c-x[1],e,f)&&rb(x[1]-v,-e,f)?(1>f[1]&&(d[0]=x[0]+f[1]*D,d[1]=x[1]+f[1]*e),0<f[0]&&(x[0]+=f[0]*D,x[1]+=f[0]*e),D=!0):D=!1;D?(u||(s.lineStart(),s.point(x[0],x[1])),s.point(d[0],
d[1]),r||s.lineEnd()):r&&(s.lineStart(),s.point(b,k))}T=b;ia=k;u=r}var m=s,C=Ed(),q,O,S,J={point:h,lineStart:function(){J.point=n;O&&O.push(S=[]);w=!0;u=!1;T=ia=NaN},lineEnd:function(){q&&(n(H,p),t&&u&&C.rejoin(),q.push(C.buffer()));J.point=h;u&&s.lineEnd()},polygonStart:function(){s=C;q=[];O=[]},polygonEnd:function(){s=m;(q=l.merge(q)).length?(s.polygonStart(),Ad(q,r,d,f,s),s.polygonEnd()):e([a,c])&&(s.polygonStart(),s.lineStart(),f(null,null,1,s),s.lineEnd(),s.polygonEnd());q=O=S=null}},H,p,t,T,
ia,u,w;return J}}function rb(a,c,g){if(1E-6>Math.abs(c))return 0>=a;a/=c;if(0<c){if(a>g[1])return!1;a>g[0]&&(g[0]=a)}else{if(a<g[0])return!1;a<g[1]&&(g[1]=a)}return!0}function Gd(a,c){function g(g,b){return g=a(g,b),c(g[0],g[1])}a.invert&&c.invert&&(g.invert=function(g,b){return g=c.invert(g,b),g&&a.invert(g[0],g[1])});return g}function Hd(a){function c(c){function b(g,v){g=a(g,v);c.point(g[0],g[1])}function v(){l=NaN;S.point=d;c.lineStart()}function d(b,v){var x=Ua([b,v]),s=a(b,v);g(l,n,h,C,m,q,
l=s[0],n=s[1],h=b,C=x[0],m=x[1],q=x[2],k,c);c.point(l,n)}function e(){S.point=b;c.lineEnd()}function f(){var a,b,x,gd,p,ia;v();S.point=function(c,g){d(a=c,g);b=l;x=n;gd=C;p=m;ia=q;S.point=d};S.lineEnd=function(){g(l,n,h,C,m,q,b,x,a,gd,p,ia,k,c);S.lineEnd=e;e()}}var h,l,n,C,m,q,S={point:b,lineStart:v,lineEnd:e,polygonStart:function(){c.polygonStart();S.lineStart=f},polygonEnd:function(){c.polygonEnd();S.lineStart=v}};return S}function g(c,k,s,d,e,f,l,h,n,m,q,p,S,J){var H=l-c,t=h-k,u=H*H+t*t;if(u>4*
b&&S--){var T=d+m,ia=e+q,w=f+p,y=Math.sqrt(T*T+ia*ia+w*w),A=Math.asin(w/=y),z=1E-6>Math.abs(Math.abs(w)-1)?(s+n)/2:Math.atan2(ia,T),B=a(z,A),A=B[0],B=B[1],E=A-c,I=B-k,G=t*E-H*I;if(G*G/u>b||.3<Math.abs((H*E+t*I)/u-.5))g(c,k,s,d,e,f,A,B,z,T/=y,ia/=y,w,S,J),J.point(A,B),g(A,B,z,T,ia,w,l,h,n,m,q,p,S,J)}}var b=.5,k=16;c.precision=function(a){if(!arguments.length)return Math.sqrt(b);k=0<(b=a*a)&&16;return c};return c}function Aa(a){return qc(function(){return a})()}function qc(a){function c(a){a=x(a[0]*
K,a[1]*K);return[a[0]*d+p,S-a[1]*d]}function g(a){return(a=x.invert((a[0]-p)/d,(S-a[1])/d))&&[a[0]*V,a[1]*V]}function b(){x=Gd(r=rc(m,C,q),k);var a=k(h,n);p=e-a[0]*d;S=f+a[1]*d;return c}var k,r,x,s=Hd(function(a,c){a=k(a,c);return[a[0]*d+p,S-a[1]*d]}),d=150,e=480,f=250,h=0,n=0,m=0,C=0,q=0,p,S,J=Id,H=ka,t=null,u=null;c.stream=function(a){return Bf(r,J(s(H(a))))};c.clipAngle=function(a){if(!arguments.length)return t;J=null==a?(t=a,Id):zf((t=+a)*K);return c};c.clipExtent=function(a){if(!arguments.length)return u;
u=a;H=null==a?ka:Af(a[0][0],a[0][1],a[1][0],a[1][1]);return c};c.scale=function(a){if(!arguments.length)return d;d=+a;return b()};c.translate=function(a){if(!arguments.length)return[e,f];e=+a[0];f=+a[1];return b()};c.center=function(a){if(!arguments.length)return[h*V,n*V];h=a[0]%360*K;n=a[1]%360*K;return b()};c.rotate=function(a){if(!arguments.length)return[m*V,C*V,q*V];m=a[0]%360*K;C=a[1]%360*K;q=2<a.length?a[2]%360*K:0;return b()};l.rebind(c,s,"precision");return function(){k=a.apply(this,arguments);
c.invert=k.invert&&g;return b()}}function Bf(a,c){return{point:function(g,b){b=a(g*K,b*K);g=b[0];c.point(g>F?g-2*F:g<-F?g+2*F:g,b[1])},sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},polygonStart:function(){c.polygonStart()},polygonEnd:function(){c.polygonEnd()}}}function Wa(a,c){return[a,c]}function rc(a,c,g){return a?c||g?Gd(Jd(a),Kd(c,g)):Jd(a):c||g?Kd(c,g):Wa}function Ld(a){return function(c,g){return c+=a,[c>F?c-2*F:c<-F?c+2*F:c,g]}}function Jd(a){var c=
Ld(a);c.invert=Ld(-a);return c}function Kd(a,c){function g(a,c){var g=Math.cos(c),d=Math.cos(a)*g,g=Math.sin(a)*g,e=Math.sin(c),f=e*b+d*k;return[Math.atan2(g*r-f*x,d*b-e*k),Math.asin(Math.max(-1,Math.min(1,f*r+g*x)))]}var b=Math.cos(a),k=Math.sin(a),r=Math.cos(c),x=Math.sin(c);g.invert=function(a,c){var g=Math.cos(c),d=Math.cos(a)*g,g=Math.sin(a)*g,e=Math.sin(c),f=e*r-g*x;return[Math.atan2(g*r+e*x,d*b+f*k),Math.asin(Math.max(-1,Math.min(1,f*b-d*k)))]};return g}function pc(a,c){var g=Math.cos(a),b=
Math.sin(a);return function(k,r,x,s){if(null!=k){if(k=Md(g,k),r=Md(g,r),0<x?k<r:k>r)k+=2*x*F}else k=a+2*x*F,r=a;for(var d,e=x*c;0<x?k>r:k<r;k-=e)s.point((d=pb([g,-b*Math.cos(k),-b*Math.sin(k)]))[0],d[1])}}function Md(a,c){var g=Ua(c);g[0]-=a;yd(g);var b=Math.acos(Math.max(-1,Math.min(1,-g[1])));return((0>-g[2]?-b:b)+2*Math.PI-1E-6)%(2*Math.PI)}function Nd(a,c,g){var b=l.range(a,c-1E-6,g).concat(c);return function(a){return b.map(function(c){return[a,c]})}}function Od(a,c,g){var b=l.range(a,c-1E-6,
g).concat(c);return function(a){return b.map(function(c){return[c,a]})}}function sc(a){return a.source}function tc(a){return a.target}function Cf(a,c,g,b){var k=Math.cos(c),r=Math.sin(c),x=Math.cos(b),s=Math.sin(b),d=k*Math.cos(a),e=k*Math.sin(a),f=x*Math.cos(g),h=x*Math.sin(g),l=2*Math.asin(Math.sqrt(jd(b-c)+k*x*jd(g-a))),n=1/Math.sin(l);g=l?function(a){var c=Math.sin(a*=l)*n,g=Math.sin(l-a)*n;a=g*d+c*f;var b=g*e+c*h,c=g*r+c*s;return[Math.atan2(b,a)*V,Math.atan2(c,Math.sqrt(a*a+b*b))*V]}:function(){return[a*
V,c*V]};g.distance=l;return g}function uc(a){var c=0,g=F/3,b=qc(a);a=b(c,g);a.parallels=function(a){return arguments.length?b(c=a[0]*F/180,g=a[1]*F/180):[c/F*180,g/F*180]};return a}function Pd(a,c){function g(a,c){var g=Math.sqrt(r-2*k*Math.sin(c))/k;return[g*Math.sin(a*=k),x-g*Math.cos(a)]}var b=Math.sin(a),k=(b+Math.sin(c))/2,r=1+b*(2*k-b),x=Math.sqrt(r)/k;g.invert=function(a,c){var g=x-c;return[Math.atan2(a,g)/k,id((r-(a*a+g*g)*k*k)/(2*k))]};return g}function Df(){function a(a,c){sb+=k*a-b*c;b=
a;k=c}var c,g,b,k;Ba.point=function(r,x){Ba.point=a;c=b=r;g=k=x};Ba.lineEnd=function(){a(c,g)}}function Ef(){function a(a,c){x.push("M",a,",",c,r)}function c(a,c){x.push("M",a,",",c);d.point=g}function g(a,c){x.push("L",a,",",c)}function b(){d.point=a}function k(){x.push("Z")}var r=Qd(4.5),x=[],d={point:a,lineStart:function(){d.point=c},lineEnd:b,polygonStart:function(){d.lineEnd=k},polygonEnd:function(){d.lineEnd=b;d.point=a},pointRadius:function(a){r=Qd(a);return d},result:function(){if(x.length){var a=
x.join("");x=[];return a}}};return d}function Qd(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function vc(a,c){ca||(X+=a,Y+=c,++W)}function Rd(){function a(a,b){var r=a-c,x=b-g,r=Math.sqrt(r*r+x*x);X+=r*(c+a)/2;Y+=r*(g+b)/2;W+=r;c=a;g=b}var c,g;if(1!==ca)if(1>ca)ca=1,X=Y=W=0;else return;qa.point=function(b,k){qa.point=a;c=b;g=k}}function Sd(){qa.point=vc}function Ff(){function a(a,c){var g=k*a-b*c;X+=g*(b+a);Y+=g*(k+c);W+=3*g;b=a;k=c}var c,g,b,k;2>ca&&(ca=2,X=Y=W=
0);qa.point=function(r,x){qa.point=a;c=b=r;g=k=x};qa.lineEnd=function(){a(c,g)}}function Gf(a){function c(c,g){a.moveTo(c,g);a.arc(c,g,x,0,2*F)}function g(c,g){a.moveTo(c,g);d.point=b}function b(c,g){a.lineTo(c,g)}function k(){d.point=c}function r(){a.closePath()}var x=4.5,d={point:c,lineStart:function(){d.point=g},lineEnd:k,polygonStart:function(){d.lineEnd=r},polygonEnd:function(){d.lineEnd=k;d.point=c},pointRadius:function(a){x=a;return d},result:Z};return d}function Hf(a){var c=Hd(function(c,
b){return a([c*V,b*V])});return function(a){a=c(a);return{point:function(c,b){a.point(c*K,b*K)},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}}function Xa(a,c){function g(c,g){var b=Math.cos(c),x=Math.cos(g),b=a(b*x);return[b*x*Math.sin(c),b*Math.sin(g)]}g.invert=function(a,g){var b=Math.sqrt(a*a+g*g),x=c(b),d=Math.sin(x),x=Math.cos(x);return[Math.atan2(a*d,b*x),Math.asin(b&&
g*d/b)]};return g}function Td(a,c){function g(a,c){var g=1E-6>Math.abs(Math.abs(c)-F/2)?0:r/Math.pow(Math.tan(F/4+c/2),k);return[g*Math.sin(k*a),r-g*Math.cos(k*a)]}var b=Math.cos(a),k=a===c?Math.sin(a):Math.log(b/Math.cos(c))/Math.log(Math.tan(F/4+c/2)/Math.tan(F/4+a/2)),r=b*Math.pow(Math.tan(F/4+a/2),k)/k;if(!k)return tb;g.invert=function(a,c){var g=r-c,b=(0<k?1:0>k?-1:0)*Math.sqrt(a*a+g*g);return[Math.atan2(a,g)/k,2*Math.atan(Math.pow(r/b,1/k))-F/2]};return g}function Ud(a,c){function g(a,c){var g=
r-c;return[g*Math.sin(k*a),r-g*Math.cos(k*a)]}var b=Math.cos(a),k=a===c?Math.sin(a):(b-Math.cos(c))/(c-a),r=b/k+a;if(1E-6>Math.abs(k))return Wa;g.invert=function(a,c){var g=r-c;return[Math.atan2(a,g)/k,r-(0<k?1:0>k?-1:0)*Math.sqrt(a*a+g*g)]};return g}function tb(a,c){return[a,Math.log(Math.tan(F/4+c/2))]}function Vd(a){var c=Aa(a),g=c.scale,b=c.translate,k=c.clipExtent,r;c.scale=function(){var a=g.apply(c,arguments);return a===c?r?c.clipExtent(null):c:a};c.translate=function(){var a=b.apply(c,arguments);
return a===c?r?c.clipExtent(null):c:a};c.clipExtent=function(a){var d=k.apply(c,arguments);if(d===c){if(r=null==a){var e=F*g(),f=b();k([[f[0]-e,f[1]-e],[f[0]+e,f[1]+e]])}}else r&&(d=null);return d};return c.clipExtent(null)}function wc(a,c){var g=Math.cos(c)*Math.sin(a);return[Math.log((1+g)/(1-g))/2,Math.atan2(Math.tan(c),Math.cos(a))]}function Wd(a){function c(c){function d(){x.push("M",r(a(e),s))}for(var x=[],e=[],f=-1,l=c.length,h,n=R(g),m=R(b);++f<l;)k.call(this,h=c[f],f)?e.push([+n.call(this,
h,f),+m.call(this,h,f)]):e.length&&(d(),e=[]);e.length&&d();return x.length?x.join(""):null}var g=ra,b=va,k=Va,r=ma,d=r.key,s=.7;c.x=function(a){if(!arguments.length)return g;g=a;return c};c.y=function(a){if(!arguments.length)return b;b=a;return c};c.defined=function(a){if(!arguments.length)return k;k=a;return c};c.interpolate=function(a){if(!arguments.length)return d;d="function"===typeof a?r=a:(r=xc.get(a)||ma).key;return c};c.tension=function(a){if(!arguments.length)return s;s=a;return c};return c}
function ra(a){return a[0]}function va(a){return a[1]}function ma(a){return a.join("L")}function yc(a){for(var c=0,g=a.length,b=a[0],k=[b[0],",",b[1]];++c<g;)k.push("V",(b=a[c])[1],"H",b[0]);return k.join("")}function zc(a){for(var c=0,g=a.length,b=a[0],k=[b[0],",",b[1]];++c<g;)k.push("H",(b=a[c])[0],"V",b[1]);return k.join("")}function ub(a,c){if(1>c.length||a.length!=c.length&&a.length!=c.length+2)return ma(a);var g=a.length!=c.length,b="",k=a[0],r=a[1],d=c[0],s=d,e=1;g&&(b+="Q"+(r[0]-2*d[0]/3)+
","+(r[1]-2*d[1]/3)+","+r[0]+","+r[1],k=a[1],e=2);if(1<c.length)for(s=c[1],r=a[e],e++,b+="C"+(k[0]+d[0])+","+(k[1]+d[1])+","+(r[0]-s[0])+","+(r[1]-s[1])+","+r[0]+","+r[1],k=2;k<c.length;k++,e++)r=a[e],s=c[k],b+="S"+(r[0]-s[0])+","+(r[1]-s[1])+","+r[0]+","+r[1];g&&(g=a[e],b+="Q"+(r[0]+2*s[0]/3)+","+(r[1]+2*s[1]/3)+","+g[0]+","+g[1]);return b}function Ac(a,c){for(var g=[],b=(1-c)/2,k,r=a[0],d=a[1],s=1,e=a.length;++s<e;)k=r,r=d,d=a[s],g.push([b*(d[0]-k[0]),b*(d[1]-k[1])]);return g}function Xd(a){if(3>
a.length)return ma(a);var c=1,g=a.length,b=a[0],k=b[0],r=b[1],d=[k,k,k,(b=a[1])[0]],s=[r,r,r,b[1]],k=[k,",",r];for(Ya(k,d,s);++c<g;)b=a[c],d.shift(),d.push(b[0]),s.shift(),s.push(b[1]),Ya(k,d,s);for(c=-1;2>++c;)d.shift(),d.push(b[0]),s.shift(),s.push(b[1]),Ya(k,d,s);return k.join("")}function sa(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]}function Ya(a,c,g){a.push("C",sa(Yd,c),",",sa(Yd,g),",",sa(Zd,c),",",sa(Zd,g),",",sa(Oa,c),",",sa(Oa,g))}function Bc(a,c){return(c[1]-a[1])/(c[0]-a[0])}
function If(a,c,g,b){var k,r,d;a=b[a];k=a[0];r=a[1];a=b[c];c=a[0];d=a[1];a=b[g];return 0<(a[1]-r)*(c-k)-(d-r)*(a[0]-k)}function Cc(a,c,g){return(g[0]-c[0])*(a[1]-c[1])<(g[1]-c[1])*(a[0]-c[0])}function $d(a,c,g,b){var k=a[0],r=g[0],d=c[0]-k,s=b[0]-r;a=a[1];g=g[1];c=c[1]-a;b=b[1]-g;r=(s*(a-g)-b*(k-r))/(b*d-s*c);return[k+r*d,a+r*c]}function Dc(a,c){var g=a.map(function(a,c){return{index:c,x:a[0],y:a[1]}}).sort(function(a,c){return a.y<c.y?-1:a.y>c.y?1:a.x<c.x?-1:a.x>c.x?1:0}),b=null,k={list:[],leftEnd:null,
rightEnd:null,init:function(){k.leftEnd=k.createHalfEdge(null,"l");k.rightEnd=k.createHalfEdge(null,"l");k.leftEnd.r=k.rightEnd;k.rightEnd.l=k.leftEnd;k.list.unshift(k.leftEnd,k.rightEnd)},createHalfEdge:function(a,c){return{edge:a,side:c,vertex:null,l:null,r:null}},insert:function(a,c){c.l=a;c.r=a.r;a.r.l=c;a.r=c},leftBound:function(a){var c=k.leftEnd;do c=c.r;while(c!=k.rightEnd&&r.rightOf(c,a));return c=c.l},del:function(a){a.l.r=a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},left:function(a){return a.l},
leftRegion:function(a){return null==a.edge?b:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?b:a.edge.region[Ec[a.side]]}},r={bisect:function(a,c){var g={region:{l:a,r:c},ep:{l:null,r:null}},b=c.x-a.x,k=c.y-a.y;g.c=a.x*b+a.y*k+.5*(b*b+k*k);(0<b?b:-b)>(0<k?k:-k)?(g.a=1,g.b=k/b,g.c/=b):(g.b=1,g.a=b/k,g.c/=k);return g},intersect:function(a,c){var g=a.edge,b=c.edge;if(!g||!b||g.region.r==b.region.r)return null;var k=g.a*b.b-g.b*b.a;if(1E-10>Math.abs(k))return null;var v=(g.c*b.b-b.c*
g.b)/k,k=(b.c*g.a-g.c*b.a)/k,r=g.region.r,d=b.region.r;r.y<d.y||r.y==d.y&&r.x<d.x?r=a:(r=c,g=b);return(g=v>=g.region.r.x)&&"l"===r.side||!g&&"r"===r.side?null:{x:v,y:k}},rightOf:function(a,c){var g=a.edge,b=g.region.r,k=c.x>b.x;if(k&&"l"===a.side)return 1;if(!k&&"r"===a.side)return 0;if(1===g.a){var v=c.y-b.y,r=c.x-b.x,d=0,x=0;!k&&0>g.b||k&&0<=g.b?x=d=v>=g.b*r:(x=c.x+c.y*g.b>g.c,0>g.b&&(x=!x),x||(d=1));d||(b=b.x-g.region.l.x,x=g.b*(r*r-v*v)<b*v*(1+2*r/b+g.b*g.b),0>g.b&&(x=!x))}else r=g.c-g.a*c.x,
g=c.y-r,v=c.x-b.x,b=r-b.y,x=g*g>v*v+b*b;return"l"===a.side?x:!x},endPoint:function(a,g,b){a.ep[g]=b;a.ep[Ec[g]]&&c(a)},distance:function(a,c){var g=a.x-c.x,b=a.y-c.y;return Math.sqrt(g*g+b*b)}},d={list:[],insert:function(a,c,g){a.vertex=c;a.ystar=c.y+g;g=0;for(var b=d.list,k=b.length;g<k;g++){var v=b[g];if(!(a.ystar>v.ystar||a.ystar==v.ystar&&c.x>v.vertex.x))break}b.splice(g,0,a)},del:function(a){for(var c=0,g=d.list,b=g.length;c<b&&g[c]!=a;++c);g.splice(c,1)},empty:function(){return 0===d.list.length},
nextEvent:function(a){for(var c=0,g=d.list,b=g.length;c<b;++c)if(g[c]==a)return g[c+1];return null},min:function(){var a=d.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return d.list.shift()}};k.init();for(var b=g.shift(),s=g.shift(),e,f,l,h,n,m,C,q,p;;)if(d.empty()||(e=d.min()),s&&(d.empty()||s.y<e.y||s.y==e.y&&s.x<e.x)){f=k.leftBound(s);l=k.right(f);C=k.rightRegion(f);p=r.bisect(C,s);m=k.createHalfEdge(p,"l");k.insert(f,m);if(q=r.intersect(f,m))d.del(f),d.insert(f,q,r.distance(q,
s));f=m;m=k.createHalfEdge(p,"r");k.insert(f,m);(q=r.intersect(m,l))&&d.insert(m,q,r.distance(q,s));s=g.shift()}else if(d.empty())break;else{f=d.extractMin();h=k.left(f);l=k.right(f);n=k.right(l);C=k.leftRegion(f);m=k.rightRegion(l);q=f.vertex;r.endPoint(f.edge,f.side,q);r.endPoint(l.edge,l.side,q);k.del(f);d.del(l);k.del(l);f="l";C.y>m.y&&(f=C,C=m,m=f,f="r");p=r.bisect(C,m);m=k.createHalfEdge(p,f);k.insert(h,m);r.endPoint(p,Ec[f],q);if(q=r.intersect(h,m))d.del(h),d.insert(h,q,r.distance(q,C));(q=
r.intersect(m,n))&&d.insert(m,q,r.distance(q,C))}for(f=k.right(k.leftEnd);f!=k.rightEnd;f=k.right(f))c(f.edge)}function Jf(a){return a.x}function Kf(a){return a.y}function ae(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Za(a,c,g,b,k,r){if(!a(c,g,b,k,r)){var d=.5*(g+k),s=.5*(b+r);c=c.nodes;c[0]&&Za(a,c[0],g,b,d,s);c[1]&&Za(a,c[1],d,b,k,s);c[2]&&Za(a,c[2],g,s,d,r);c[3]&&Za(a,c[3],d,s,k,r)}}function Fc(a,c){a=l.rgb(a);c=l.rgb(c);var g=a.r,b=a.g,k=a.b,r=c.r-g,d=c.g-b,s=c.b-k;return function(a){return"#"+
Na(Math.round(g+r*a))+Na(Math.round(b+d*a))+Na(Math.round(k+s*a))}}function be(a){var c=[a.a,a.b],g=[a.c,a.d],b=ce(c),k=c[0]*g[0]+c[1]*g[1],r=-k;g[0]+=r*c[0];g[1]+=r*c[1];r=ce(g)||0;c[0]*g[1]<g[0]*c[1]&&(c[0]*=-1,c[1]*=-1,b*=-1,k*=-1);this.rotate=(b?Math.atan2(c[1],c[0]):Math.atan2(-g[0],g[1]))*V;this.translate=[a.e,a.f];this.scale=[b,r];this.skew=r?Math.atan2(k,r)*V:0}function ce(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);c&&(a[0]/=c,a[1]/=c);return c}function wa(a,c){c-=a=+a;return function(g){return a+
c*g}}function vb(a,c){var g=[],b=[],k,r=l.transform(a),d=l.transform(c),s=r.translate,e=d.translate,f=r.rotate,h=d.rotate,n=r.skew,m=d.skew,r=r.scale,d=d.scale;s[0]!=e[0]||s[1]!=e[1]?(g.push("translate(",null,",",null,")"),b.push({i:1,x:wa(s[0],e[0])},{i:3,x:wa(s[1],e[1])})):e[0]||e[1]?g.push("translate("+e+")"):g.push("");f!=h?(180<f-h?h+=360:180<h-f&&(f+=360),b.push({i:g.push(g.pop()+"rotate(",null,")")-2,x:wa(f,h)})):h&&g.push(g.pop()+"rotate("+h+")");n!=m?b.push({i:g.push(g.pop()+"skewX(",null,
")")-2,x:wa(n,m)}):m&&g.push(g.pop()+"skewX("+m+")");r[0]!=d[0]||r[1]!=d[1]?(k=g.push(g.pop()+"scale(",null,",",null,")"),b.push({i:k-4,x:wa(r[0],d[0])},{i:k-2,x:wa(r[1],d[1])})):1==d[0]&&1==d[1]||g.push(g.pop()+"scale("+d+")");k=b.length;return function(a){for(var c=-1,r;++c<k;)g[(r=b[c]).i]=r.x(a);return g.join("")}}function de(a,c){var g={},b={},k;for(k in a)k in c?g[k]=("transform"==k?vb:Ga)(a[k],c[k]):b[k]=a[k];for(k in c)k in a||(b[k]=c[k]);return function(a){for(k in g)b[k]=g[k](a);return b}}
function ee(a,c){var g,b,k=0,r=[],d=[],s,e;a+="";c+="";for(b=wb.lastIndex=0;g=wb.exec(c);++b)g.index&&r.push(c.substring(k,g.index)),d.push({i:r.length,x:g[0]}),r.push(null),k=wb.lastIndex;k<c.length&&r.push(c.substring(k));b=0;for(s=d.length;(g=wb.exec(a))&&b<s;++b)if(e=d[b],e.x==g[0]){if(e.i)if(null==r[e.i+1])for(r[e.i-1]+=e.x,r.splice(e.i,1),g=b+1;g<s;++g)d[g].i--;else for(r[e.i-1]+=e.x+r[e.i+1],r.splice(e.i,2),g=b+1;g<s;++g)d[g].i-=2;else if(null==r[e.i+1])r[e.i]=e.x;else for(r[e.i]=e.x+r[e.i+
1],r.splice(e.i+1,1),g=b+1;g<s;++g)d[g].i--;d.splice(b,1);s--;b--}else e.x=wa(parseFloat(g[0]),parseFloat(e.x));for(;b<s;)e=d.pop(),null==r[e.i+1]?r[e.i]=e.x:(r[e.i]=e.x+r[e.i+1],r.splice(e.i+1,1)),s--;return 1===r.length?null==r[0]?(e=d[0].x,function(a){return e(a)+""}):function(){return c}:function(a){for(b=0;b<s;++b)r[(e=d[b]).i]=e.x(a);return r.join("")}}function Ga(a,c){for(var g=l.interpolators.length,b;0<=--g&&!(b=l.interpolators[g](a,c)););return b}function fe(a,c){var g=[],b=[],k=a.length,
r=c.length,d=Math.min(a.length,c.length),s;for(s=0;s<d;++s)g.push(Ga(a[s],c[s]));for(;s<k;++s)b[s]=a[s];for(;s<r;++s)b[s]=c[s];return function(a){for(s=0;s<d;++s)b[s]=g[s](a);return b}}function Lf(a){return function(c){return 0>=c?0:1<=c?1:a(c)}}function ge(a){return function(c){return 1-a(1-c)}}function he(a){return function(c){return.5*(.5>c?a(2*c):2-a(2-2*c))}}function Mf(a){return a*a}function Nf(a){return a*a*a}function Of(a){return 1-Math.cos(a*F/2)}function Pf(a){return Math.pow(2,10*(a-1))}
function Qf(a){return 1-Math.sqrt(1-a*a)}function Rf(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function ie(a,c){c-=a;return function(g){return Math.round(a+c*g)}}function Sf(a,c){c=c-(a=+a)?1/(c-a):0;return function(g){return(g-a)*c}}function Tf(a,c){c=c-(a=+a)?1/(c-a):0;return function(g){return Math.max(0,Math.min(1,(g-a)*c))}}function Uf(a){var c=a.source;a=a.target;var g;var b=a;if(c===b)g=c;else{g=
je(c);for(var b=je(b),k=g.pop(),r=b.pop(),d=null;k===r;)d=k,k=g.pop(),r=b.pop();g=d}for(b=[c];c!==g;)c=c.parent,b.push(c);for(c=b.length;a!==g;)b.splice(c,0,a),a=a.parent;return b}function je(a){for(var c=[],g=a.parent;null!=g;)c.push(a),a=g,g=g.parent;c.push(a);return c}function Vf(a){a.fixed|=2}function Wf(a){a.fixed&=-7}function Xf(a){a.fixed|=4;a.px=a.x;a.py=a.y}function Yf(a){a.fixed&=-5}function ke(a,c,g){var b=0,k=0;a.charge=0;if(!a.leaf)for(var d=a.nodes,e=d.length,s=-1,f;++s<e;)f=d[s],null!=
f&&(ke(f,c,g),a.charge+=f.charge,b+=f.charge*f.cx,k+=f.charge*f.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),c*=g[a.point.index],a.charge+=a.pointCharge=c,b+=c*a.point.x,k+=c*a.point.y);a.cx=b/a.charge;a.cy=k/a.charge}function $a(a,c){l.rebind(a,c,"sort","children","value");a.nodes=a;a.links=Zf;return a}function $f(a){return a.children}function ag(a){return a.value}function bg(a,c){return c.value-a.value}function Zf(a){return l.merge(a.map(function(a){return(a.children||
[]).map(function(g){return{source:a,target:g}})}))}function cg(a){return a.x}function dg(a){return a.y}function eg(a,c,g){a.y0=c;a.y=g}function Gc(a){return l.range(a.length)}function Hc(a){var c=-1;a=a[0].length;for(var g=[];++c<a;)g[c]=0;return g}function fg(a){for(var c=1,g=0,b=a[0][1],k,d=a.length;c<d;++c)(k=a[c][1])>b&&(g=c,b=k);return g}function gg(a){return a.reduce(hg,0)}function hg(a,c){return a+c[1]}function ig(a,c){return le(a,Math.ceil(Math.log(c.length)/Math.LN2+1))}function le(a,c){for(var g=
-1,b=+a[0],k=(a[1]-b)/c,d=[];++g<=c;)d[g]=k*g+b;return d}function jg(a){return[l.min(a),l.max(a)]}function me(a,c){return a.parent==c.parent?1:2}function Ic(a){var c=a.children;return c&&c.length?c[0]:a._tree.thread}function Jc(a){var c=a.children,g;return c&&(g=c.length)?c[g-1]:a._tree.thread}function xb(a,c){var g=a.children;if(g&&(k=g.length))for(var b,k,d=-1;++d<k;)0<c(b=xb(g[d],c),a)&&(a=b);return a}function kg(a,c){return a.x-c.x}function lg(a,c){return c.x-a.x}function mg(a,c){return a.depth-
c.depth}function xa(a,c){function g(a,b){var d=a.children;if(d&&(h=d.length))for(var e,s=null,f=-1,h;++f<h;)e=d[f],g(e,s),s=e;c(a,b)}g(a,null)}function ng(a,c){return a.value-c.value}function Kc(a,c){var g=a._pack_next;a._pack_next=c;c._pack_prev=a;c._pack_next=g;g._pack_prev=c}function ne(a,c){a._pack_next=c;c._pack_prev=a}function oe(a,c){var g=c.x-a.x,b=c.y-a.y,k=a.r+c.r;return.001<k*k-g*g-b*b}function pe(a){function c(a){b=Math.min(a.x-a.r,b);k=Math.max(a.x+a.r,k);d=Math.min(a.y-a.r,d);e=Math.max(a.y+
a.r,e)}if((g=a.children)&&(q=g.length)){var g,b=Infinity,k=-Infinity,d=Infinity,e=-Infinity,s,f,h,l,n,m,q;g.forEach(og);s=g[0];s.x=-s.r;s.y=0;c(s);if(1<q&&(f=g[1],f.x=f.r,f.y=0,c(f),2<q))for(h=g[2],qe(s,f,h),c(h),Kc(s,h),s._pack_prev=h,Kc(h,f),f=s._pack_next,l=3;l<q;l++){qe(s,f,h=g[l]);var C=0,p=1,O=1;for(n=f._pack_next;n!==f;n=n._pack_next,p++)if(oe(n,h)){C=1;break}if(1==C)for(m=s._pack_prev;m!==n._pack_prev&&!oe(m,h);m=m._pack_prev,O++);C?(p<O||p==O&&f.r<s.r?ne(s,f=n):ne(s=m,f),l--):(Kc(s,h),f=
h,c(h))}s=(b+k)/2;f=(d+e)/2;for(l=n=0;l<q;l++)h=g[l],h.x-=s,h.y-=f,n=Math.max(n,h.r+Math.sqrt(h.x*h.x+h.y*h.y));a.r=n;g.forEach(pg)}}function og(a){a._pack_next=a._pack_prev=a}function pg(a){delete a._pack_next;delete a._pack_prev}function re(a,c,g,b){var k=a.children;a.x=c+=b*a.x;a.y=g+=b*a.y;a.r*=b;if(k){a=-1;for(var d=k.length;++a<d;)re(k[a],c,g,b)}}function qe(a,c,g){var b=a.r+g.r,k=c.x-a.x,d=c.y-a.y;if(b&&(k||d)){var e=c.r+g.r,s=k*k+d*d,e=e*e,b=b*b;c=.5+(b-e)/(2*s);e=Math.sqrt(Math.max(0,2*e*
(b+s)-(b-=s)*b-e*e))/(2*s);g.x=a.x+c*k+e*d;g.y=a.y+c*d-e*k}else g.x=a.x+b,g.y=a.y}function qg(a){return 1+l.max(a,function(a){return a.y})}function rg(a){return a.reduce(function(a,g){return a+g.x},0)/a.length}function se(a){var c=a.children;return c&&c.length?se(c[0]):a}function te(a){var c=a.children,g;return c&&(g=c.length)?te(c[g-1]):a}function Lc(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function ue(a,c){var g=a.x+c[3],b=a.y+c[0],k=a.dx-c[1]-c[3],d=a.dy-c[0]-c[2];0>k&&(g+=k/2,k=0);0>d&&(b+=d/2,
d=0);return{x:g,y:b,dx:k,dy:d}}function Pa(a){var c=a[0];a=a[a.length-1];return c<a?[c,a]:[a,c]}function yb(a){return a.rangeExtent?a.rangeExtent():Pa(a.range())}function sg(a,c,g,b){var k=g(a[0],a[1]),d=b(c[0],c[1]);return function(a){return d(k(a))}}function zb(a,c){var g=0,b=a.length-1,k=a[g],d=a[b],e;d<k&&(e=g,g=b,b=e,e=k,k=d,d=e);if(c=c(d-k))a[g]=c.floor(k),a[b]=c.ceil(d);return a}function tg(a,c,g,b){var k=[],d=[],e=0,s=Math.min(a.length,c.length)-1;a[s]<a[0]&&(a=a.slice().reverse(),c=c.slice().reverse());
for(;++e<=s;)k.push(g(a[e-1],a[e])),d.push(b(c[e-1],c[e]));return function(c){var g=l.bisect(a,c,1,s)-1;return d[g](k[g](c))}}function ve(a,c,g,b){function k(){var k=2<Math.min(a.length,c.length)?tg:sg,f=b?Tf:Sf;e=k(a,c,f,g);s=k(c,a,f,Ga);return d}function d(a){return e(a)}var e,s;d.invert=function(a){return s(a)};d.domain=function(c){if(!arguments.length)return a;a=c.map(Number);return k()};d.range=function(a){if(!arguments.length)return c;c=a;return k()};d.rangeRound=function(a){return d.range(a).interpolate(ie)};
d.clamp=function(a){if(!arguments.length)return b;b=a;return k()};d.interpolate=function(a){if(!arguments.length)return g;g=a;return k()};d.ticks=function(c){return l.range.apply(l,Ab(a,c))};d.tickFormat=function(c,g){return Mc(a,c,g)};d.nice=function(){zb(a,we);return k()};d.copy=function(){return ve(a,c,g,b)};return k()}function Nc(a,c){return l.rebind(a,c,"range","rangeRound","interpolate","clamp")}function we(a){return(a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1))&&{floor:function(c){return Math.floor(c/
a)*a},ceil:function(c){return Math.ceil(c/a)*a}}}function Ab(a,c){var g=Pa(a),b=g[1]-g[0],k=Math.pow(10,Math.floor(Math.log(b/c)/Math.LN10)),b=c/b*k;.15>=b?k*=10:.35>=b?k*=5:.75>=b&&(k*=2);g[0]=Math.ceil(g[0]/k)*k;g[1]=Math.floor(g[1]/k)*k+.5*k;g[2]=k;return g}function Mc(a,c,g){var b=-Math.floor(Math.log(Ab(a,c)[2])/Math.LN10+.01);return l.format(g?g.replace(xe,function(a,c,g,d,e,f,h,l,n,m){return[c,g,d,e,f,h,l,n||"."+(b-2*("%"===m)),m].join("")}):",."+b+"f")}function ye(a,c,g,b,k){function d(c){return a(g(c))}
function e(){return g===Oc?{floor:s,ceil:f}:{floor:function(a){return-f(-a)},ceil:function(a){return-s(-a)}}}function s(a){return Math.pow(c,Math.floor(Math.log(a)/Math.log(c)))}function f(a){return Math.pow(c,Math.ceil(Math.log(a)/Math.log(c)))}d.invert=function(c){return b(a.invert(c))};d.domain=function(c){if(!arguments.length)return k;0>c[0]?(g=Pc,b=ug):(g=Oc,b=ze);a.domain((k=c.map(Number)).map(g));return d};d.base=function(a){if(!arguments.length)return c;c=+a;return d};d.nice=function(){a.domain(zb(k,
e).map(g));return d};d.ticks=function(){var k=Pa(a.domain()),d=[];if(k.every(isFinite)){var r=Math.log(c),e=Math.floor(k[0]/r),r=Math.ceil(k[1]/r),s=b(k[0]),k=b(k[1]),f=c%1?2:c;if(g===Pc)for(d.push(-Math.pow(c,-e));e++<r;)for(var x=f-1;0<x;x--)d.push(-Math.pow(c,-e)*x);else{for(;e<r;e++)for(x=1;x<f;x++)d.push(Math.pow(c,e)*x);d.push(Math.pow(c,e))}for(e=0;d[e]<s;e++);for(r=d.length;d[r-1]>k;r--);d=d.slice(e,r)}return d};d.tickFormat=function(a,k){2>arguments.length&&(k=vg);if(!arguments.length)return k;
var e=Math.log(c),s=Math.max(.1,a/d.ticks().length),f=g===Pc?(x=-1E-12,Math.floor):(x=1E-12,Math.ceil),x;return function(a){return a/b(e*f(g(a)/e+x))<=s?k(a):""}};d.copy=function(){return ye(a.copy(),c,g,b,k)};return Nc(d,a)}function Oc(a){return Math.log(0>a?0:a)}function ze(a){return Math.exp(a)}function Pc(a){return-Math.log(0<a?0:-a)}function ug(a){return-Math.exp(-a)}function Ae(a,c,g){function b(c){return a(k(c))}var k=Bb(c),d=Bb(1/c);b.invert=function(c){return d(a.invert(c))};b.domain=function(c){if(!arguments.length)return g;
a.domain((g=c.map(Number)).map(k));return b};b.ticks=function(a){return l.range.apply(l,Ab(g,a))};b.tickFormat=function(a,c){return Mc(g,a,c)};b.nice=function(){return b.domain(zb(g,we))};b.exponent=function(e){if(!arguments.length)return c;k=Bb(c=e);d=Bb(1/c);a.domain(g.map(k));return b};b.copy=function(){return Ae(a.copy(),c,g)};return Nc(b,a)}function Bb(a){return function(c){return 0>c?-Math.pow(-c,a):Math.pow(c,a)}}function Be(a,c){function g(c){return d[((k.get(c)||k.set(c,a.push(c)))-1)%d.length]}
function b(c,g){return l.range(a.length).map(function(a){return c+g*a})}var k,d,e;g.domain=function(b){if(!arguments.length)return a;a=[];k=new f;for(var d=-1,v=b.length,r;++d<v;)k.has(r=b[d])||k.set(r,a.push(r));return g[c.t].apply(g,c.a)};g.range=function(a){if(!arguments.length)return d;d=a;e=0;c={t:"range",a:arguments};return g};g.rangePoints=function(k,f){2>arguments.length&&(f=0);var h=k[0],l=k[1],n=(l-h)/(Math.max(1,a.length-1)+f);d=b(2>a.length?(h+l)/2:h+n*f/2,n);e=0;c={t:"rangePoints",a:arguments};
return g};g.rangeBands=function(k,f,h){2>arguments.length&&(f=0);3>arguments.length&&(h=f);var l=k[1]<k[0],n=k[l-0],m=(k[1-l]-n)/(a.length-f+2*h);d=b(n+m*h,m);l&&d.reverse();e=m*(1-f);c={t:"rangeBands",a:arguments};return g};g.rangeRoundBands=function(k,f,h){2>arguments.length&&(f=0);3>arguments.length&&(h=f);var l=k[1]<k[0],n=k[l-0],m=k[1-l],q=Math.floor((m-n)/(a.length-f+2*h));d=b(n+Math.round((m-n-(a.length-f)*q)/2),q);l&&d.reverse();e=Math.round(q*(1-f));c={t:"rangeRoundBands",a:arguments};return g};
g.rangeBand=function(){return e};g.rangeExtent=function(){return Pa(c.a[0])};g.copy=function(){return Be(a,c)};return g.domain(a)}function Ce(a,c){function g(){var g=0,d=c.length;for(k=[];++g<d;)k[g-1]=l.quantile(a,g/d);return b}function b(a){return isNaN(a=+a)?NaN:c[l.bisect(k,a)]}var k;b.domain=function(c){if(!arguments.length)return a;a=c.filter(function(a){return!isNaN(a)}).sort(l.ascending);return g()};b.range=function(a){if(!arguments.length)return c;c=a;return g()};b.quantiles=function(){return k};
b.copy=function(){return Ce(a,c)};return g()}function De(a,c,g){function b(c){return g[Math.max(0,Math.min(e,Math.floor(d*(c-a))))]}function k(){d=g.length/(c-a);e=g.length-1;return b}var d,e;b.domain=function(g){if(!arguments.length)return[a,c];a=+g[0];c=+g[g.length-1];return k()};b.range=function(a){if(!arguments.length)return g;g=a;return k()};b.copy=function(){return De(a,c,g)};return k()}function Ee(a,c){function g(g){return c[l.bisect(a,g)]}g.domain=function(c){if(!arguments.length)return a;
a=c;return g};g.range=function(a){if(!arguments.length)return c;c=a;return g};g.copy=function(){return Ee(a,c)};return g}function Fe(a){function c(a){return+a}c.invert=c;c.domain=c.range=function(g){if(!arguments.length)return a;a=g.map(c);return c};c.ticks=function(c){return l.range.apply(l,Ab(a,c))};c.tickFormat=function(c,b){return Mc(a,c,b)};c.copy=function(){return Fe(a)};return c}function wg(a){return a.innerRadius}function xg(a){return a.outerRadius}function Ge(a){return a.startAngle}function He(a){return a.endAngle}
function Ie(a){for(var c,g=-1,b=a.length,k,d;++g<b;)c=a[g],k=c[0],d=c[1]+Ha,c[0]=k*Math.cos(d),c[1]=k*Math.sin(d);return a}function Je(a){function c(c){function h(){D.push("M",f(a(p),m),n,l(a(q.reverse()),m),"Z")}for(var D=[],q=[],p=[],t=-1,u=c.length,H,w=R(g),y=R(k),T=g===b?function(){return A}:R(b),ia=k===d?function(){return Fd}:R(d),A,Fd;++t<u;)e.call(this,H=c[t],t)?(q.push([A=+w.call(this,H,t),Fd=+y.call(this,H,t)]),p.push([+T.call(this,H,t),+ia.call(this,H,t)])):q.length&&(h(),q=[],p=[]);q.length&&
h();return D.length?D.join(""):null}var g=ra,b=ra,k=0,d=va,e=Va,f=ma,h=f.key,l=f,n="L",m=.7;c.x=function(a){if(!arguments.length)return b;g=b=a;return c};c.x0=function(a){if(!arguments.length)return g;g=a;return c};c.x1=function(a){if(!arguments.length)return b;b=a;return c};c.y=function(a){if(!arguments.length)return d;k=d=a;return c};c.y0=function(a){if(!arguments.length)return k;k=a;return c};c.y1=function(a){if(!arguments.length)return d;d=a;return c};c.defined=function(a){if(!arguments.length)return e;
e=a;return c};c.interpolate=function(a){if(!arguments.length)return h;h="function"===typeof a?f=a:(f=xc.get(a)||ma).key;l=f.reverse||f;n=f.closed?"M":"L";return c};c.tension=function(a){if(!arguments.length)return m;m=a;return c};return c}function yg(a){return a.radius}function Ke(a){return[a.x,a.y]}function zg(a){return function(){var c=a.apply(this,arguments),g=c[0],c=c[1]+Ha;return[g*Math.cos(c),g*Math.sin(c)]}}function Ag(){return 64}function Bg(){return"circle"}function Le(a){a=Math.sqrt(a/F);
return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function ab(a,c){Vb(a,aa);a.id=c;return a}function Qc(a,c,g,b){var k=a.id;return ha(a,"function"===typeof g?function(a,d,e){a.__transition__[k].tween.set(c,b(g.call(a,a.__data__,d,e)))}:(g=b(g),function(a){a.__transition__[k].tween.set(c,g)}))}function Cg(a){null==a&&(a="");return function(){this.textContent=a}}function Cb(a,c,g,b){var k=a.__transition__||(a.__transition__={active:0,count:0}),d=k[g];if(!d){var e=b.time,d=k[g]=
{tween:new f,event:l.dispatch("start","end"),time:e,ease:b.ease,delay:b.delay,duration:b.duration};++k.count;l.timer(function(b){function v(b){if(k.active>g)return h();k.active=g;q.start.call(a,n,c);d.tween.forEach(function(g,b){(b=b.call(a,n,c))&&O.push(b)});f(b)||l.timer(f,0,e);return 1}function f(b){if(k.active!==g)return h();b=(b-C)/p;for(var d=m(b),e=O.length;0<e;)O[--e].call(a,d);if(1<=b)return h(),q.end.call(a,n,c),1}function h(){--k.count?delete k[g]:delete a.__transition__;return 1}var n=
a.__data__,m=d.ease,q=d.event,C=d.delay,p=d.duration,O=[];return C<=b?v(b):l.timer(v,C,e),1},0,e);return d}}function Me(a,c){a.attr("transform",function(a){return"translate("+c(a)+",0)"})}function Ne(a,c){a.attr("transform",function(a){return"translate(0,"+c(a)+")"})}function Dg(a,c,g){b=[];if(g&&1<c.length){a=Pa(a.domain());for(var b,k=-1,d=c.length,e=(c[1]-c[0])/++g,f,h;++k<d;)for(f=g;0<--f;)(h=+c[k]-f*e)>=a[0]&&b.push(h);--k;for(f=0;++f<g&&(h=+c[k]+f*e)<a[1];)b.push(h)}return b}function Ia(){this._=
new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Ja(a,c,g){function b(c){var g=a(c),k=d(g,1);return c-g<k-c?g:k}function k(g){c(g=a(new fa(g-1)),1);return g}function d(a,g){c(a=new fa(+a),g);return a}function e(a,b,d){a=k(a);var v=[];if(1<d)for(;a<b;)g(a)%d||v.push(new Date(+a)),c(a,1);else for(;a<b;)v.push(new Date(+a)),c(a,1);return v}a.floor=a;a.round=b;a.ceil=k;a.offset=d;a.range=e;var f=a.utc=Db(a);f.floor=f;f.round=Db(b);f.ceil=Db(k);f.offset=Db(d);f.range=function(a,
c,g){try{fa=Ia;var b=new Ia;b._=a;return e(b,c,g)}finally{fa=Date}};return a}function Db(a){return function(c,g){try{fa=Ia;var b=new Ia;b._=c;return a(b,g)._}finally{fa=Date}}}function Eb(a,c,g,b){for(var k,d=0,e=c.length,f=g.length;d<e;){if(b>=f)return-1;k=c.charCodeAt(d++);if(37===k){if(k=Eg[c.charAt(d++)],!k||0>(b=k(a,g,b)))return-1}else if(k!=g.charCodeAt(b++))return-1}return b}function Fb(a){return new RegExp("^(?:"+a.map(l.requote).join("|")+")","i")}function Oe(a){for(var c=new f,g=-1,b=a.length;++g<
b;)c.set(a[g].toLowerCase(),g);return c}function ja(a,c,g){a+="";var b=a.length;return b<g?Array(g-b+1).join(c)+a:a}function Pe(a,c,g){ga.lastIndex=0;return(c=ga.exec(c.substring(g,g+2)))?(a.d=+c[0],g+c[0].length):-1}function Qe(a,c,g){ga.lastIndex=0;return(c=ga.exec(c.substring(g,g+2)))?(a.H=+c[0],g+c[0].length):-1}function Rc(a){return a.toISOString()}function Sc(a,c,g){function b(c){return a(c)}b.invert=function(c){return Tc(a.invert(c))};b.domain=function(c){if(!arguments.length)return a.domain().map(Tc);
a.domain(c);return b};b.nice=function(a){return b.domain(zb(b.domain(),function(){return a}))};b.ticks=function(g,d){var e=Pa(b.domain());if("function"!==typeof g){var f=(e[1]-e[0])/g,h=l.bisect(Gb,f);if(h==Gb.length)return c.year(e,g);if(!h)return a.ticks(g).map(Tc);Math.log(f/Gb[h-1])<Math.log(Gb[h]/f)&&--h;g=c[h];d=g[1];g=g[0].range}return g(e[0],new Date(+e[1]+1),d)};b.tickFormat=function(){return g};b.copy=function(){return Sc(a.copy(),c,g)};return Nc(b,a)}function Tc(a){return new Date(a)}function Re(a){return function(c){for(var g=
a.length-1,b=a[g];!b[1](c);)b=a[--g];return b[0](c)}}function Uc(a){var c=new Date(a,0,1);c.setFullYear(a);return c}function Fg(a){var c=a.getFullYear(),g=Uc(c),b=Uc(c+1);return c+(a-g)/(b-g)}function Vc(a){var c=new Date(Date.UTC(a,0,1));c.setUTCFullYear(a);return c}function Gg(a){var c=a.getUTCFullYear(),g=Vc(c),b=Vc(c+1);return c+(a-g)/(b-g)}function Hg(a){return JSON.parse(a.responseText)}function Ig(a){var c=ea.createRange();c.selectNode(ea.body);return c.createContextualFragment(a.responseText)}
var l={version:"3.1.10"};Date.now||(Date.now=function(){return+new Date});var ea=document,da=window;try{ea.createElement("div").style.setProperty("opacity",0,"")}catch(mh){var Se=da.CSSStyleDeclaration.prototype,Jg=Se.setProperty;Se.setProperty=function(a,c,g){Jg.call(this,a,c+"",g)}}l.ascending=function(a,c){return a<c?-1:a>c?1:a>=c?0:NaN};l.descending=function(a,c){return c<a?-1:c>a?1:c>=a?0:NaN};l.min=function(a,c){var g=-1,b=a.length,d,e;if(1===arguments.length){for(;++g<b&&(null==(d=a[g])||d!=
d);)d=void 0;for(;++g<b;)null!=(e=a[g])&&d>e&&(d=e)}else{for(;++g<b&&(null==(d=c.call(a,a[g],g))||d!=d);)d=void 0;for(;++g<b;)null!=(e=c.call(a,a[g],g))&&d>e&&(d=e)}return d};l.max=function(a,c){var g=-1,b=a.length,d,e;if(1===arguments.length){for(;++g<b&&(null==(d=a[g])||d!=d);)d=void 0;for(;++g<b;)null!=(e=a[g])&&e>d&&(d=e)}else{for(;++g<b&&(null==(d=c.call(a,a[g],g))||d!=d);)d=void 0;for(;++g<b;)null!=(e=c.call(a,a[g],g))&&e>d&&(d=e)}return d};l.extent=function(a,c){var g=-1,b=a.length,d,e,f;if(1===
arguments.length){for(;++g<b&&(null==(d=f=a[g])||d!=d);)d=f=void 0;for(;++g<b;)null!=(e=a[g])&&(d>e&&(d=e),f<e&&(f=e))}else{for(;++g<b&&(null==(d=f=c.call(a,a[g],g))||d!=d);)d=void 0;for(;++g<b;)null!=(e=c.call(a,a[g],g))&&(d>e&&(d=e),f<e&&(f=e))}return[d,f]};l.sum=function(a,c){var g=0,b=a.length,d,e=-1;if(1===arguments.length)for(;++e<b;)isNaN(d=+a[e])||(g+=d);else for(;++e<b;)isNaN(d=+c.call(a,a[e],e))||(g+=d);return g};l.mean=function(a,c){var g=a.length,d,k=0,e=-1,f=0;if(1===arguments.length)for(;++e<
g;)b(d=a[e])&&(k+=(d-k)/++f);else for(;++e<g;)b(d=c.call(a,a[e],e))&&(k+=(d-k)/++f);return f?k:void 0};l.quantile=function(a,c){var b=(a.length-1)*c+1,d=Math.floor(b),k=+a[d-1];return(b-=d)?k+b*(a[d]-k):k};l.median=function(a,c){1<arguments.length&&(a=a.map(c));a=a.filter(b);return a.length?l.quantile(a.sort(l.ascending),.5):void 0};l.bisector=function(a){return{left:function(c,b,d,k){3>arguments.length&&(d=0);4>arguments.length&&(k=c.length);for(;d<k;){var e=d+k>>>1;a.call(c,c[e],e)<b?d=e+1:k=e}return d},
right:function(c,b,d,k){3>arguments.length&&(d=0);4>arguments.length&&(k=c.length);for(;d<k;){var e=d+k>>>1;b<a.call(c,c[e],e)?k=e:d=e+1}return d}}};var Te=l.bisector(function(a){return a});l.bisectLeft=Te.left;l.bisect=l.bisectRight=Te.right;l.shuffle=function(a){for(var c=a.length,b,d;c;)d=Math.random()*c--|0,b=a[c],a[c]=a[d],a[d]=b;return a};l.permute=function(a,c){for(var b=[],d=-1,k=c.length;++d<k;)b[d]=a[c[d]];return b};l.zip=function(){if(!(k=arguments.length))return[];for(var a=-1,c=l.min(arguments,
e),b=Array(c);++a<c;)for(var d=-1,k,f=b[a]=Array(k);++d<k;)f[d]=arguments[d][a];return b};l.transpose=function(a){return l.zip.apply(l,a)};l.keys=function(a){var c=[],b;for(b in a)c.push(b);return c};l.values=function(a){var c=[],b;for(b in a)c.push(a[b]);return c};l.entries=function(a){var c=[],b;for(b in a)c.push({key:b,value:a[b]});return c};l.merge=function(a){return Array.prototype.concat.apply([],a)};l.range=function(a,c,b){3>arguments.length&&(b=1,2>arguments.length&&(c=a,a=0));if(Infinity===
(c-a)/b)throw Error("infinite range");var d=[],k;k=Math.abs(b);for(var e=1;k*e%1;)e*=10;k=e;var e=-1,f;a*=k;c*=k;b*=k;if(0>b)for(;(f=a+b*++e)>c;)d.push(f/k);else for(;(f=a+b*++e)<c;)d.push(f/k);return d};l.map=function(a){var c=new f,b;for(b in a)c.set(b,a[b]);return c};d(f,{has:function(a){return Ca+a in this},get:function(a){return this[Ca+a]},set:function(a,c){return this[Ca+a]=c},remove:function(a){a=Ca+a;return a in this&&delete this[a]},keys:function(){var a=[];this.forEach(function(c){a.push(c)});
return a},values:function(){var a=[];this.forEach(function(c,b){a.push(b)});return a},entries:function(){var a=[];this.forEach(function(c,b){a.push({key:c,value:b})});return a},forEach:function(a){for(var c in this)c.charCodeAt(0)===Ue&&a.call(this,c.substring(1),this[c])}});var Ca="\x00",Ue=Ca.charCodeAt(0);l.nest=function(){function a(c,k,h){if(h>=d.length)return x?x.call(b,k):e?k.sort(e):k;for(var l=-1,n=k.length,m=d[h++],q,C,p=new f,O;++l<n;)(O=p.get(q=m(C=k[l])))?O.push(C):p.set(q,[C]);c?(C=
c(),k=function(b,g){C.set(b,a(c,g,h))}):(C={},k=function(b,g){C[b]=a(c,g,h)});p.forEach(k);return C}function c(a,b){if(b>=d.length)return a;var g=[],e=k[b++];a.forEach(function(a,d){g.push({key:a,values:c(d,b)})});return e?g.sort(function(a,c){return e(a.key,c.key)}):g}var b={},d=[],k=[],e,x;b.map=function(c,b){return a(b,c,0)};b.entries=function(b){return c(a(l.map,b,0),0)};b.key=function(a){d.push(a);return b};b.sortKeys=function(a){k[d.length-1]=a;return b};b.sortValues=function(a){e=a;return b};
b.rollup=function(a){x=a;return b};return b};l.set=function(a){var c=new h;if(a)for(var b=0;b<a.length;b++)c.add(a[b]);return c};d(h,{has:function(a){return Ca+a in this},add:function(a){this[Ca+a]=!0;return a},remove:function(a){a=Ca+a;return a in this&&delete this[a]},values:function(){var a=[];this.forEach(function(c){a.push(c)});return a},forEach:function(a){for(var c in this)c.charCodeAt(0)===Ue&&a.call(this,c.substring(1))}});l.behavior={};l.rebind=function(a,c){for(var b=1,d=arguments.length,
k;++b<d;)a[k=arguments[b]]=m(a,c,c[k]);return a};l.dispatch=function(){for(var a=new n,c=-1,b=arguments.length;++c<b;)a[arguments[c]]=p(a);return a};n.prototype.on=function(a,c){var b=a.indexOf("."),d="";0<=b&&(d=a.substring(b+1),a=a.substring(0,b));if(a)return 2>arguments.length?this[a].on(d):this[a].on(d,c);if(2===arguments.length){if(null==c)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,null);return this}};l.event=null;l.mouse=function(a){return z(a,t())};var Ub=/WebKit/.test(da.navigator.userAgent)?
-1:0,za=function(a){return Array.prototype.slice.call(a)};try{za(ea.documentElement.childNodes)[0].nodeType}catch(nh){za=y}var Vb=[].__proto__?function(a,c){a.__proto__=c}:function(a,c){for(var b in c)a[b]=c[b]};l.touches=function(a,c){2>arguments.length&&(c=t().touches);return c?za(c).map(function(c){var b=z(a,c);b.identifier=c.identifier;return b}):[]};l.behavior.drag=function(){function a(){this.on("mousedown.drag",c).on("touchstart.drag",c)}function c(){function a(){var c=e.parentNode;return null!=
n?l.touches(c).filter(function(a){return a.identifier===n})[0]:l.mouse(c)}function c(){f({type:"dragend"});ba&&(q(),l.event.target===h&&u(t,"click"));t.on(null!=n?"touchmove.drag-"+n:"mousemove.drag",null).on(null!=n?"touchend.drag-"+n:"mouseup.drag",null)}var e=this,f=b.of(e,arguments),h=l.event.target,n=l.event.touches?l.event.changedTouches[0].identifier:null,m,p=a(),ba=0,t=l.select(da).on(null!=n?"touchmove.drag-"+n:"mousemove.drag",function(){if(!e.parentNode)return c();var b=a(),g=b[0]-p[0],
d=b[1]-p[1];ba=ba|g|d;p=b;q();f({type:"drag",x:b[0]+m[0],y:b[1]+m[1],dx:g,dy:d})}).on(null!=n?"touchend.drag-"+n:"mouseup.drag",c,!0);d?(m=d.apply(e,arguments),m=[m.x-p[0],m.y-p[1]]):m=[0,0];null==n&&q();f({type:"dragstart"})}var b=w(a,"drag","dragstart","dragend"),d=null;a.origin=function(c){if(!arguments.length)return d;d=c;return a};return l.rebind(a,b,"on")};var Wb=function(a,c){return c.querySelector(a)},Xb=function(a,c){return c.querySelectorAll(a)},Da=ea.documentElement,Kg=Da.matchesSelector||
Da.webkitMatchesSelector||Da.mozMatchesSelector||Da.msMatchesSelector||Da.oMatchesSelector,ed=function(a,c){return Kg.call(a,c)};"function"===typeof Sizzle&&(Wb=function(a,c){return Sizzle(a,c)[0]||null},Xb=function(a,c){return Sizzle.uniqueSort(Sizzle(a,c))},ed=Sizzle.matchesSelector);l.selection=function(){return Ve};var U=l.selection.prototype=[];U.select=function(a){var c=[],b,d,k,e;"function"!==typeof a&&(a=E(a));for(var f=-1,s=this.length;++f<s;){c.push(b=[]);b.parentNode=(k=this[f]).parentNode;
for(var h=-1,l=k.length;++h<l;)(e=k[h])?(b.push(d=a.call(e,e.__data__,h)),d&&"__data__"in e&&(d.__data__=e.__data__)):b.push(null)}return G(c)};U.selectAll=function(a){var c=[],b,d;"function"!==typeof a&&(a=M(a));for(var k=-1,e=this.length;++k<e;)for(var f=this[k],s=-1,h=f.length;++s<h;)if(d=f[s])c.push(b=za(a.call(d,d.__data__,s))),b.parentNode=d;return G(c)};var Wc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",
xmlns:"http://www.w3.org/2000/xmlns/"};l.ns={prefix:Wc,qualify:function(a){var c=a.indexOf(":"),b=a;0<=c&&(b=a.substring(0,c),a=a.substring(c+1));return Wc.hasOwnProperty(b)?{space:Wc[b],local:a}:a}};U.attr=function(a,c){if(2>arguments.length){if("string"===typeof a){var b=this.node();a=l.ns.qualify(a);return a.local?b.getAttributeNS(a.space,a.local):b.getAttribute(a)}for(c in a)this.each(P(c,a[c]));return this}return this.each(P(a,c))};l.requote=function(a){return a.replace(Lg,"\\$&")};var Lg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;
U.classed=function(a,c){if(2>arguments.length){if("string"===typeof a){var b=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,k=-1;if(c=b.classList)for(;++k<d;){if(!c.contains(a[k]))return!1}else for(c=b.getAttribute("class");++k<d;)if(!B(a[k]).test(c))return!1;return!0}for(c in a)this.each(A(c,a[c]));return this}return this.each(A(a,c))};U.style=function(a,c,b){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(c="");for(b in a)this.each(N(b,a[b],c));return this}if(2>d)return da.getComputedStyle(this.node(),
null).getPropertyValue(a);b=""}return this.each(N(a,c,b))};U.property=function(a,c){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(c in a)this.each(Q(c,a[c]));return this}return this.each(Q(a,c))};U.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var c=a.apply(this,arguments);this.textContent=null==c?"":c}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};U.html=function(a){return arguments.length?
this.each("function"===typeof a?function(){var c=a.apply(this,arguments);this.innerHTML=null==c?"":c}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};U.append=function(a){function c(){return this.appendChild(ea.createElementNS(this.namespaceURI,a))}function b(){return this.appendChild(ea.createElementNS(a.space,a.local))}a=l.ns.qualify(a);return this.select(a.local?b:c)};U.insert=function(a,c){function b(g,d){return this.insertBefore(ea.createElementNS(this.namespaceURI,
a),c.call(this,g,d))}function d(b,g){return this.insertBefore(ea.createElementNS(a.space,a.local),c.call(this,b,g))}a=l.ns.qualify(a);"function"!==typeof c&&(c=E(c));return this.select(a.local?d:b)};U.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};U.data=function(a,c){function b(a,g){var d,k=a.length,e=g.length,r=Math.min(k,e),v=Array(e),x=Array(e),n=Array(k),m,q;if(c){var r=new f,p=new f,t=[],u;for(d=-1;++d<k;)u=c.call(m=a[d],m.__data__,d),r.has(u)?
n[d]=m:r.set(u,m),t.push(u);for(d=-1;++d<e;)u=c.call(g,q=g[d],d),(m=r.get(u))?(v[d]=m,m.__data__=q):p.has(u)||(x[d]={__data__:q}),p.set(u,q),r.remove(u);for(d=-1;++d<k;)r.has(t[d])&&(n[d]=a[d])}else{for(d=-1;++d<r;)m=a[d],q=g[d],m?(m.__data__=q,v[d]=m):x[d]={__data__:q};for(;d<e;++d)x[d]={__data__:g[d]};for(;d<k;++d)n[d]=a[d]}x.update=v;x.parentNode=v.parentNode=n.parentNode=a.parentNode;s.push(x);h.push(v);l.push(n)}var d=-1,k=this.length,e,x;if(!arguments.length){for(a=Array(k=(e=this[0]).length);++d<
k;)if(x=e[d])a[d]=x.__data__;return a}var s=Ea([]),h=G([]),l=G([]);if("function"===typeof a)for(;++d<k;)b(e=this[d],a.call(e,e.parentNode.__data__,d));else for(;++d<k;)b(e=this[d],a);h.enter=function(){return s};h.exit=function(){return l};return h};U.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};U.filter=function(a){var c=[],b,d,k;"function"!==typeof a&&(a=Sa(a));for(var e=0,f=this.length;e<f;e++){c.push(b=[]);b.parentNode=(d=this[e]).parentNode;
for(var s=0,h=d.length;s<h;s++)(k=d[s])&&a.call(k,k.__data__,s)&&b.push(k)}return G(c)};U.order=function(){for(var a=-1,c=this.length;++a<c;)for(var b=this[a],d=b.length-1,k=b[d],e;0<=--d;)if(e=b[d])k&&k!==e.nextSibling&&k.parentNode.insertBefore(e,k),k=e;return this};U.sort=function(a){a=cb.apply(this,arguments);for(var c=-1,b=this.length;++c<b;)this[c].sort(a);return this.order()};U.on=function(a,c,b){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(c=!1);for(b in a)this.each(fd(b,a[b],
c));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;b=!1}return this.each(fd(a,c,b))};var Yb=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});Yb.forEach(function(a){"on"+a in ea&&Yb.remove(a)});U.each=function(a){return ha(this,function(c,b,d){a.call(c,c.__data__,b,d)})};U.call=function(a){var c=za(arguments);a.apply(c[0]=this,c);return this};U.empty=function(){return!this.node()};U.node=function(){for(var a=0,c=this.length;a<c;a++)for(var b=this[a],d=0,k=b.length;d<k;d++){var e=b[d];
if(e)return e}return null};var Fa=[];l.selection.enter=Ea;l.selection.enter.prototype=Fa;Fa.append=U.append;Fa.insert=U.insert;Fa.empty=U.empty;Fa.node=U.node;Fa.select=function(a){for(var c=[],b,d,k,e,f,s=-1,h=this.length;++s<h;){k=(e=this[s]).update;c.push(b=[]);b.parentNode=e.parentNode;for(var l=-1,n=e.length;++l<n;)(f=e[l])?(b.push(k[l]=d=a.call(e.parentNode,f.__data__,l)),d.__data__=f.__data__):b.push(null)}return G(c)};U.transition=function(){var a=bb||++We,c=[],b,d,k=Object.create(Hb);k.time=
Date.now();for(var e=-1,f=this.length;++e<f;){c.push(b=[]);for(var s=this[e],h=-1,l=s.length;++h<l;)(d=s[h])&&Cb(d,h,a,k),b.push(d)}return ab(c,a)};l.select=function(a){a=["string"===typeof a?Wb(a,ea):a];a.parentNode=Da;return G([a])};l.selectAll=function(a){a=za("string"===typeof a?Xb(a,ea):a);a.parentNode=Da;return G([a])};var Ve=l.select(Da);l.behavior.zoom=function(){function a(){this.on("mousedown.zoom",f).on("mousemove.zoom",h).on(Mg+".zoom",s).on("dblclick.zoom",n).on("touchstart.zoom",m).on("touchmove.zoom",
p).on("touchend.zoom",m)}function c(a){return[(a[0]-ba[0])/C,(a[1]-ba[1])/C]}function b(a){C=Math.max(O[0],Math.min(O[1],a))}function d(a,c){c=[c[0]*C+ba[0],c[1]*C+ba[1]];ba[0]+=a[0]-c[0];ba[1]+=a[1]-c[1]}function k(){H&&H.domain(J.range().map(function(a){return(a-ba[0])/C}).map(J.invert));A&&A.domain(y.range().map(function(a){return(a-ba[1])/C}).map(y.invert))}function e(a){k();l.event.preventDefault();a({type:"zoom",scale:C,translate:ba})}function f(){var a=this,b=S.of(a,arguments),g=l.event.target,
k=0,s=l.select(da).on("mousemove.zoom",function(){k=1;d(l.mouse(a),h);e(b)}).on("mouseup.zoom",function(){k&&q();s.on("mousemove.zoom",null).on("mouseup.zoom",null);k&&l.event.target===g&&u(s,"click.zoom")}),h=c(l.mouse(a));da.focus();q()}function s(){t||(t=c(l.mouse(this)));b(Math.pow(2,.002*Ib())*C);d(l.mouse(this),t);e(S.of(this,arguments))}function h(){t=null}function n(){var a=l.mouse(this),k=c(a),f=Math.log(C)/Math.LN2;b(Math.pow(2,l.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1));d(a,k);e(S.of(this,
arguments))}function m(){var a=l.touches(this),k=Date.now();sd=C;t={};a.forEach(function(a){t[a.identifier]=c(a)});q();if(1===a.length){if(500>k-T){var f=a[0],a=c(a[0]);b(2*C);d(f,a);e(S.of(this,arguments))}T=k}}function p(){var a=l.touches(this),c=a[0],k=t[c.identifier];if(a=a[1]){var f=t[a.identifier],c=[(c[0]+a[0])/2,(c[1]+a[1])/2],k=[(k[0]+f[0])/2,(k[1]+f[1])/2];b(l.event.scale*sd)}d(c,k);T=null;e(S.of(this,arguments))}var ba=[0,0],t,C=1,sd,O=Xe,S=w(a,"zoom"),J,H,y,A,T;a.translate=function(c){if(!arguments.length)return ba;
ba=c.map(Number);k();return a};a.scale=function(c){if(!arguments.length)return C;C=+c;k();return a};a.scaleExtent=function(c){if(!arguments.length)return O;O=null==c?Xe:c.map(Number);return a};a.x=function(c){if(!arguments.length)return H;H=c;J=c.copy();ba=[0,0];C=1;return a};a.y=function(c){if(!arguments.length)return A;A=c;y=c.copy();ba=[0,0];C=1;return a};return l.rebind(a,S,"on")};var Xe=[0,Infinity],Ib,Mg="onwheel"in ea?(Ib=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):
"onmousewheel"in ea?(Ib=function(){return l.event.wheelDelta},"mousewheel"):(Ib=function(){return-l.event.detail},"MozMousePixelScroll");$.prototype.toString=function(){return this.rgb()+""};l.hsl=function(a,c,b){return 1===arguments.length?a instanceof Zb?na(a.h,a.s,a.l):ec(""+a,pd,na):na(+a,+c,+b)};var Xc=Zb.prototype=new $;Xc.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return na(this.h,this.s,this.l/a)};Xc.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return na(this.h,this.s,
a*this.l)};Xc.rgb=function(){return db(this.h,this.s,this.l)};var F=Math.PI,K=F/180,V=180/F;l.hcl=function(a,c,b){return 1===arguments.length?a instanceof eb?La(a.h,a.c,a.l):a instanceof fb?od(a.l,a.a,a.b):od((a=qd((a=l.rgb(a)).r,a.g,a.b)).l,a.a,a.b):La(+a,+c,+b)};var Yc=eb.prototype=new $;Yc.brighter=function(a){return La(this.h,this.c,Math.min(100,this.l+Jb*(arguments.length?a:1)))};Yc.darker=function(a){return La(this.h,this.c,Math.max(0,this.l-Jb*(arguments.length?a:1)))};Yc.rgb=function(){return $b(this.h,
this.c,this.l).rgb()};l.lab=function(a,c,b){return 1===arguments.length?a instanceof fb?Ma(a.l,a.a,a.b):a instanceof eb?$b(a.l,a.c,a.h):qd((a=l.rgb(a)).r,a.g,a.b):Ma(+a,+c,+b)};var Jb=18,ld=.95047,md=1,nd=1.08883,Zc=fb.prototype=new $;Zc.brighter=function(a){return Ma(Math.min(100,this.l+Jb*(arguments.length?a:1)),this.a,this.b)};Zc.darker=function(a){return Ma(Math.max(0,this.l-Jb*(arguments.length?a:1)),this.a,this.b)};Zc.rgb=function(){return kd(this.l,this.a,this.b)};l.rgb=function(a,c,b){return 1===
arguments.length?a instanceof dc?ua(a.r,a.g,a.b):ec(""+a,ua,db):ua(~~a,~~c,~~b)};var Kb=dc.prototype=new $;Kb.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var c=this.r,b=this.g,d=this.b;if(!c&&!b&&!d)return ua(30,30,30);c&&30>c&&(c=30);b&&30>b&&(b=30);d&&30>d&&(d=30);return ua(Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(d/a)))};Kb.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return ua(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*
this.b))};Kb.hsl=function(){return pd(this.r,this.g,this.b)};Kb.toString=function(){return"#"+Na(this.r)+Na(this.g)+Na(this.b)};var gb=l.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",
crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",
dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",
lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",
mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",
rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});
gb.forEach(function(a,c){gb.set(a,ec(c,ua,db))});l.functor=R;l.xhr=hc(ka);l.csv=rd(",","text/csv");l.tsv=rd("\t","text/tab-separated-values");var jb,kb,ib,hb;l.timer=function(a,c,b){if(3>arguments.length){if(2>arguments.length)c=0;else if(!isFinite(c))return;b=Date.now()}var d={callback:a,time:b+c,next:null};kb?kb.next=d:jb=d;kb=d;ib||(hb=clearTimeout(hb),ib=1,vd(jc))};l.timer.flush=function(){td();ud()};var vd=da.requestAnimationFrame||da.webkitRequestAnimationFrame||da.mozRequestAnimationFrame||
da.oRequestAnimationFrame||da.msRequestAnimationFrame||function(a){setTimeout(a,17)},Lb=[3,3],Ng="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,c){var b=Math.pow(10,3*Math.abs(8-c));return{scale:8<c?function(a){return a/b}:function(a){return a*b},symbol:a}});l.formatPrefix=function(a,c){var b=0;a&&(0>a&&(a*=-1),c&&(a=l.round(a,kc(a,c))),b=1+Math.floor(1E-12+Math.log(a)/Math.LN10),b=Math.max(-24,Math.min(24,3*Math.floor((0>=b?b+1:b-1)/3))));return Ng[8+b/3]};l.round=function(a,c){return c?
Math.round(a*(c=Math.pow(10,c)))/c:Math.round(a)};l.format=function(a){a=xe.exec(a);var c=a[1]||" ",b=a[2]||">",d=a[3]||"",k=a[4]||"",e=a[5],f=+a[6],s=a[7],h=a[8],n=a[9],m=1,q="",p=!1;h&&(h=+h.substring(1));if(e||"0"===c&&"="===b)e=c="0",b="=",s&&(f-=Math.floor((f-1)/4));switch(n){case "n":s=!0;n="g";break;case "%":m=100;q="%";n="f";break;case "p":m=100;q="%";n="r";break;case "b":case "o":case "x":case "X":k&&(k="0"+n.toLowerCase());case "c":case "d":p=!0;h=0;break;case "s":m=-1,n="r"}"#"===k&&(k=
"");"r"!=n||h||(n="g");if(null!=h)if("g"==n)h=Math.max(1,Math.min(21,h));else if("e"==n||"f"==n)h=Math.max(0,Math.min(20,h));var n=Og.get(n)||uf,t=e&&s;return function(a){if(p&&a%1)return"";var u=0>a||0===a&&0>1/a?(a=-a,"-"):d;if(0>m){var O=l.formatPrefix(a,h);a=O.scale(a);q=O.symbol}else a*=m;a=n(a,h);!e&&s&&(a=$c(a));var O=k.length+a.length+(t?0:u.length),w=O<f?Array(O=f-O+1).join(c):"";t&&(a=$c(w+a));a.replace(".",".");u+=k;return("<"===b?u+a+w:">"===b?w+u+a:"^"===b?w.substring(0,O>>=1)+u+a+w.substring(O):
u+(t?a:w+a))+q}};var xe=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Og=l.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,c){return a.toPrecision(c)},e:function(a,c){return a.toExponential(c)},f:function(a,c){return a.toFixed(c)},r:function(a,c){return(a=l.round(a,kc(a,c))).toFixed(Math.max(0,Math.min(20,
kc(a*(1+1E-15),c))))}}),$c=ka;if(Lb)var Pg=Lb.length,$c=function(a){for(var c=a.lastIndexOf("."),b=0<=c?"."+a.substring(c+1):(c=a.length,""),d=[],k=0,e=Lb[0];0<c&&0<e;)d.push(a.substring(c-=e,c+e)),e=Lb[k=(k+1)%Pg];return d.reverse().join(",")+b};l.geo={};l.geo.stream=function(a,c){if(a&&Ye.hasOwnProperty(a.type))Ye[a.type](a,c);else lb(a,c)};var Ye={Feature:function(a,c){lb(a.geometry,c)},FeatureCollection:function(a,c){for(var b=a.features,d=-1,k=b.length;++d<k;)lb(b[d].geometry,c)}},wd={Sphere:function(a,
c){c.sphere()},Point:function(a,c){var b=a.coordinates;c.point(b[0],b[1])},MultiPoint:function(a,c){for(var b=a.coordinates,d=-1,k=b.length,e;++d<k;)e=b[d],c.point(e[0],e[1])},LineString:function(a,c){lc(a.coordinates,c,0)},MultiLineString:function(a,c){for(var b=a.coordinates,d=-1,k=b.length;++d<k;)lc(b[d],c,0)},Polygon:function(a,c){xd(a.coordinates,c)},MultiPolygon:function(a,c){for(var b=a.coordinates,d=-1,k=b.length;++d<k;)xd(b[d],c)},GeometryCollection:function(a,c){for(var b=a.geometries,d=
-1,k=b.length;++d<k;)lb(b[d],c)}};l.geo.area=function(a){Qa=0;l.geo.stream(a,la);return Qa};var Qa,Ta,la={sphere:function(){Qa+=4*F},point:Z,lineStart:Z,lineEnd:Z,polygonStart:function(){Ta=0;la.lineStart=vf},polygonEnd:function(){var a=2*Ta;Qa+=0>a?4*F+a:a;la.lineStart=la.lineEnd=la.point=Z}};l.geo.bounds=function(){function a(a,c){H.push(y=[m=a,p=a]);c<q&&(q=c);c>t&&(t=c)}function c(c,b){var g=Ua([c*K,b*K]);if(w){var d=nb(w,g),d=nb([d[1],-d[0],0],d);yd(d);var d=pb(d),k=c-C,e=0<k?1:-1,f=d[0]*V*e,
k=180<Math.abs(k);k^(e*C<f&&f<e*c)?(d=d[1]*V,d>t&&(t=d)):(f=(f+360)%360-180,k^(e*C<f&&f<e*c))?(d=-d[1]*V,d<q&&(q=d)):(b<q&&(q=b),b>t&&(t=b));k?c<C?s(m,c)>s(m,p)&&(p=c):s(c,p)>s(m,p)&&(m=c):p>=m?(c<m&&(m=c),c>p&&(p=c)):c>C?s(m,c)>s(m,p)&&(p=c):s(c,p)>s(m,p)&&(m=c)}else a(c,b);w=g;C=c}function b(){A.point=c}function d(){y[0]=m;y[1]=p;A.point=a;w=null}function k(a,b){if(w){var g=a-C;J+=180<Math.abs(g)?g+(0<g?360:-360):g}else u=a,O=b;la.point(a,b);c(a,b)}function e(){la.lineStart()}function f(){k(u,O);
la.lineEnd();1E-6<Math.abs(J)&&(m=-(p=180));y[0]=m;y[1]=p;w=null}function s(a,c){return 0>(c-=a)?c+360:c}function h(a,c){return a[0]-c[0]}function n(a,c){return c[0]<=c[1]?c[0]<=a&&a<=c[1]:a<c[0]||c[1]<a}var m,q,p,t,C,u,O,w,J,H,y,A={point:a,lineStart:b,lineEnd:d,polygonStart:function(){A.point=k;A.lineStart=e;A.lineEnd=f;J=0;la.polygonStart()},polygonEnd:function(){la.polygonEnd();A.point=a;A.lineStart=b;A.lineEnd=d;0>Ta?(m=-(p=180),q=-(t=90)):1E-6<J?t=90:-1E-6>J&&(q=-90);y[0]=m;y[1]=p}};return function(a){t=
p=-(m=q=Infinity);H=[];l.geo.stream(a,A);H.sort(h);a=1;for(var c=H.length,b=H[0],g,d=[b];a<c;++a)g=H[a],n(g[0],b)||n(g[1],b)?(s(b[0],g[1])>s(b[0],b[1])&&(b[1]=g[1]),s(g[0],b[1])>s(b[0],b[1])&&(b[0]=g[0])):d.push(b=g);var k=-Infinity,e,c=d.length-1;a=0;for(b=d[c];a<=c;b=g,++a)g=d[a],(e=s(b[1],g[0]))>k&&(k=e,m=g[0],p=b[1]);H=y=null;return[[m,q],[p,t]]}}();l.geo.centroid=function(a){ca=oa=X=Y=W=0;l.geo.stream(a,pa);var c;if(oa&&1E-6<Math.abs(c=Math.sqrt(X*X+Y*Y+W*W)))return[Math.atan2(Y,X)*V,Math.asin(Math.max(-1,
Math.min(1,W/c)))*V]};var ca,oa,X,Y,W,pa={sphere:function(){2>ca&&(ca=2,oa=X=Y=W=0)},point:zd,lineStart:nc,lineEnd:oc,polygonStart:function(){2>ca&&(ca=2,oa=X=Y=W=0);pa.lineStart=wf},polygonEnd:function(){pa.lineStart=nc}},Id=Cd(Va,function(a){var c=NaN,b=NaN,d=NaN,k;return{lineStart:function(){a.lineStart();k=1},point:function(e,f){var s=0<e?F:-F,h=Math.abs(e-c);if(1E-6>Math.abs(h-F))a.point(c,b=0<(b+f)/2?F/2:-F/2),a.point(d,b),a.lineEnd(),a.lineStart(),a.point(s,b),a.point(e,b),k=0;else if(d!==
s&&h>=F){1E-6>Math.abs(c-d)&&(c-=1E-6*d);1E-6>Math.abs(e-s)&&(e-=1E-6*s);var h=c,l=b,n=e,m,q,p=Math.sin(h-n);b=1E-6<Math.abs(p)?Math.atan((Math.sin(l)*(q=Math.cos(f))*Math.sin(n)-Math.sin(f)*(m=Math.cos(l))*Math.sin(h))/(m*q*p)):(l+f)/2;a.point(d,b);a.lineEnd();a.lineStart();a.point(s,b);k=0}a.point(c=e,b=f);d=s},lineEnd:function(){a.lineEnd();c=b=NaN},clean:function(){return 2-k}}},function(a,c,b,d){null==a?(b=b*F/2,d.point(-F,b),d.point(0,b),d.point(F,b),d.point(F,0),d.point(F,-b),d.point(0,-b),
d.point(-F,-b),d.point(-F,0),d.point(-F,b)):1E-6<Math.abs(a[0]-c[0])?(a=(a[0]<c[0]?1:-1)*F,b=b*a/2,d.point(-a,b),d.point(0,b),d.point(a,b)):d.point(c[0],c[1])});l.geo.projection=Aa;l.geo.projectionMutator=qc;(l.geo.equirectangular=function(){return Aa(Wa)}).raw=Wa.invert=Wa;l.geo.rotation=function(a){function c(c){c=a(c[0]*K,c[1]*K);return c[0]*=V,c[1]*=V,c}a=rc(a[0]%360*K,a[1]*K,2<a.length?a[2]*K:0);c.invert=function(c){c=a.invert(c[0]*K,c[1]*K);return c[0]*=V,c[1]*=V,c};return c};l.geo.circle=function(){function a(){var a=
"function"===typeof c?c.apply(this,arguments):c,b=rc(-a[0]*K,-a[1]*K,0).invert,g=[];k(null,null,1,{point:function(a,c){g.push(a=b(a,c));a[0]*=V;a[1]*=V}});return{type:"Polygon",coordinates:[g]}}var c=[0,0],b,d=6,k;a.origin=function(b){if(!arguments.length)return c;c=b;return a};a.angle=function(c){if(!arguments.length)return b;k=pc((b=+c)*K,d*K);return a};a.precision=function(c){if(!arguments.length)return d;k=pc(b*K,(d=+c)*K);return a};return a.angle(90)};l.geo.distance=function(a,c){var b=(c[0]-
a[0])*K,d=a[1]*K,k=c[1]*K,e=Math.sin(b),b=Math.cos(b),f=Math.sin(d),d=Math.cos(d),h=Math.sin(k),k=Math.cos(k),l;return Math.atan2(Math.sqrt((l=k*e)*l+(l=d*h-f*k*b)*l),f*h+d*k*b)};l.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:c()}}function c(){return l.range(Math.ceil(e/t)*t,k,t).map(O).concat(l.range(Math.ceil(m/u)*u,n,u).map(y)).concat(l.range(Math.ceil(d/q)*q,b,q).filter(function(a){return 1E-6<Math.abs(a%t)}).map(C)).concat(l.range(Math.ceil(h/p)*p,f,p).filter(function(a){return 1E-6<
Math.abs(a%u)}).map(w))}var b,d,k,e,f,h,n,m,q=10,p=q,t=90,u=360,C,w,O,y,J=2.5;a.lines=function(){return c().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[O(e).concat(y(n).slice(1),O(k).reverse().slice(1),y(m).reverse().slice(1))]}};a.extent=function(c){return arguments.length?a.majorExtent(c).minorExtent(c):a.minorExtent()};a.majorExtent=function(c){if(!arguments.length)return[[e,m],[k,n]];e=+c[0][0];k=+c[1][0];m=+c[0][1];n=+c[1][1];
e>k&&(c=e,e=k,k=c);m>n&&(c=m,m=n,n=c);return a.precision(J)};a.minorExtent=function(c){if(!arguments.length)return[[d,h],[b,f]];d=+c[0][0];b=+c[1][0];h=+c[0][1];f=+c[1][1];d>b&&(c=d,d=b,b=c);h>f&&(c=h,h=f,f=c);return a.precision(J)};a.step=function(c){return arguments.length?a.majorStep(c).minorStep(c):a.minorStep()};a.majorStep=function(c){if(!arguments.length)return[t,u];t=+c[0];u=+c[1];return a};a.minorStep=function(c){if(!arguments.length)return[q,p];q=+c[0];p=+c[1];return a};a.precision=function(c){if(!arguments.length)return J;
J=+c;C=Nd(h,f,90);w=Od(d,b,J);O=Nd(m,n,90);y=Od(e,k,J);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};l.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||c.apply(this,arguments),k||d.apply(this,arguments)]}}var c=sc,b,d=tc,k;a.distance=function(){return l.geo.distance(b||c.apply(this,arguments),k||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return c;c=d;b="function"===typeof d?
null:d;return a};a.target=function(c){if(!arguments.length)return d;d=c;k="function"===typeof c?null:c;return a};a.precision=function(){return arguments.length?a:0};return a};l.geo.interpolate=function(a,c){return Cf(a[0]*K,a[1]*K,c[0]*K,c[1]*K)};l.geo.length=function(a){Mb=0;l.geo.stream(a,Ra);return Mb};var Mb,Ra={sphere:Z,point:Z,lineStart:function(){function a(a,e){var f=Math.sin(e*=K),h=Math.cos(e),l=Math.abs((a*=K)-c),n=Math.cos(l);Mb+=Math.atan2(Math.sqrt((l=h*Math.sin(l))*l+(l=d*f-b*h*n)*
l),b*f+d*h*n);c=a;b=f;d=h}var c,b,d;Ra.point=function(k,e){c=k*K;b=Math.sin(e*=K);d=Math.cos(e);Ra.point=a};Ra.lineEnd=function(){Ra.point=Ra.lineEnd=Z}},lineEnd:Z,polygonStart:Z,polygonEnd:Z};(l.geo.conicEqualArea=function(){return uc(Pd)}).raw=Pd;l.geo.albers=function(){return l.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};l.geo.albersUsa=function(){function a(a){var c=a[0];a=a[1];k=null;(f(c,a),k)||(h(c,a),k)||n(c,a);return k}var c=l.geo.albers(),b=
l.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=l.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k,e={point:function(a,c){k=[a,c]}},f,h,n;a.invert=function(a){var k=c.scale(),e=c.translate(),f=(a[0]-e[0])/k,k=(a[1]-e[1])/k;return(.12<=k&&.234>k&&-.425<=f&&-.214>f?b:.166<=k&&.234>k&&-.214<=f&&-.115>f?d:c).invert(a)};a.stream=function(a){var k=c.stream(a),e=b.stream(a),f=d.stream(a);return{point:function(a,c){k.point(a,c);e.point(a,c);f.point(a,
c)},sphere:function(){k.sphere();e.sphere();f.sphere()},lineStart:function(){k.lineStart();e.lineStart();f.lineStart()},lineEnd:function(){k.lineEnd();e.lineEnd();f.lineEnd()},polygonStart:function(){k.polygonStart();e.polygonStart();f.polygonStart()},polygonEnd:function(){k.polygonEnd();e.polygonEnd();f.polygonEnd()}}};a.precision=function(k){if(!arguments.length)return c.precision();c.precision(k);b.precision(k);d.precision(k);return a};a.scale=function(k){if(!arguments.length)return c.scale();
c.scale(k);b.scale(.35*k);d.scale(k);return a.translate(c.translate())};a.translate=function(k){if(!arguments.length)return c.translate();var l=c.scale(),m=+k[0],q=+k[1];f=c.translate(k).clipExtent([[m-.455*l,q-.238*l],[m+.455*l,q+.238*l]]).stream(e).point;h=b.translate([m-.307*l,q+.201*l]).clipExtent([[m-.425*l+1E-6,q+.12*l+1E-6],[m-.214*l-1E-6,q+.234*l-1E-6]]).stream(e).point;n=d.translate([m-.205*l,q+.212*l]).clipExtent([[m-.214*l+1E-6,q+.166*l+1E-6],[m-.115*l-1E-6,q+.234*l-1E-6]]).stream(e).point;
return a};return a.scale(1070)};var Nb,sb,Ba={point:Z,lineStart:Z,lineEnd:Z,polygonStart:function(){sb=0;Ba.lineStart=Df},polygonEnd:function(){Ba.lineStart=Ba.lineEnd=Ba.point=Z;Nb+=Math.abs(sb/2)}},Ob,Pb,Qb,Rb,Qg={point:function(a,c){a<Ob&&(Ob=a);a>Qb&&(Qb=a);c<Pb&&(Pb=c);c>Rb&&(Rb=c)},lineStart:Z,lineEnd:Z,polygonStart:Z,polygonEnd:Z},qa={point:vc,lineStart:Rd,lineEnd:Sd,polygonStart:function(){qa.lineStart=Ff},polygonEnd:function(){qa.point=vc;qa.lineStart=Rd;qa.lineEnd=Sd}};l.geo.path=function(){function a(a){a&&
l.geo.stream(a,k(e.pointRadius("function"===typeof c?+c.apply(this,arguments):c)));return e.result()}var c=4.5,b,d,k,e;a.area=function(a){Nb=0;l.geo.stream(a,k(Ba));return Nb};a.centroid=function(a){ca=X=Y=W=0;l.geo.stream(a,k(qa));return W?[X/W,Y/W]:void 0};a.bounds=function(a){Qb=Rb=-(Ob=Pb=Infinity);l.geo.stream(a,k(Qg));return[[Ob,Pb],[Qb,Rb]]};a.projection=function(c){if(!arguments.length)return b;k=(b=c)?c.stream||Hf(c):ka;return a};a.context=function(c){if(!arguments.length)return d;e=null==
(d=c)?new Ef:new Gf(c);return a};a.pointRadius=function(b){if(!arguments.length)return c;c="function"===typeof b?b:+b;return a};return a.projection(l.geo.albersUsa()).context(null)};var Ze=Xa(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(l.geo.azimuthalEqualArea=function(){return Aa(Ze)}).raw=Ze;var $e=Xa(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},ka);(l.geo.azimuthalEquidistant=function(){return Aa($e)}).raw=$e;(l.geo.conicConformal=function(){return uc(Td)}).raw=
Td;(l.geo.conicEquidistant=function(){return uc(Ud)}).raw=Ud;var af=Xa(function(a){return 1/a},Math.atan);(l.geo.gnomonic=function(){return Aa(af)}).raw=af;tb.invert=function(a,c){return[a,2*Math.atan(Math.exp(c))-F/2]};(l.geo.mercator=function(){return Vd(tb)}).raw=tb;var bf=Xa(function(){return 1},Math.asin);(l.geo.orthographic=function(){return Aa(bf)}).raw=bf;var cf=Xa(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(l.geo.stereographic=function(){return Aa(cf)}).raw=cf;wc.invert=
function(a,c){var b=Math.atan2(sf(a),Math.cos(c)),d=Math.sin(c),k;k=(Math.exp(a)+Math.exp(-a))/2;return[b,id(d/k)]};(l.geo.transverseMercator=function(){return Vd(wc)}).raw=wc;l.geom={};l.svg={};l.svg.line=function(){return Wd(ka)};var xc=l.map({linear:ma,"linear-closed":function(a){return ma(a)+"Z"},"step-before":yc,"step-after":zc,basis:Xd,"basis-open":function(a){if(4>a.length)return ma(a);for(var c=[],b=-1,d=a.length,k,e=[0],f=[0];3>++b;)k=a[b],e.push(k[0]),f.push(k[1]);c.push(sa(Oa,e)+","+sa(Oa,
f));for(--b;++b<d;)k=a[b],e.shift(),e.push(k[0]),f.shift(),f.push(k[1]),Ya(c,e,f);return c.join("")},"basis-closed":function(a){for(var c,b=-1,d=a.length,k=d+4,e,f=[],h=[];4>++b;)e=a[b%d],f.push(e[0]),h.push(e[1]);c=[sa(Oa,f),",",sa(Oa,h)];for(--b;++b<k;)e=a[b%d],f.shift(),f.push(e[0]),h.shift(),h.push(e[1]),Ya(c,f,h);return c.join("")},bundle:function(a,c){var b=a.length-1;if(b)for(var d=a[0][0],k=a[0][1],e=a[b][0]-d,f=a[b][1]-k,h=-1,l,n;++h<=b;)l=a[h],n=h/b,l[0]=c*l[0]+(1-c)*(d+n*e),l[1]=c*l[1]+
(1-c)*(k+n*f);return Xd(a)},cardinal:function(a,c){return 3>a.length?ma(a):a[0]+ub(a,Ac(a,c))},"cardinal-open":function(a,c){return 4>a.length?ma(a):a[1]+ub(a.slice(1,a.length-1),Ac(a,c))},"cardinal-closed":function(a,c){return 3>a.length?ma(a):a[0]+ub((a.push(a[0]),a),Ac([a[a.length-2]].concat(a,[a[1]]),c))},monotone:function(a){if(3>a.length)a=ma(a);else{var c=a[0],b=[],d,k,e,f;d=0;k=a.length-1;var h=[];e=a[1];for(f=h[0]=Bc(a[0],e);++d<k;)h[d]=(f+(f=Bc(e,e=a[d+1])))/2;h[d]=f;for(var l=-1,n=a.length-
1;++l<n;)d=Bc(a[l],a[l+1]),1E-6>Math.abs(d)?h[l]=h[l+1]=0:(k=h[l]/d,e=h[l+1]/d,f=k*k+e*e,9<f&&(f=3*d/Math.sqrt(f),h[l]=f*k,h[l+1]=f*e));for(l=-1;++l<=n;)f=(a[Math.min(n,l+1)][0]-a[Math.max(0,l-1)][0])/(6*(1+h[l]*h[l])),b.push([f||0,h[l]*f||0]);a=c+ub(a,b)}return a}});xc.forEach(function(a,c){c.key=a;c.closed=/-closed$/.test(a)});var Yd=[0,2/3,1/3,0],Zd=[0,1/3,2/3,0],Oa=[0,1/6,2/3,1/6];l.geom.hull=function(a){function c(a){if(3>a.length)return[];var c=R(b),e=R(d),f=a.length,h,l=f-1,n=[],m=[],q,p,C=
0,t,u,w,J;if(c===ra&&d===va)h=a;else for(p=0,h=[];p<f;++p)h.push([+c.call(this,q=a[p],p),+e.call(this,q,p)]);for(p=1;p<f;++p)if(h[p][1]<h[C][1]||h[p][1]==h[C][1]&&h[p][0]<h[C][0])C=p;for(p=0;p<f;++p)p!==C&&(e=h[p][1]-h[C][1],c=h[p][0]-h[C][0],n.push({angle:Math.atan2(e,c),index:p}));n.sort(function(a,c){return a.angle-c.angle});J=n[0].angle;w=n[0].index;u=0;for(p=1;p<l;++p){f=n[p].index;if(J==n[p].angle)if(c=h[w][0]-h[C][0],e=h[w][1]-h[C][1],q=h[f][0]-h[C][0],t=h[f][1]-h[C][1],c*c+e*e>=q*q+t*t){n[p].index=
-1;continue}else n[u].index=-1;J=n[p].angle;u=p;w=f}m.push(C);for(f=p=0;2>p;++f)-1<n[f].index&&(m.push(n[f].index),p++);for(p=m.length;f<l;++f)if(!(0>n[f].index)){for(;!If(m[p-2],m[p-1],n[f].index,h);)--p;m[p++]=n[f].index}h=[];for(p-=1;0<=p;--p)h.push(a[m[p]]);return h}var b=ra,d=va;if(arguments.length)return c(a);c.x=function(a){return arguments.length?(b=a,c):b};c.y=function(a){return arguments.length?(d=a,c):d};return c};l.geom.polygon=function(a){a.area=function(){for(var c=0,b=a.length,d=a[b-
1][1]*a[0][0]-a[b-1][0]*a[0][1];++c<b;)d+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return.5*d};a.centroid=function(c){var b=-1,d=a.length,e=0,f=0,h,l=a[d-1],n;for(arguments.length||(c=-1/(6*a.area()));++b<d;)h=l,l=a[b],n=h[0]*l[1]-l[0]*h[1],e+=(h[0]+l[0])*n,f+=(h[1]+l[1])*n;return[e*c,f*c]};a.clip=function(c){for(var b,d=-1,e=a.length,f,h,l=a[e-1],n,m,q;++d<e;){b=c.slice();c.length=0;n=a[d];m=b[(h=b.length)-1];for(f=-1;++f<h;)q=b[f],Cc(q,l,n)?(Cc(m,l,n)||c.push($d(m,q,l,n)),c.push(q)):Cc(m,l,n)&&c.push($d(m,
q,l,n)),m=q;l=n}return c};return a};l.geom.delaunay=function(a){var c=a.map(function(){return[]}),b=[];Dc(a,function(b){c[b.region.l.index].push(a[b.region.r.index])});c.forEach(function(c,d){var e=a[d],f=e[0],h=e[1];c.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-h)});c.sort(function(a,c){return a.angle-c.angle});for(var l=0,n=c.length-1;l<n;l++)b.push([e,c[l],c[l+1]])});return b};l.geom.voronoi=function(a){function c(a){var c,b=a.map(function(){return[]}),g=R(d),h=R(e),n,m,q=a.length;if(g===
ra&&h===va)c=a;else for(c=[],m=0;m<q;++m)c.push([+g.call(this,n=a[m],m),+h.call(this,n,m)]);Dc(c,function(a){var c,d,g,e;1===a.a&&0<=a.b?(c=a.ep.r,d=a.ep.l):(c=a.ep.l,d=a.ep.r);1===a.a?(g=c?c.y:-1E6,c=a.c-a.b*g,e=d?d.y:1E6,d=a.c-a.b*e):(c=c?c.x:-1E6,g=a.c-a.a*c,d=d?d.x:1E6,e=a.c-a.a*d);c=[c,g];d=[d,e];b[a.region.l.index].push(c,d);b[a.region.r.index].push(c,d)});b=b.map(function(a,b){var d=c[b][0],g=c[b][1],e=a.map(function(a){return Math.atan2(a[0]-d,a[1]-g)}),k=l.range(a.length).sort(function(a,
c){return e[a]-e[c]});return k.filter(function(a,c){return!c||1E-6<e[a]-e[k[c-1]]}).map(function(c){return a[c]})});b.forEach(function(a,b){var d=a.length;if(!d)return a.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,-1E6]);if(!(2<d)){var g=c[b],e=a[0],k=a[1],d=g[0],g=g[1],f=e[0],e=e[1],h=k[0],l=k[1],n=Math.abs(h-f),k=l-e;1E-6>Math.abs(k)?(d=g<e?-1E6:1E6,a.push([-1E6,d],[1E6,d])):1E-6>n?(d=d<f?-1E6:1E6,a.push([d,-1E6],[d,1E6])):(d=(h-f)*(e-g)<(f-d)*(l-e)?1E6:-1E6,g=Math.abs(k)-n,1E-6>Math.abs(g)?a.push([0>
k?d:-d,d]):(0<g&&(d*=-1),a.push([-1E6,d],[1E6,d])))}});if(f)for(m=0;m<q;++m)f(b[m]);for(m=0;m<q;++m)b[m].point=a[m];return b}var b=null,d=ra,e=va,f;if(arguments.length)return c(a);c.x=function(a){return arguments.length?(d=a,c):d};c.y=function(a){return arguments.length?(e=a,c):e};c.size=function(a){if(!arguments.length)return b;null==a?f=null:(b=[+a[0],+a[1]],f=l.geom.polygon([[0,0],[0,b[1]],b,[b[0],0]]).clip);return c};c.links=function(a){var c,b=a.map(function(){return[]}),g=[],f=R(d),h=R(e),l,
n,r=a.length;if(f===ra&&h===va)c=a;else for(n=0;n<r;++n)c.push([+f.call(this,l=a[n],n),+h.call(this,l,n)]);Dc(c,function(c){var d=c.region.l.index;c=c.region.r.index;b[d][c]||(b[d][c]=b[c][d]=!0,g.push({source:a[d],target:a[c]}))});return g};c.triangles=function(a){if(d===ra&&e===va)return l.geom.delaunay(a);var c,b,g=R(d),f=R(e),h,n,r;n=0;c=[];for(r=a.length;n<r;++n)b=[+g.call(this,h=a[n],n),+f.call(this,h,n)],b.data=h,c.push(b);return l.geom.delaunay(c).map(function(a){return a.map(function(a){return a.data})})};
return c};var Ec={l:"r",r:"l"};l.geom.quadtree=function(a,c,b,d,e){function f(a){function r(a,c,b,d,g,e,k,f){if(!isNaN(b)&&!isNaN(d))if(a.leaf){var h=a.x,l=a.y;if(null!=h){if(!(.01>Math.abs(h-b)+Math.abs(l-d))){var n=a.point;a.x=a.y=a.point=null;m(a,n,h,l,g,e,k,f)}m(a,c,b,d,g,e,k,f)}else a.x=b,a.y=d,a.point=c}else m(a,c,b,d,g,e,k,f)}function m(a,c,b,d,g,e,k,f){var h=.5*(g+k),l=.5*(e+f),n=b>=h,s=d>=l,x=(s<<1)+n;a.leaf=!1;a=a.nodes[x]||(a.nodes[x]=ae());n?g=h:k=h;s?e=l:f=l;r(a,c,b,d,g,e,k,f)}var q,
p=R(h),t=R(l),u,w,y,J,H,A,z,T;if(null!=c)H=c,A=b,z=d,T=e;else if(z=T=-(H=A=Infinity),u=[],w=[],J=a.length,n)for(y=0;y<J;++y)q=a[y],q.x<H&&(H=q.x),q.y<A&&(A=q.y),q.x>z&&(z=q.x),q.y>T&&(T=q.y),u.push(q.x),w.push(q.y);else for(y=0;y<J;++y){var B=+p(q=a[y],y);q=+t(q,y);B<H&&(H=B);q<A&&(A=q);B>z&&(z=B);q>T&&(T=q);u.push(B);w.push(q)}B=z-H;q=T-A;B>q?T=A+B:z=H+q;var E=ae();E.add=function(a){r(E,a,+p(a,++y),+t(a,y),H,A,z,T)};E.visit=function(a){Za(a,E,H,A,z,T)};y=-1;if(null==c){for(;++y<J;)r(E,a[y],u[y],
w[y],H,A,z,T);--y}else a.forEach(E.add);u=w=a=q=null;return E}var h=ra,l=va,n;if(n=arguments.length)return h=Jf,l=Kf,3===n&&(e=b,d=c,b=c=0),f(a);f.x=function(a){return arguments.length?(h=a,f):h};f.y=function(a){return arguments.length?(l=a,f):l};f.size=function(a){if(!arguments.length)return null==c?null:[d,e];null==a?c=b=d=e=null:(c=b=0,d=+a[0],e=+a[1]);return f};return f};l.interpolateRgb=Fc;l.transform=function(a){var c=ea.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(a){if(null!=
a){c.setAttribute("transform",a);var b=c.transform.baseVal.consolidate()}return new be(b?b.matrix:Rg)})(a)};be.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Rg={a:1,b:0,c:0,d:1,e:0,f:0};l.interpolateNumber=wa;l.interpolateTransform=vb;l.interpolateObject=de;l.interpolateString=ee;var wb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;l.interpolate=Ga;l.interpolators=[function(a,c){var b=typeof c;return("string"===
b?gb.has(c)||/^(#|rgb\(|hsl\()/.test(c)?Fc:ee:c instanceof $?Fc:"object"===b?Array.isArray(c)?fe:de:wa)(a,c)}];l.interpolateArray=fe;var df=function(){return ka},Sg=l.map({linear:df,poly:function(a){return function(c){return Math.pow(c,a)}},quad:function(){return Mf},cubic:function(){return Nf},sin:function(){return Of},exp:function(){return Pf},circle:function(){return Qf},elastic:function(a,c){var b;2>arguments.length&&(c=.45);arguments.length?b=c/(2*F)*Math.asin(1/a):(a=1,b=c/4);return function(d){return 1+
a*Math.pow(2,10*-d)*Math.sin(2*(d-b)*F/c)}},back:function(a){a||(a=1.70158);return function(c){return c*c*((a+1)*c-a)}},bounce:function(){return Rf}}),Tg=l.map({"in":ka,out:ge,"in-out":he,"out-in":function(a){return he(ge(a))}});l.ease=function(a){var c=a.indexOf("-"),b=0<=c?a.substring(0,c):a,c=0<=c?a.substring(c+1):"in",b=Sg.get(b)||df,c=Tg.get(c)||ka;return Lf(c(b.apply(null,Array.prototype.slice.call(arguments,1))))};l.interpolateHcl=function(a,c){a=l.hcl(a);c=l.hcl(c);var b=a.h,d=a.c,e=a.l,f=
c.h-b,h=c.c-d,n=c.l-e;isNaN(h)&&(h=0,d=isNaN(d)?c.c:d);isNaN(f)?(f=0,b=isNaN(b)?c.h:b):180<f?f-=360:-180>f&&(f+=360);return function(a){return $b(b+f*a,d+h*a,e+n*a)+""}};l.interpolateHsl=function(a,c){a=l.hsl(a);c=l.hsl(c);var b=a.h,d=a.s,e=a.l,f=c.h-b,h=c.s-d,n=c.l-e;isNaN(h)&&(h=0,d=isNaN(d)?c.s:d);isNaN(f)?(f=0,b=isNaN(b)?c.h:b):180<f?f-=360:-180>f&&(f+=360);return function(a){return db(b+f*a,d+h*a,e+n*a)+""}};l.interpolateLab=function(a,c){a=l.lab(a);c=l.lab(c);var b=a.l,d=a.a,e=a.b,f=c.l-b,h=
c.a-d,n=c.b-e;return function(a){return kd(b+f*a,d+h*a,e+n*a)+""}};l.interpolateRound=ie;l.layout={};l.layout.bundle=function(){return function(a){for(var c=[],b=-1,d=a.length;++b<d;)c.push(Uf(a[b]));return c}};l.layout.chord=function(){function a(){var a={},b=[],g=l.range(h),t=[],u,w,y,J,H;d=[];e=[];u=0;for(J=-1;++J<h;){w=0;for(H=-1;++H<h;)w+=f[J][H];b.push(w);t.push(l.range(h));u+=w}m&&g.sort(function(a,c){return m(b[a],b[c])});q&&t.forEach(function(a,c){a.sort(function(a,b){return q(f[c][a],f[c][b])})});
u=(2*F-n*h)/u;w=0;for(J=-1;++J<h;){y=w;for(H=-1;++H<h;){var A=g[J],z=t[A][H],T=f[A][z],B=w,E=w+=T*u;a[A+"-"+z]={index:A,subindex:z,startAngle:B,endAngle:E,value:T}}e[A]={index:A,startAngle:y,endAngle:w,value:(w-y)/u};w+=n}for(J=-1;++J<h;)for(H=J-1;++H<h;)g=a[J+"-"+H],t=a[H+"-"+J],(g.value||t.value)&&d.push(g.value<t.value?{source:t,target:g}:{source:g,target:t});p&&c()}function c(){d.sort(function(a,c){return p((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var b={},d,e,f,
h,n=0,m,q,p;b.matrix=function(a){if(!arguments.length)return f;h=(f=a)&&f.length;d=e=null;return b};b.padding=function(a){if(!arguments.length)return n;n=a;d=e=null;return b};b.sortGroups=function(a){if(!arguments.length)return m;m=a;d=e=null;return b};b.sortSubgroups=function(a){if(!arguments.length)return q;q=a;d=null;return b};b.sortChords=function(a){if(!arguments.length)return p;p=a;d&&c();return b};b.chords=function(){d||a();return d};b.groups=function(){e||a();return e};return b};l.layout.force=
function(){function a(a){return function(c,b,d,g){if(c.point!==a){d=c.cx-a.x;var e=c.cy-a.y,k=1/Math.sqrt(d*d+e*e);if((g-b)*k<u)return b=c.charge*k*k,a.px-=d*b,a.py-=e*b,!0;c.point&&isFinite(k)&&(b=c.pointCharge*k*k,a.px-=d*b,a.py-=e*b)}return!c.charge}}function c(a){a.px=l.event.x;a.py=l.event.y;b.resume()}var b={},d=l.dispatch("start","tick","end"),e=[1,1],f,h,n=.9,m=Ug,q=Vg,p=-30,t=.1,u=.8,w=[],C=[],y,A,z;b.tick=function(){if(.005>(h*=.99))return d.end({type:"end",alpha:h=0}),!0;var c=w.length,
b=C.length,g,f,m,r,q,u,D;for(f=0;f<b;++f)if(m=C[f],r=m.source,q=m.target,g=q.x-r.x,D=q.y-r.y,u=g*g+D*D)u=h*A[f]*((u=Math.sqrt(u))-y[f])/u,g*=u,D*=u,q.x-=g*(u=r.weight/(q.weight+r.weight)),q.y-=D*u,r.x+=g*(u=1-u),r.y+=D*u;b=e[0]/e[1];if(u=h*t)if(g=e[0]/2,D=e[1]/2,f=-1,u)for(;++f<c;)m=w[f],m.x+=(g-m.x)*u,m.y+=(D-m.y)*u*b;if(p)for(ke(g=l.geom.quadtree(w),h,z),f=-1;++f<c;)(m=w[f]).fixed||g.visit(a(m));for(f=-1;++f<c;)m=w[f],m.fixed?(m.x=m.px,m.y=m.py):(m.x-=(m.px-(m.px=m.x))*n,m.y-=(m.py-(m.py=m.y))*
n);d.tick({type:"tick",alpha:h})};b.nodes=function(a){if(!arguments.length)return w;w=a;return b};b.links=function(a){if(!arguments.length)return C;C=a;return b};b.size=function(a){if(!arguments.length)return e;e=a;return b};b.linkDistance=function(a){if(!arguments.length)return m;m="function"===typeof a?a:+a;return b};b.distance=b.linkDistance;b.linkStrength=function(a){if(!arguments.length)return q;q="function"===typeof a?a:+a;return b};b.friction=function(a){if(!arguments.length)return n;n=+a;
return b};b.charge=function(a){if(!arguments.length)return p;p="function"===typeof a?a:+a;return b};b.gravity=function(a){if(!arguments.length)return t;t=+a;return b};b.theta=function(a){if(!arguments.length)return u;u=+a;return b};b.alpha=function(a){if(!arguments.length)return h;a=+a;h?h=0<a?a:0:0<a&&(d.start({type:"start",alpha:h=a}),l.timer(b.tick));return b};b.start=function(){function a(b,g){var e;if(!s){s=[];for(d=0;d<f;++d)s[d]=[];for(d=0;d<h;++d)e=C[d],s[e.source.index].push(e.target),s[e.target.index].push(e.source)}e=
s[c];for(var k=-1,l=e.length,n;++k<l;)if(!isNaN(n=e[k][b]))return n;return Math.random()*g}var c,d,f=w.length,h=C.length,l=e[0],n=e[1],s,r;for(c=0;c<f;++c)(r=w[c]).index=c,r.weight=0;for(c=0;c<h;++c)r=C[c],"number"==typeof r.source&&(r.source=w[r.source]),"number"==typeof r.target&&(r.target=w[r.target]),++r.source.weight,++r.target.weight;for(c=0;c<f;++c)r=w[c],isNaN(r.x)&&(r.x=a("x",l)),isNaN(r.y)&&(r.y=a("y",n)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);y=[];if("function"===typeof m)for(c=
0;c<h;++c)y[c]=+m.call(this,C[c],c);else for(c=0;c<h;++c)y[c]=m;A=[];if("function"===typeof q)for(c=0;c<h;++c)A[c]=+q.call(this,C[c],c);else for(c=0;c<h;++c)A[c]=q;z=[];if("function"===typeof p)for(c=0;c<f;++c)z[c]=+p.call(this,w[c],c);else for(c=0;c<f;++c)z[c]=p;return b.resume()};b.resume=function(){return b.alpha(.1)};b.stop=function(){return b.alpha(0)};b.drag=function(){f||(f=l.behavior.drag().origin(ka).on("dragstart.force",Vf).on("drag.force",c).on("dragend.force",Wf));if(!arguments.length)return f;
this.on("mouseover.force",Xf).on("mouseout.force",Yf).call(f)};return l.rebind(b,d,"on")};var Ug=20,Vg=1;l.layout.hierarchy=function(){function a(c,h,l){var n=e.call(b,c,h);c.depth=h;l.push(c);if(n&&(q=n.length)){var m=-1,q,p=c.children=[],u=0;h+=1;for(var t;++m<q;)t=a(n[m],h,l),t.parent=c,p.push(t),u+=t.value;d&&p.sort(d);f&&(c.value=u)}else f&&(c.value=+f.call(b,c,h)||0);return c}function c(a,d){var e=a.children,k=0;if(e&&(l=e.length))for(var h=-1,l,n=d+1;++h<l;)k+=c(e[h],n);else f&&(k=+f.call(b,
a,d)||0);f&&(a.value=k);return k}function b(c){var d=[];a(c,0,d);return d}var d=bg,e=$f,f=ag;b.sort=function(a){if(!arguments.length)return d;d=a;return b};b.children=function(a){if(!arguments.length)return e;e=a;return b};b.value=function(a){if(!arguments.length)return f;f=a;return b};b.revalue=function(a){c(a,0);return a};return b};l.layout.partition=function(){function a(c,b,d,g){var e=c.children;c.x=b;c.y=c.depth*g;c.dx=d;c.dy=g;if(e&&(f=e.length)){var k=-1,f,h;for(d=c.value?d/c.value:0;++k<f;)a(h=
e[k],b,c=h.value*d,g),b+=c}}function c(a){a=a.children;var b=0;if(a&&(g=a.length))for(var d=-1,g;++d<g;)b=Math.max(b,c(a[d]));return 1+b}function b(g,f){var h=d.call(this,g,f);a(h[0],0,e[0],e[1]/c(h[0]));return h}var d=l.layout.hierarchy(),e=[1,1];b.size=function(a){if(!arguments.length)return e;e=a;return b};return $a(b,d)};l.layout.pie=function(){function a(f){var h=f.map(function(b,d){return+c.call(a,b,d)}),n=+("function"===typeof d?d.apply(this,arguments):d),m=(("function"===typeof e?e.apply(this,
arguments):e)-n)/l.sum(h),q=l.range(f.length);null!=b&&q.sort(b===ef?function(a,c){return h[c]-h[a]}:function(a,c){return b(f[a],f[c])});var p=[];q.forEach(function(a){var c;p[a]={data:f[a],value:c=h[a],startAngle:n,endAngle:n+=c*m}});return p}var c=Number,b=ef,d=0,e=2*F;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.sort=function(c){if(!arguments.length)return b;b=c;return a};a.startAngle=function(c){if(!arguments.length)return d;d=c;return a};a.endAngle=function(c){if(!arguments.length)return e;
e=c;return a};return a};var ef={};l.layout.stack=function(){function a(n,m){var q=n.map(function(b,d){return c.call(a,b,d)}),p=q.map(function(c){return c.map(function(c,b){return[f.call(a,c,b),h.call(a,c,b)]})}),u=b.call(a,p,m),q=l.permute(q,u),p=l.permute(p,u),u=d.call(a,p,m),t=q.length,w=q[0].length,C,y,A;for(y=0;y<w;++y)for(e.call(a,q[0][y],A=u[y],p[0][y][1]),C=1;C<t;++C)e.call(a,q[C][y],A+=p[C-1][y][1],p[C][y][1]);return n}var c=ka,b=Gc,d=Hc,e=eg,f=cg,h=dg;a.values=function(b){if(!arguments.length)return c;
c=b;return a};a.order=function(c){if(!arguments.length)return b;b="function"===typeof c?c:Wg.get(c)||Gc;return a};a.offset=function(c){if(!arguments.length)return d;d="function"===typeof c?c:Xg.get(c)||Hc;return a};a.x=function(c){if(!arguments.length)return f;f=c;return a};a.y=function(c){if(!arguments.length)return h;h=c;return a};a.out=function(c){if(!arguments.length)return e;e=c;return a};return a};var Wg=l.map({"inside-out":function(a){var c=a.length,b,d=a.map(fg),e=a.map(gg),f=l.range(c).sort(function(a,
c){return d[a]-d[c]}),h=0,n=0,m=[],q=[];for(a=0;a<c;++a)b=f[a],h<n?(h+=e[b],m.push(b)):(n+=e[b],q.push(b));return q.reverse().concat(m)},reverse:function(a){return l.range(a.length).reverse()},"default":Gc}),Xg=l.map({silhouette:function(a){var c=a.length,b=a[0].length,d=[],e=0,f,h,l,n=[];for(h=0;h<b;++h){for(l=f=0;f<c;f++)l+=a[f][h][1];l>e&&(e=l);d.push(l)}for(h=0;h<b;++h)n[h]=(e-d[h])/2;return n},wiggle:function(a){var c=a.length,b=a[0],d=b.length,e,f,h,l,n,m,q,p,u,t=[];t[0]=p=u=0;for(f=1;f<d;++f){for(l=
e=0;e<c;++e)l+=a[e][f][1];n=e=0;for(q=b[f][0]-b[f-1][0];e<c;++e){h=0;for(m=(a[e][f][1]-a[e][f-1][1])/(2*q);h<e;++h)m+=(a[h][f][1]-a[h][f-1][1])/q;n+=m*a[e][f][1]}t[f]=p-=l?n/l*q:0;p<u&&(u=p)}for(f=0;f<d;++f)t[f]-=u;return t},expand:function(a){var c=a.length,b=a[0].length,d=1/c,e,f,h,l=[];for(f=0;f<b;++f){for(h=e=0;e<c;e++)h+=a[e][f][1];if(h)for(e=0;e<c;e++)a[e][f][1]/=h;else for(e=0;e<c;e++)a[e][f][1]=d}for(f=0;f<b;++f)l[f]=0;return l},zero:Hc});l.layout.histogram=function(){function a(a,f){var h=
[],n=a.map(b,this),m=d.call(this,n,f),q=e.call(this,m,n,f),p;f=-1;for(var u=n.length,t=q.length-1,C=c?1:1/u;++f<t;)p=h[f]=[],p.dx=q[f+1]-(p.x=q[f]),p.y=0;if(0<t)for(f=-1;++f<u;)p=n[f],p>=m[0]&&p<=m[1]&&(p=h[l.bisect(q,p,1,t)-1],p.y+=C,p.push(a[f]));return h}var c=!0,b=Number,d=jg,e=ig;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.range=function(c){if(!arguments.length)return d;d=R(c);return a};a.bins=function(c){if(!arguments.length)return e;e="number"===typeof c?function(a){return le(a,
c)}:R(c);return a};a.frequency=function(b){if(!arguments.length)return c;c=!!b;return a};return a};l.layout.tree=function(){function a(a,e){function f(a,c){var d=a.children,e=a._tree;if(d&&(k=d.length)){for(var k,h=d[0],l,n=h,m,q=-1;++q<k;){m=d[q];f(m,l);var s=m;if(l){for(var p=s,r=s,v=s.parent.children[0],u=p._tree.mod,t=r._tree.mod,w=l._tree.mod,C=v._tree.mod,y=void 0;l=Jc(l),p=Ic(p),l&&p;){v=Ic(v);r=Jc(r);r._tree.ancestor=s;y=l._tree.prelim+w-p._tree.prelim-u+b(l,p);if(0<y){var A=l._tree.ancestor.parent==
s.parent?l._tree.ancestor:n,D=s,z=y,A=A._tree,D=D._tree,B=z/(D.number-A.number);A.change+=B;D.change-=B;D.shift+=z;D.prelim+=z;D.mod+=z;u+=y;t+=y}w+=l._tree.mod;u+=p._tree.mod;C+=v._tree.mod;t+=r._tree.mod}l&&!Jc(r)&&(r._tree.thread=l,r._tree.mod+=w-t);p&&!Ic(v)&&(v._tree.thread=p,v._tree.mod+=u-C,n=s)}l=m}k=d=0;q=a.children;for(s=q.length;0<=--s;)n=q[s]._tree,n.prelim+=d,n.mod+=d,d+=n.shift+(k+=n.change);h=.5*(h._tree.prelim+m._tree.prelim);c?(e.prelim=c._tree.prelim+b(a,c),e.mod=e.prelim-h):e.prelim=
h}else c&&(e.prelim=c._tree.prelim+b(a,c))}function h(a,c){a.x=a._tree.prelim+c;var b=a.children;if(b&&(g=b.length)){var d=-1,g;for(c+=a._tree.mod;++d<g;)h(b[d],c)}}var l=c.call(this,a,e),n=l[0];xa(n,function(a,c){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:c?c._tree.number+1:0}});f(n);h(n,-n._tree.prelim);var m=xb(n,lg),q=xb(n,kg),p=xb(n,mg),u=m.x-b(m,q)/2,t=q.x+b(q,m)/2,w=p.depth||1;xa(n,function(a){a.x=(a.x-u)/(t-u)*d[0];a.y=a.depth/w*d[1];delete a._tree});return l}var c=l.layout.hierarchy().sort(null).value(null),
b=me,d=[1,1];a.separation=function(c){if(!arguments.length)return b;b=c;return a};a.size=function(c){if(!arguments.length)return d;d=c;return a};return $a(a,c)};l.layout.pack=function(){function a(a,e){var f=c.call(this,a,e),h=f[0];h.x=0;h.y=0;xa(h,function(a){a.r=Math.sqrt(a.value)});xa(h,pe);var l=d[0],n=d[1],m=Math.max(2*h.r/l,2*h.r/n);if(0<b){var q=b*m/2;xa(h,function(a){a.r+=q});xa(h,pe);xa(h,function(a){a.r-=q});m=Math.max(2*h.r/l,2*h.r/n)}re(h,l/2,n/2,1/m);return f}var c=l.layout.hierarchy().sort(ng),
b=0,d=[1,1];a.size=function(c){if(!arguments.length)return d;d=c;return a};a.padding=function(c){if(!arguments.length)return b;b=+c;return a};return $a(a,c)};l.layout.cluster=function(){function a(a,e){var f=c.call(this,a,e),h=f[0],l,n=0;xa(h,function(a){var c=a.children;c&&c.length?(a.x=rg(c),a.y=qg(c)):(a.x=l?n+=b(a,l):0,a.y=0,l=a)});var m=se(h),q=te(h),p=m.x-b(m,q)/2,u=q.x+b(q,m)/2;xa(h,function(a){a.x=(a.x-p)/(u-p)*d[0];a.y=(1-(h.y?a.y/h.y:1))*d[1]});return f}var c=l.layout.hierarchy().sort(null).value(null),
b=me,d=[1,1];a.separation=function(c){if(!arguments.length)return b;b=c;return a};a.size=function(c){if(!arguments.length)return d;d=c;return a};return $a(a,c)};l.layout.treemap=function(){function a(a,c){for(var b=-1,d=a.length,e,g;++b<d;)g=(e=a[b]).value*(0>c?0:c),e.area=isNaN(g)||0>=g?0:g}function c(b){var e=b.children;if(e&&e.length){var g=q(b),f=[],k=e.slice(),h=Infinity,l,n="slice"===t?g.dx:"dice"===t?g.dy:"slice-dice"===t?b.depth&1?g.dy:g.dx:Math.min(g.dx,g.dy);a(k,g.dx*g.dy/b.value);for(f.area=
0;0<(b=k.length);){f.push(b=k[b-1]);f.area+=b.area;if(!(b="squarify"!==t)){l=n;b=f.area;for(var m=void 0,p=0,r=Infinity,s=-1,x=f.length;++s<x;)if(m=f[s].area)m<r&&(r=m),m>p&&(p=m);b*=b;l*=l;b=(l=b?Math.max(l*p*w/b,b/(l*r*w)):Infinity)<=h}b?(k.pop(),h=l):(f.area-=f.pop().area,d(f,n,g,!1),n=Math.min(g.dx,g.dy),f.length=f.area=0,h=Infinity)}f.length&&(d(f,n,g,!0),f.length=f.area=0);e.forEach(c)}}function b(c){var e=c.children;if(e&&e.length){var f=q(c),k=e.slice(),h=[];a(k,f.dx*f.dy/c.value);for(h.area=
0;c=k.pop();)h.push(c),h.area+=c.area,null!=c.z&&(d(h,c.z?f.dx:f.dy,f,!k.length),h.length=h.area=0);e.forEach(b)}}function d(a,c,b,g){var e=-1,f=a.length,k=b.x,l=b.y,n=c?h(a.area/c):0,m;if(c==b.dx){if(g||n>b.dy)n=b.dy;for(;++e<f;)m=a[e],m.x=k,m.y=l,m.dy=n,k+=m.dx=Math.min(b.x+b.dx-k,n?h(m.area/n):0);m.z=!0;m.dx+=b.x+b.dx-k;b.y+=n;b.dy-=n}else{if(g||n>b.dx)n=b.dx;for(;++e<f;)m=a[e],m.x=k,m.y=l,m.dx=n,l+=m.dy=Math.min(b.y+b.dy-l,n?h(m.area/n):0);m.z=!1;m.dy+=b.y+b.dy-l;b.x+=n;b.dx-=n}}function e(d){d=
u||f(d);var k=d[0];k.x=0;k.y=0;k.dx=n[0];k.dy=n[1];u&&f.revalue(k);a([k],k.dx*k.dy/k.value);(u?b:c)(k);p&&(u=d);return d}var f=l.layout.hierarchy(),h=Math.round,n=[1,1],m=null,q=Lc,p=!1,u,t="squarify",w=.5*(1+Math.sqrt(5));e.size=function(a){if(!arguments.length)return n;n=a;return e};e.padding=function(a){function c(b){var d=a.call(e,b,b.depth);return null==d?Lc(b):ue(b,"number"===typeof d?[d,d,d,d]:d)}function b(c){return ue(c,a)}if(!arguments.length)return m;var d;q=null==(m=a)?Lc:"function"===
(d=typeof a)?c:"number"===d?(a=[a,a,a,a],b):b;return e};e.round=function(a){if(!arguments.length)return h!=Number;h=a?Math.round:Number;return e};e.sticky=function(a){if(!arguments.length)return p;p=a;u=null;return e};e.ratio=function(a){if(!arguments.length)return w;w=a;return e};e.mode=function(a){if(!arguments.length)return t;t=a+"";return e};return $a(e,f)};l.random={normal:function(a,c){var b=arguments.length;2>b&&(c=1);1>b&&(a=0);return function(){var b,d;do b=2*Math.random()-1,d=2*Math.random()-
1,d=b*b+d*d;while(!d||1<d);return a+c*b*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(){var a=l.random.normal.apply(l,arguments);return function(){return Math.exp(a())}},irwinHall:function(a){return function(){for(var c=0,b=0;b<a;b++)c+=Math.random();return c/a}}};l.scale={};l.scale.linear=function(){return ve([0,1],[0,1],Ga,!1)};l.scale.log=function(){return ye(l.scale.linear().domain([0,Math.LN10]),10,Oc,ze,[1,10])};var vg=l.format(".0e");l.scale.pow=function(){return Ae(l.scale.linear(),1,[0,
1])};l.scale.sqrt=function(){return l.scale.pow().exponent(.5)};l.scale.ordinal=function(){return Be([],{t:"range",a:[[]]})};l.scale.category10=function(){return l.scale.ordinal().range(Yg)};l.scale.category20=function(){return l.scale.ordinal().range(Zg)};l.scale.category20b=function(){return l.scale.ordinal().range($g)};l.scale.category20c=function(){return l.scale.ordinal().range(ah)};var Yg="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),Zg="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),
$g="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),ah="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");l.scale.quantile=function(){return Ce([],[])};l.scale.quantize=function(){return De(0,1,[0,1])};l.scale.threshold=function(){return Ee([.5],[0,1])};l.scale.identity=
function(){return Fe([0,1])};l.svg.arc=function(){function a(){var a=c.apply(this,arguments),f=b.apply(this,arguments),h=d.apply(this,arguments)+Ha,l=e.apply(this,arguments)+Ha,n=(l<h&&(n=h,h=l,l=n),l-h),m=n<F?"0":"1",q=Math.cos(h),h=Math.sin(h),p=Math.cos(l),l=Math.sin(l);return n>=bh?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*q+","+f*h+"A"+
f+","+f+" 0 "+m+",1 "+f*p+","+f*l+"L"+a*p+","+a*l+"A"+a+","+a+" 0 "+m+",0 "+a*q+","+a*h+"Z":"M"+f*q+","+f*h+"A"+f+","+f+" 0 "+m+",1 "+f*p+","+f*l+"L0,0Z"}var c=wg,b=xg,d=Ge,e=He;a.innerRadius=function(b){if(!arguments.length)return c;c=R(b);return a};a.outerRadius=function(c){if(!arguments.length)return b;b=R(c);return a};a.startAngle=function(c){if(!arguments.length)return d;d=R(c);return a};a.endAngle=function(c){if(!arguments.length)return e;e=R(c);return a};a.centroid=function(){var a=(c.apply(this,
arguments)+b.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+Ha;return[Math.cos(f)*a,Math.sin(f)*a]};return a};var Ha=-F/2,bh=2*F-1E-6;l.svg.line.radial=function(){var a=Wd(Ie);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};yc.reverse=zc;zc.reverse=yc;l.svg.area=function(){return Je(ka)};l.svg.area.radial=function(){var a=Je(Ie);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;
a.endAngle=a.y1;delete a.y1;return a};l.svg.chord=function(){function a(a,f){var h=c(this,d,a,f),l=c(this,e,a,f);return"M"+h.p0+b(h.r,h.p1,h.a1-h.a0)+(h.a0==l.a0&&h.a1==l.a1?"Q 0,0 "+h.p0:"Q 0,0 "+l.p0+b(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+h.p0))+"Z"}function c(a,c,b,d){var e=c.call(a,b,d);c=f.call(a,e,d);b=h.call(a,e,d)+Ha;a=l.call(a,e,d)+Ha;return{r:c,a0:b,a1:a,p0:[c*Math.cos(b),c*Math.sin(b)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function b(a,c,d){return"A"+a+","+a+" 0 "+ +(d>F)+",1 "+c}var d=sc,e=tc,f=
yg,h=Ge,l=He;a.radius=function(c){if(!arguments.length)return f;f=R(c);return a};a.source=function(c){if(!arguments.length)return d;d=R(c);return a};a.target=function(c){if(!arguments.length)return e;e=R(c);return a};a.startAngle=function(c){if(!arguments.length)return h;h=R(c);return a};a.endAngle=function(c){if(!arguments.length)return l;l=R(c);return a};return a};l.svg.diagonal=function(){function a(a,e){var f=c.call(this,a,e),h=b.call(this,a,e),l=(f.y+h.y)/2,f=[f,{x:f.x,y:l},{x:h.x,y:l},h],f=
f.map(d);return"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var c=sc,b=tc,d=Ke;a.source=function(b){if(!arguments.length)return c;c=R(b);return a};a.target=function(c){if(!arguments.length)return b;b=R(c);return a};a.projection=function(c){if(!arguments.length)return d;d=c;return a};return a};l.svg.diagonal.radial=function(){var a=l.svg.diagonal(),c=Ke,b=a.projection;a.projection=function(a){return arguments.length?b(zg(c=a)):c};return a};l.svg.symbol=function(){function a(a,d){return(ff.get(c.call(this,a,
d))||Le)(b.call(this,a,d))}var c=Bg,b=Ag;a.type=function(b){if(!arguments.length)return c;c=R(b);return a};a.size=function(c){if(!arguments.length)return b;b=R(c);return a};return a};var ff=l.map({circle:Le,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*gf));var c=a*gf;return"M0,"+-a+"L"+c+",0 0,"+a+" "+-c+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+
-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Sb);var c=a*Sb/2;return"M0,"+c+"L"+a+","+-c+" "+-a+","+-c+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Sb);var c=a*Sb/2;return"M0,"+-c+"L"+a+","+c+" "+-a+","+c+"Z"}});l.svg.symbolTypes=ff.keys();var Sb=Math.sqrt(3),gf=Math.tan(30*K),aa=[],We=0,bb,Hb={ease:function(a){if(0>=a)return 0;if(1<=a)return 1;var c=a*a,b=c*a;return 4*(.5>a?b:3*(a-c)+b-.75)},delay:0,duration:250};aa.call=U.call;aa.empty=U.empty;aa.node=
U.node;l.transition=function(a){return arguments.length?bb?a.transition():a:Ve.transition()};l.transition.prototype=aa;aa.select=function(a){var c=this.id,b=[],d,e,f;"function"!==typeof a&&(a=E(a));for(var h=-1,l=this.length;++h<l;){b.push(d=[]);for(var n=this[h],m=-1,q=n.length;++m<q;)(f=n[m])&&(e=a.call(f,f.__data__,m))?("__data__"in f&&(e.__data__=f.__data__),Cb(e,m,c,f.__transition__[c]),d.push(e)):d.push(null)}return ab(b,c)};aa.selectAll=function(a){var c=this.id,b=[],d,e,f,h;"function"!==typeof a&&
(a=M(a));for(var l=-1,n=this.length;++l<n;)for(var m=this[l],q=-1,p=m.length;++q<p;)if(d=m[q]){h=d.__transition__[c];e=a.call(d,d.__data__,q);b.push(d=[]);for(var u=-1,t=e.length;++u<t;)Cb(f=e[u],u,c,h),d.push(f)}return ab(b,c)};aa.filter=function(a){var c=[],b,d,e;"function"!==typeof a&&(a=Sa(a));for(var f=0,h=this.length;f<h;f++){c.push(b=[]);d=this[f];for(var l=0,n=d.length;l<n;l++)(e=d[l])&&a.call(e,e.__data__,l)&&b.push(e)}return ab(c,this.id,this.time).ease(this.ease())};aa.tween=function(a,
c){var b=this.id;return 2>arguments.length?this.node().__transition__[b].tween.get(a):ha(this,null==c?function(c){c.__transition__[b].tween.remove(a)}:function(d){d.__transition__[b].tween.set(a,c)})};aa.attr=function(a,c){function b(){this.removeAttribute(n)}function d(){this.removeAttributeNS(n.space,n.local)}function e(a){return null==a?b:(a+="",function(){var c=this.getAttribute(n),b;return c!==a&&(b=h(c,a),function(a){this.setAttribute(n,b(a))})})}function f(a){return null==a?d:(a+="",function(){var c=
this.getAttributeNS(n.space,n.local),b;return c!==a&&(b=h(c,a),function(a){this.setAttributeNS(n.space,n.local,b(a))})})}if(2>arguments.length){for(c in a)this.attr(c,a[c]);return this}var h="transform"==a?vb:Ga,n=l.ns.qualify(a);return Qc(this,"attr."+a,c,n.local?f:e)};aa.attrTween=function(a,c){function b(a,d){var g=c.call(this,a,d,this.getAttribute(e));return g&&function(a){this.setAttribute(e,g(a))}}function d(a,b){var g=c.call(this,a,b,this.getAttributeNS(e.space,e.local));return g&&function(a){this.setAttributeNS(e.space,
e.local,g(a))}}var e=l.ns.qualify(a);return this.tween("attr."+a,e.local?d:b)};aa.style=function(a,c,b){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!==typeof a){2>e&&(c="");for(b in a)this.style(b,a[b],c);return this}b=""}var f="transform"==a?vb:Ga;return Qc(this,"style."+a,c,function(c){return null==c?d:(c+="",function(){var d=da.getComputedStyle(this,null).getPropertyValue(a),e;return d!==c&&(e=f(d,c),function(c){this.style.setProperty(a,e(c),b)})})})};aa.styleTween=
function(a,c,b){3>arguments.length&&(b="");return this.tween("style."+a,function(d,e){var f=c.call(this,d,e,da.getComputedStyle(this,null).getPropertyValue(a));return f&&function(c){this.style.setProperty(a,f(c),b)}})};aa.text=function(a){return Qc(this,"text",a,Cg)};aa.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};aa.ease=function(a){var c=this.id;if(1>arguments.length)return this.node().__transition__[c].ease;
"function"!==typeof a&&(a=l.ease.apply(l,arguments));return ha(this,function(b){b.__transition__[c].ease=a})};aa.delay=function(a){var c=this.id;return ha(this,"function"===typeof a?function(b,d,e){b.__transition__[c].delay=a.call(b,b.__data__,d,e)|0}:(a|=0,function(b){b.__transition__[c].delay=a}))};aa.duration=function(a){var c=this.id;return ha(this,"function"===typeof a?function(b,d,e){b.__transition__[c].duration=Math.max(1,a.call(b,b.__data__,d,e)|0)}:(a=Math.max(1,a|0),function(b){b.__transition__[c].duration=
a}))};aa.each=function(a,c){var b=this.id;if(2>arguments.length){var d=Hb,e=bb;bb=b;ha(this,function(c,d,e){Hb=c.__transition__[b];a.call(c,c.__data__,d,e)});Hb=d;bb=e}else ha(this,function(d){d.__transition__[b].event.on(a,c)});return this};aa.transition=function(){for(var a=this.id,c=++We,b=[],d,e,f,h,l=0,n=this.length;l<n;l++){b.push(d=[]);e=this[l];for(var m=0,q=e.length;m<q;m++){if(f=e[m])h=Object.create(f.__transition__[a]),h.delay+=h.duration,Cb(f,m,c,h);d.push(f)}}return ab(b,c)};l.svg.axis=
function(){function a(a){a.each(function(){var a=l.select(this),u=null==m?c.ticks?c.ticks.apply(c,n):c.domain():m,t=null==q?c.tickFormat?c.tickFormat.apply(c,n):String:q,w=Dg(c,u,p),y=a.selectAll(".tick.minor").data(w,String),w=y.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),A=l.transition(y.exit()).style("opacity",1E-6).remove(),y=l.transition(y).style("opacity",1),z=a.selectAll(".tick.major").data(u,String),u=z.enter().insert("g","path").attr("class","tick major").style("opacity",
1E-6),B=l.transition(z.exit()).style("opacity",1E-6).remove(),E=l.transition(z).style("opacity",1),I,G=yb(c),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),l.transition(a)),N=c.copy(),Q=this.__chart__||N;this.__chart__=N;u.append("line");u.append("text");var F=u.select("line"),P=E.select("line"),t=z.select("text").text(t),z=u.select("text"),L=E.select("text");switch(b){case "bottom":I=Me;w.attr("y2",e);y.attr("x2",0).attr("y2",e);F.attr("y2",d);z.attr("y",Math.max(d,
0)+h);P.attr("x2",0).attr("y2",d);L.attr("x",0).attr("y",Math.max(d,0)+h);t.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+G[0]+","+f+"V0H"+G[1]+"V"+f);break;case "top":I=Me;w.attr("y2",-e);y.attr("x2",0).attr("y2",-e);F.attr("y2",-d);z.attr("y",-(Math.max(d,0)+h));P.attr("x2",0).attr("y2",-d);L.attr("x",0).attr("y",-(Math.max(d,0)+h));t.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+G[0]+","+-f+"V0H"+G[1]+"V"+-f);break;case "left":I=Ne;w.attr("x2",-e);y.attr("x2",
-e).attr("y2",0);F.attr("x2",-d);z.attr("x",-(Math.max(d,0)+h));P.attr("x2",-d).attr("y2",0);L.attr("x",-(Math.max(d,0)+h)).attr("y",0);t.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-f+","+G[0]+"H0V"+G[1]+"H"+-f);break;case "right":I=Ne,w.attr("x2",e),y.attr("x2",e).attr("y2",0),F.attr("x2",d),z.attr("x",Math.max(d,0)+h),P.attr("x2",d).attr("y2",0),L.attr("x",Math.max(d,0)+h).attr("y",0),t.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+f+","+G[0]+"H0V"+G[1]+"H"+f)}if(c.ticks)u.call(I,
Q),E.call(I,N),B.call(I,N),w.call(I,Q),y.call(I,N),A.call(I,N);else{var M=N.rangeBand()/2,w=function(a){return N(a)+M};u.call(I,w);E.call(I,w)}})}var c=l.scale.linear(),b=hf,d=6,e=6,f=6,h=3,n=[10],m=null,q,p=0;a.scale=function(b){if(!arguments.length)return c;c=b;return a};a.orient=function(c){if(!arguments.length)return b;b=c in ch?c+"":hf;return a};a.ticks=function(){if(!arguments.length)return n;n=arguments;return a};a.tickValues=function(c){if(!arguments.length)return m;m=c;return a};a.tickFormat=
function(c){if(!arguments.length)return q;q=c;return a};a.tickSize=function(c,b){if(!arguments.length)return d;var g=arguments.length-1;d=+c;e=1<g?+b:d;f=0<g?+arguments[g]:d;return a};a.tickPadding=function(c){if(!arguments.length)return h;h=+c;return a};a.tickSubdivide=function(c){if(!arguments.length)return p;p=+c;return a};return a};var hf="bottom",ch={top:1,right:1,bottom:1,left:1};l.svg.brush=function(){function a(f){f.each(function(){var f=l.select(this),p=f.selectAll(".background").data([0]),
q=f.selectAll(".extent").data([0]),r=f.selectAll(".resize").data(m,String);f.style("pointer-events","all").on("mousedown.brush",e).on("touchstart.brush",e);p.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");q.enter().append("rect").attr("class","extent").style("cursor","move");r.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return dh[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?
-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");r.style("display",a.empty()?"none":null);r.exit().remove();h&&(q=yb(h),p.attr("x",q[0]).attr("width",q[1]-q[0]),b(f));n&&(q=yb(n),p.attr("y",q[0]).attr("height",q[1]-q[0]),d(f));c(f)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+p[+/e$/.test(a)][0]+","+p[+/^s/.test(a)][1]+")"})}function b(a){a.select(".extent").attr("x",p[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",
p[1][0]-p[0][0])}function d(a){a.select(".extent").attr("y",p[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",p[1][1]-p[0][1])}function e(){function k(){var a=l.event.changedTouches;return a?l.touches(y,a)[0]:l.mouse(y)}function m(){var a=k(),e=!1;F&&(a[0]+=F[0],a[1]+=F[1]);N||(l.event.altKey?(D||(D=[(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]),Q[0]=p[+(a[0]<D[0])][0],Q[1]=p[+(a[1]<D[1])][1]):D=null);I&&t(a,h,0)&&(b(B),e=!0);G&&t(a,n,1)&&(d(B),e=!0);e&&(c(B),z({type:"brush",mode:N?"move":
"resize"}))}function t(a,c,b){var d=yb(c);c=d[0];var e=d[1],d=Q[b],f=p[1][b]-p[0][b];N&&(c-=d,e-=f+d);a=Math.max(c,Math.min(e,a[b]));N?c=(a+=d)+f:(D&&(d=Math.max(c,Math.min(e,2*D[b]-a))),d<a?(c=a,a=d):c=d);if(p[0][b]!==a||p[1][b]!==c)return u=null,p[0][b]=a,p[1][b]=c,!0}function w(){m();B.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);l.select("body").style("cursor",null);P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",
null).on("keydown.brush",null).on("keyup.brush",null);z({type:"brushend"});q()}var y=this,A=l.select(l.event.target),z=f.of(y,arguments),B=l.select(y),E=A.datum(),I=!/^(n|s)$/.test(E)&&h,G=!/^(e|w)$/.test(E)&&n,N=A.classed("extent"),D,Q=k(),F,P=l.select(da).on("mousemove.brush",m).on("mouseup.brush",w).on("touchmove.brush",m).on("touchend.brush",w).on("keydown.brush",function(){32==l.event.keyCode&&(N||(D=null,Q[0]-=p[1][0],Q[1]-=p[1][1],N=2),q())}).on("keyup.brush",function(){32==l.event.keyCode&&
2==N&&(Q[0]+=p[1][0],Q[1]+=p[1][1],N=0,q())});if(N)Q[0]=p[0][0]-Q[0],Q[1]=p[0][1]-Q[1];else if(E){var L=+/w$/.test(E),E=+/^n/.test(E);F=[p[1-L][0]-Q[0],p[1-E][1]-Q[1]];Q[0]=p[L][0];Q[1]=p[E][1]}else l.event.altKey&&(D=Q.slice());B.style("pointer-events","none").selectAll(".resize").style("display",null);l.select("body").style("cursor",A.style("cursor"));z({type:"brushstart"});m();q()}var f=w(a,"brushstart","brush","brushend"),h=null,n=null,m=ad[0],p=[[0,0],[0,0]],u;a.x=function(c){if(!arguments.length)return h;
h=c;m=ad[!h<<1|!n];return a};a.y=function(c){if(!arguments.length)return n;n=c;m=ad[!h<<1|!n];return a};a.extent=function(c){var b,d,e,f,g;if(!arguments.length)return c=u||p,h&&(b=c[0][0],d=c[1][0],u||(b=p[0][0],d=p[1][0],h.invert&&(b=h.invert(b),d=h.invert(d)),d<b&&(g=b,b=d,d=g))),n&&(e=c[0][1],f=c[1][1],u||(e=p[0][1],f=p[1][1],n.invert&&(e=n.invert(e),f=n.invert(f)),f<e&&(g=e,e=f,f=g))),h&&n?[[b,e],[d,f]]:h?[b,d]:n&&[e,f];u=[[0,0],[0,0]];h&&(b=c[0],d=c[1],n&&(b=b[0],d=d[0]),u[0][0]=b,u[1][0]=d,
h.invert&&(b=h(b),d=h(d)),d<b&&(g=b,b=d,d=g),p[0][0]=b|0,p[1][0]=d|0);n&&(e=c[0],f=c[1],h&&(e=e[1],f=f[1]),u[0][1]=e,u[1][1]=f,n.invert&&(e=n(e),f=n(f)),f<e&&(g=e,e=f,f=g),p[0][1]=e|0,p[1][1]=f|0);return a};a.clear=function(){u=null;p[0][0]=p[0][1]=p[1][0]=p[1][1]=0;return a};a.empty=function(){return h&&p[0][0]===p[1][0]||n&&p[0][1]===p[1][1]};return l.rebind(a,f,"on")};var dh={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},
ad=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]];l.time={};var fa=Date;Ia.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},
getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ya.setUTCDate.apply(this._,arguments)},setDay:function(){ya.setUTCDay.apply(this._,arguments)},setFullYear:function(){ya.setUTCFullYear.apply(this._,arguments)},setHours:function(){ya.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ya.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ya.setUTCMinutes.apply(this._,arguments)},
setMonth:function(){ya.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ya.setUTCSeconds.apply(this._,arguments)},setTime:function(){ya.setTime.apply(this._,arguments)}};var ya=Date.prototype,jf="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),kf="Sun Mon Tue Wed Thu Fri Sat".split(" "),bd="January February March April May June July August September October November December".split(" "),cd="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");l.time.year=Ja(function(a){a=
l.time.day(a);a.setMonth(0,1);return a},function(a,c){a.setFullYear(a.getFullYear()+c)},function(a){return a.getFullYear()});l.time.years=l.time.year.range;l.time.years.utc=l.time.year.utc.range;l.time.day=Ja(function(a){var c=new fa(1970,0);c.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return c},function(a,c){a.setDate(a.getDate()+c)},function(a){return a.getDate()-1});l.time.days=l.time.day.range;l.time.days.utc=l.time.day.utc.range;l.time.dayOfYear=function(a){var c=l.time.year(a);return Math.floor((a-
c-6E4*(a.getTimezoneOffset()-c.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,c){a=a.toLowerCase();c=7-c;var b=l.time[a]=Ja(function(a){(a=l.time.day(a)).setDate(a.getDate()-(a.getDay()+c)%7);return a},function(a,c){a.setDate(a.getDate()+7*Math.floor(c))},function(a){var b=l.time.year(a).getDay();return Math.floor((l.time.dayOfYear(a)+(b+c)%7)/7)-(b!==c)});l.time[a+"s"]=b.range;l.time[a+"s"].utc=b.utc.range;l.time[a+"OfYear"]=
function(a){var b=l.time.year(a).getDay();return Math.floor((l.time.dayOfYear(a)+(b+c)%7)/7)}});l.time.week=l.time.sunday;l.time.weeks=l.time.sunday.range;l.time.weeks.utc=l.time.sunday.utc.range;l.time.weekOfYear=l.time.sundayOfYear;l.time.format=function(a){function c(c){for(var d=[],e=-1,f=0,h,l;++e<b;)if(37===a.charCodeAt(e)){d.push(a.substring(f,e));null!=(h=eh[f=a.charAt(++e)])&&(f=a.charAt(++e));if(l=Tb[f])f=l(c,null==h?"e"===f?" ":"0":h);d.push(f);f=e+1}d.push(a.substring(f,e));return d.join("")}
var b=a.length;c.parse=function(c){var b={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Eb(b,a,c,0)!=c.length)return null;"p"in b&&(b.H=b.H%12+12*b.p);c=new fa;c.setFullYear(b.y,b.m,b.d);c.setHours(b.H,b.M,b.S,b.L);return c};c.toString=function(){return a};return c};var lf=Fb(jf),mf=Fb(kf),nf=Fb(bd),fh=Oe(bd),of=Fb(cd),gh=Oe(cd),eh={"-":"",_:" ",0:"0"},Tb={a:function(a){return kf[a.getDay()]},A:function(a){return jf[a.getDay()]},b:function(a){return cd[a.getMonth()]},B:function(a){return bd[a.getMonth()]},c:l.time.format("%a %b %e %X %Y"),
d:function(a,c){return ja(a.getDate(),c,2)},e:function(a,c){return ja(a.getDate(),c,2)},H:function(a,c){return ja(a.getHours(),c,2)},I:function(a,c){return ja(a.getHours()%12||12,c,2)},j:function(a,c){return ja(1+l.time.dayOfYear(a),c,3)},L:function(a,c){return ja(a.getMilliseconds(),c,3)},m:function(a,c){return ja(a.getMonth()+1,c,2)},M:function(a,c){return ja(a.getMinutes(),c,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,c){return ja(a.getSeconds(),c,2)},U:function(a,c){return ja(l.time.sundayOfYear(a),
c,2)},w:function(a){return a.getDay()},W:function(a,c){return ja(l.time.mondayOfYear(a),c,2)},x:l.time.format("%m/%d/%Y"),X:l.time.format("%H:%M:%S"),y:function(a,c){return ja(a.getFullYear()%100,c,2)},Y:function(a,c){return ja(a.getFullYear()%1E4,c,4)},Z:function(a){var c=a.getTimezoneOffset();a=0<c?"-":"+";var b=~~(Math.abs(c)/60),c=Math.abs(c)%60;return a+ja(b,"0",2)+ja(c,"0",2)},"%":function(){return"%"}},Eg={a:function(a,c,b){mf.lastIndex=0;return(a=mf.exec(c.substring(b)))?b+a[0].length:-1},
A:function(a,c,b){lf.lastIndex=0;return(a=lf.exec(c.substring(b)))?b+a[0].length:-1},b:function(a,c,b){of.lastIndex=0;return(c=of.exec(c.substring(b)))?(a.m=gh.get(c[0].toLowerCase()),b+c[0].length):-1},B:function(a,c,b){nf.lastIndex=0;return(c=nf.exec(c.substring(b)))?(a.m=fh.get(c[0].toLowerCase()),b+c[0].length):-1},c:function(a,c,b){return Eb(a,Tb.c.toString(),c,b)},d:Pe,e:Pe,H:Qe,I:Qe,L:function(a,c,b){ga.lastIndex=0;return(c=ga.exec(c.substring(b,b+3)))?(a.L=+c[0],b+c[0].length):-1},m:function(a,
c,b){ga.lastIndex=0;return(c=ga.exec(c.substring(b,b+2)))?(a.m=c[0]-1,b+c[0].length):-1},M:function(a,c,b){ga.lastIndex=0;return(c=ga.exec(c.substring(b,b+2)))?(a.M=+c[0],b+c[0].length):-1},p:function(a,c,b){c=hh.get(c.substring(b,b+=2).toLowerCase());return null==c?-1:(a.p=c,b)},S:function(a,c,b){ga.lastIndex=0;return(c=ga.exec(c.substring(b,b+2)))?(a.S=+c[0],b+c[0].length):-1},x:function(a,c,b){return Eb(a,Tb.x.toString(),c,b)},X:function(a,c,b){return Eb(a,Tb.X.toString(),c,b)},y:function(a,c,
b){ga.lastIndex=0;if(c=ga.exec(c.substring(b,b+2))){var d=+c[0];a=(a.y=d+(68<d?1900:2E3),b+c[0].length)}else a=-1;return a},Y:function(a,c,b){ga.lastIndex=0;return(c=ga.exec(c.substring(b,b+4)))?(a.y=+c[0],b+c[0].length):-1}},ga=/^\s*\d+/,hh=l.map({am:0,pm:1});l.time.format.utc=function(a){function c(a){try{fa=Ia;var c=new fa;c._=a;return b(c)}finally{fa=Date}}var b=l.time.format(a);c.parse=function(a){try{fa=Ia;var c=b.parse(a);return c&&c._}finally{fa=Date}};c.toString=b.toString;return c};var pf=
l.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");l.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Rc:pf;Rc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Rc.toString=pf.toString;l.time.second=Ja(function(a){return new fa(1E3*Math.floor(a/1E3))},function(a,c){a.setTime(a.getTime()+1E3*Math.floor(c))},function(a){return a.getSeconds()});l.time.seconds=l.time.second.range;l.time.seconds.utc=l.time.second.utc.range;l.time.minute=Ja(function(a){return new fa(6E4*Math.floor(a/
6E4))},function(a,c){a.setTime(a.getTime()+6E4*Math.floor(c))},function(a){return a.getMinutes()});l.time.minutes=l.time.minute.range;l.time.minutes.utc=l.time.minute.utc.range;l.time.hour=Ja(function(a){var c=a.getTimezoneOffset()/60;return new fa(36E5*(Math.floor(a/36E5-c)+c))},function(a,c){a.setTime(a.getTime()+36E5*Math.floor(c))},function(a){return a.getHours()});l.time.hours=l.time.hour.range;l.time.hours.utc=l.time.hour.utc.range;l.time.month=Ja(function(a){a=l.time.day(a);a.setDate(1);return a},
function(a,c){a.setMonth(a.getMonth()+c)},function(a){return a.getMonth()});l.time.months=l.time.month.range;l.time.months.utc=l.time.month.utc.range;var Gb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],dd=[[l.time.second,1],[l.time.second,5],[l.time.second,15],[l.time.second,30],[l.time.minute,1],[l.time.minute,5],[l.time.minute,15],[l.time.minute,30],[l.time.hour,1],[l.time.hour,3],[l.time.hour,6],[l.time.hour,12],[l.time.day,1],[l.time.day,
2],[l.time.week,1],[l.time.month,1],[l.time.month,3],[l.time.year,1]],ih=[[l.time.format("%Y"),Va],[l.time.format("%B"),function(a){return a.getMonth()}],[l.time.format("%b %d"),function(a){return 1!=a.getDate()}],[l.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[l.time.format("%I %p"),function(a){return a.getHours()}],[l.time.format("%I:%M"),function(a){return a.getMinutes()}],[l.time.format(":%S"),function(a){return a.getSeconds()}],[l.time.format(".%L"),function(a){return a.getMilliseconds()}]],
qf=l.scale.linear(),jh=Re(ih);dd.year=function(a,c){return qf.domain(a.map(Fg)).ticks(c).map(Uc)};l.time.scale=function(){return Sc(l.scale.linear(),dd,jh)};var rf=dd.map(function(a){return[a[0].utc,a[1]]}),kh=[[l.time.format.utc("%Y"),Va],[l.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[l.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[l.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[l.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],
[l.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[l.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[l.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],lh=Re(kh);rf.year=function(a,c){return qf.domain(a.map(Gg)).ticks(c).map(Vc)};l.time.scale.utc=function(){return Sc(l.scale.linear(),rf,lh)};l.text=hc(function(a){return a.responseText});l.json=function(a,c){return ic(a,"application/json",Hg,c)};l.html=function(a,c){return ic(a,"text/html",Ig,c)};
l.xml=hc(function(a){return a.responseXML});return l}();var colorbrewer={Spectral:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(153,213,148)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,221,164)","rgb(43,131,186)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,221,164)","rgb(43,131,186)"],6:"rgb(213,62,79) rgb(252,141,89) rgb(254,224,139) rgb(230,245,152) rgb(153,213,148) rgb(50,136,189)".split(" "),7:"rgb(213,62,79) rgb(252,141,89) rgb(254,224,139) rgb(255,255,191) rgb(230,245,152) rgb(153,213,148) rgb(50,136,189)".split(" "),
8:"rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189)".split(" "),9:"rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189)".split(" "),10:"rgb(158,1,66) rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189) rgb(94,79,162)".split(" "),11:"rgb(158,1,66) rgb(213,62,79) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(230,245,152) rgb(171,221,164) rgb(102,194,165) rgb(50,136,189) rgb(94,79,162)".split(" "),
type:"div"},RdYlGn:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,207,96)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(166,217,106)","rgb(26,150,65)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(166,217,106)","rgb(26,150,65)"],6:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,139) rgb(217,239,139) rgb(145,207,96) rgb(26,152,80)".split(" "),7:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,139) rgb(255,255,191) rgb(217,239,139) rgb(145,207,96) rgb(26,152,80)".split(" "),8:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80)".split(" "),
9:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80)".split(" "),10:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80) rgb(0,104,55)".split(" "),11:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,139) rgb(255,255,191) rgb(217,239,139) rgb(166,217,106) rgb(102,189,99) rgb(26,152,80) rgb(0,104,55)".split(" "),
type:"div"},RdBu:{3:["rgb(239,138,98)","rgb(247,247,247)","rgb(103,169,207)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(146,197,222)","rgb(5,113,176)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(247,247,247)","rgb(146,197,222)","rgb(5,113,176)"],6:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(209,229,240) rgb(103,169,207) rgb(33,102,172)".split(" "),7:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(247,247,247) rgb(209,229,240) rgb(103,169,207) rgb(33,102,172)".split(" "),8:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172)".split(" "),
9:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(247,247,247) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172)".split(" "),10:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172) rgb(5,48,97)".split(" "),11:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(247,247,247) rgb(209,229,240) rgb(146,197,222) rgb(67,147,195) rgb(33,102,172) rgb(5,48,97)".split(" "),
type:"div"},PiYG:{3:["rgb(233,163,201)","rgb(247,247,247)","rgb(161,215,106)"],4:["rgb(208,28,139)","rgb(241,182,218)","rgb(184,225,134)","rgb(77,172,38)"],5:["rgb(208,28,139)","rgb(241,182,218)","rgb(247,247,247)","rgb(184,225,134)","rgb(77,172,38)"],6:"rgb(197,27,125) rgb(233,163,201) rgb(253,224,239) rgb(230,245,208) rgb(161,215,106) rgb(77,146,33)".split(" "),7:"rgb(197,27,125) rgb(233,163,201) rgb(253,224,239) rgb(247,247,247) rgb(230,245,208) rgb(161,215,106) rgb(77,146,33)".split(" "),8:"rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33)".split(" "),
9:"rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(247,247,247) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33)".split(" "),10:"rgb(142,1,82) rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33) rgb(39,100,25)".split(" "),11:"rgb(142,1,82) rgb(197,27,125) rgb(222,119,174) rgb(241,182,218) rgb(253,224,239) rgb(247,247,247) rgb(230,245,208) rgb(184,225,134) rgb(127,188,65) rgb(77,146,33) rgb(39,100,25)".split(" "),
type:"div"},PRGn:{3:["rgb(175,141,195)","rgb(247,247,247)","rgb(127,191,123)"],4:["rgb(123,50,148)","rgb(194,165,207)","rgb(166,219,160)","rgb(0,136,55)"],5:["rgb(123,50,148)","rgb(194,165,207)","rgb(247,247,247)","rgb(166,219,160)","rgb(0,136,55)"],6:"rgb(118,42,131) rgb(175,141,195) rgb(231,212,232) rgb(217,240,211) rgb(127,191,123) rgb(27,120,55)".split(" "),7:"rgb(118,42,131) rgb(175,141,195) rgb(231,212,232) rgb(247,247,247) rgb(217,240,211) rgb(127,191,123) rgb(27,120,55)".split(" "),8:"rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55)".split(" "),
9:"rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(247,247,247) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55)".split(" "),10:"rgb(64,0,75) rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55) rgb(0,68,27)".split(" "),11:"rgb(64,0,75) rgb(118,42,131) rgb(153,112,171) rgb(194,165,207) rgb(231,212,232) rgb(247,247,247) rgb(217,240,211) rgb(166,219,160) rgb(90,174,97) rgb(27,120,55) rgb(0,68,27)".split(" "),
type:"div"},RdYlBu:{3:["rgb(252,141,89)","rgb(255,255,191)","rgb(145,191,219)"],4:["rgb(215,25,28)","rgb(253,174,97)","rgb(171,217,233)","rgb(44,123,182)"],5:["rgb(215,25,28)","rgb(253,174,97)","rgb(255,255,191)","rgb(171,217,233)","rgb(44,123,182)"],6:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,144) rgb(224,243,248) rgb(145,191,219) rgb(69,117,180)".split(" "),7:"rgb(215,48,39) rgb(252,141,89) rgb(254,224,144) rgb(255,255,191) rgb(224,243,248) rgb(145,191,219) rgb(69,117,180)".split(" "),8:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180)".split(" "),
9:"rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(255,255,191) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180)".split(" "),10:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180) rgb(49,54,149)".split(" "),11:"rgb(165,0,38) rgb(215,48,39) rgb(244,109,67) rgb(253,174,97) rgb(254,224,144) rgb(255,255,191) rgb(224,243,248) rgb(171,217,233) rgb(116,173,209) rgb(69,117,180) rgb(49,54,149)".split(" "),
type:"div"},BrBG:{3:["rgb(216,179,101)","rgb(245,245,245)","rgb(90,180,172)"],4:["rgb(166,97,26)","rgb(223,194,125)","rgb(128,205,193)","rgb(1,133,113)"],5:["rgb(166,97,26)","rgb(223,194,125)","rgb(245,245,245)","rgb(128,205,193)","rgb(1,133,113)"],6:"rgb(140,81,10) rgb(216,179,101) rgb(246,232,195) rgb(199,234,229) rgb(90,180,172) rgb(1,102,94)".split(" "),7:"rgb(140,81,10) rgb(216,179,101) rgb(246,232,195) rgb(245,245,245) rgb(199,234,229) rgb(90,180,172) rgb(1,102,94)".split(" "),8:"rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94)".split(" "),
9:"rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(245,245,245) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94)".split(" "),10:"rgb(84,48,5) rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94) rgb(0,60,48)".split(" "),11:"rgb(84,48,5) rgb(140,81,10) rgb(191,129,45) rgb(223,194,125) rgb(246,232,195) rgb(245,245,245) rgb(199,234,229) rgb(128,205,193) rgb(53,151,143) rgb(1,102,94) rgb(0,60,48)".split(" "),
type:"div"},RdGy:{3:["rgb(239,138,98)","rgb(255,255,255)","rgb(153,153,153)"],4:["rgb(202,0,32)","rgb(244,165,130)","rgb(186,186,186)","rgb(64,64,64)"],5:["rgb(202,0,32)","rgb(244,165,130)","rgb(255,255,255)","rgb(186,186,186)","rgb(64,64,64)"],6:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(224,224,224) rgb(153,153,153) rgb(77,77,77)".split(" "),7:"rgb(178,24,43) rgb(239,138,98) rgb(253,219,199) rgb(255,255,255) rgb(224,224,224) rgb(153,153,153) rgb(77,77,77)".split(" "),8:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77)".split(" "),
9:"rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(255,255,255) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77)".split(" "),10:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77) rgb(26,26,26)".split(" "),11:"rgb(103,0,31) rgb(178,24,43) rgb(214,96,77) rgb(244,165,130) rgb(253,219,199) rgb(255,255,255) rgb(224,224,224) rgb(186,186,186) rgb(135,135,135) rgb(77,77,77) rgb(26,26,26)".split(" "),
type:"div"},PuOr:{3:["rgb(241,163,64)","rgb(247,247,247)","rgb(153,142,195)"],4:["rgb(230,97,1)","rgb(253,184,99)","rgb(178,171,210)","rgb(94,60,153)"],5:["rgb(230,97,1)","rgb(253,184,99)","rgb(247,247,247)","rgb(178,171,210)","rgb(94,60,153)"],6:"rgb(179,88,6) rgb(241,163,64) rgb(254,224,182) rgb(216,218,235) rgb(153,142,195) rgb(84,39,136)".split(" "),7:"rgb(179,88,6) rgb(241,163,64) rgb(254,224,182) rgb(247,247,247) rgb(216,218,235) rgb(153,142,195) rgb(84,39,136)".split(" "),8:"rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136)".split(" "),
9:"rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(247,247,247) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136)".split(" "),10:"rgb(127,59,8) rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136) rgb(45,0,75)".split(" "),11:"rgb(127,59,8) rgb(179,88,6) rgb(224,130,20) rgb(253,184,99) rgb(254,224,182) rgb(247,247,247) rgb(216,218,235) rgb(178,171,210) rgb(128,115,172) rgb(84,39,136) rgb(45,0,75)".split(" "),
type:"div"},Set2:{3:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)"],4:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)"],5:["rgb(102,194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)"],6:"rgb(102,194,165) rgb(252,141,98) rgb(141,160,203) rgb(231,138,195) rgb(166,216,84) rgb(255,217,47)".split(" "),7:"rgb(102,194,165) rgb(252,141,98) rgb(141,160,203) rgb(231,138,195) rgb(166,216,84) rgb(255,217,47) rgb(229,196,148)".split(" "),8:"rgb(102,194,165) rgb(252,141,98) rgb(141,160,203) rgb(231,138,195) rgb(166,216,84) rgb(255,217,47) rgb(229,196,148) rgb(179,179,179)".split(" "),
type:"qual"},Accent:{3:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)"],4:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)"],5:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)"],6:"rgb(127,201,127) rgb(190,174,212) rgb(253,192,134) rgb(255,255,153) rgb(56,108,176) rgb(240,2,127)".split(" "),7:"rgb(127,201,127) rgb(190,174,212) rgb(253,192,134) rgb(255,255,153) rgb(56,108,176) rgb(240,2,127) rgb(191,91,23)".split(" "),
8:"rgb(127,201,127) rgb(190,174,212) rgb(253,192,134) rgb(255,255,153) rgb(56,108,176) rgb(240,2,127) rgb(191,91,23) rgb(102,102,102)".split(" "),type:"qual"},Set1:{3:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)"],4:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)"],5:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(152,78,163)","rgb(255,127,0)"],6:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51)".split(" "),7:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51) rgb(166,86,40)".split(" "),
8:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51) rgb(166,86,40) rgb(247,129,191)".split(" "),9:"rgb(228,26,28) rgb(55,126,184) rgb(77,175,74) rgb(152,78,163) rgb(255,127,0) rgb(255,255,51) rgb(166,86,40) rgb(247,129,191) rgb(153,153,153)".split(" "),type:"qual"},Set3:{3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)"],4:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)"],5:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)",
"rgb(251,128,114)","rgb(128,177,211)"],6:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98)".split(" "),7:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105)".split(" "),8:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229)".split(" "),9:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217)".split(" "),
10:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217) rgb(188,128,189)".split(" "),11:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217) rgb(188,128,189) rgb(204,235,197)".split(" "),12:"rgb(141,211,199) rgb(255,255,179) rgb(190,186,218) rgb(251,128,114) rgb(128,177,211) rgb(253,180,98) rgb(179,222,105) rgb(252,205,229) rgb(217,217,217) rgb(188,128,189) rgb(204,235,197) rgb(255,237,111)".split(" "),
type:"qual"},Dark2:{3:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)"],4:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)"],5:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)"],6:"rgb(27,158,119) rgb(217,95,2) rgb(117,112,179) rgb(231,41,138) rgb(102,166,30) rgb(230,171,2)".split(" "),7:"rgb(27,158,119) rgb(217,95,2) rgb(117,112,179) rgb(231,41,138) rgb(102,166,30) rgb(230,171,2) rgb(166,118,29)".split(" "),8:"rgb(27,158,119) rgb(217,95,2) rgb(117,112,179) rgb(231,41,138) rgb(102,166,30) rgb(230,171,2) rgb(166,118,29) rgb(102,102,102)".split(" "),
type:"qual"},Paired:{3:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)"],4:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)"],5:["rgb(166,206,227)","rgb(31,120,180)","rgb(178,223,138)","rgb(51,160,44)","rgb(251,154,153)"],6:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28)".split(" "),7:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111)".split(" "),8:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0)".split(" "),
9:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214)".split(" "),10:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214) rgb(106,61,154)".split(" "),11:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214) rgb(106,61,154) rgb(255,255,153)".split(" "),
12:"rgb(166,206,227) rgb(31,120,180) rgb(178,223,138) rgb(51,160,44) rgb(251,154,153) rgb(227,26,28) rgb(253,191,111) rgb(255,127,0) rgb(202,178,214) rgb(106,61,154) rgb(255,255,153) rgb(177,89,40)".split(" "),type:"qual"},Pastel2:{3:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)"],4:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)"],5:["rgb(179,226,205)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)"],6:"rgb(179,226,205) rgb(253,205,172) rgb(203,213,232) rgb(244,202,228) rgb(230,245,201) rgb(255,242,174)".split(" "),
7:"rgb(179,226,205) rgb(253,205,172) rgb(203,213,232) rgb(244,202,228) rgb(230,245,201) rgb(255,242,174) rgb(241,226,204)".split(" "),8:"rgb(179,226,205) rgb(253,205,172) rgb(203,213,232) rgb(244,202,228) rgb(230,245,201) rgb(255,242,174) rgb(241,226,204) rgb(204,204,204)".split(" "),type:"qual"},Pastel1:{3:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)"],4:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)"],5:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)",
"rgb(222,203,228)","rgb(254,217,166)"],6:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204)".split(" "),7:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204) rgb(229,216,189)".split(" "),8:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204) rgb(229,216,189) rgb(253,218,236)".split(" "),9:"rgb(251,180,174) rgb(179,205,227) rgb(204,235,197) rgb(222,203,228) rgb(254,217,166) rgb(255,255,204) rgb(229,216,189) rgb(253,218,236) rgb(242,242,242)".split(" "),
type:"qual"},OrRd:{3:["rgb(254,232,200)","rgb(253,187,132)","rgb(227,74,51)"],4:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(215,48,31)"],5:["rgb(254,240,217)","rgb(253,204,138)","rgb(252,141,89)","rgb(227,74,51)","rgb(179,0,0)"],6:"rgb(254,240,217) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(227,74,51) rgb(179,0,0)".split(" "),7:"rgb(254,240,217) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(239,101,72) rgb(215,48,31) rgb(153,0,0)".split(" "),8:"rgb(255,247,236) rgb(254,232,200) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(239,101,72) rgb(215,48,31) rgb(153,0,0)".split(" "),
9:"rgb(255,247,236) rgb(254,232,200) rgb(253,212,158) rgb(253,187,132) rgb(252,141,89) rgb(239,101,72) rgb(215,48,31) rgb(179,0,0) rgb(127,0,0)".split(" "),type:"seq"},PuBu:{3:["rgb(236,231,242)","rgb(166,189,219)","rgb(43,140,190)"],4:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(5,112,176)"],5:["rgb(241,238,246)","rgb(189,201,225)","rgb(116,169,207)","rgb(43,140,190)","rgb(4,90,141)"],6:"rgb(241,238,246) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(43,140,190) rgb(4,90,141)".split(" "),
7:"rgb(241,238,246) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(54,144,192) rgb(5,112,176) rgb(3,78,123)".split(" "),8:"rgb(255,247,251) rgb(236,231,242) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(54,144,192) rgb(5,112,176) rgb(3,78,123)".split(" "),9:"rgb(255,247,251) rgb(236,231,242) rgb(208,209,230) rgb(166,189,219) rgb(116,169,207) rgb(54,144,192) rgb(5,112,176) rgb(4,90,141) rgb(2,56,88)".split(" "),type:"seq"},BuPu:{3:["rgb(224,236,244)","rgb(158,188,218)","rgb(136,86,167)"],
4:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,65,157)"],5:["rgb(237,248,251)","rgb(179,205,227)","rgb(140,150,198)","rgb(136,86,167)","rgb(129,15,124)"],6:"rgb(237,248,251) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(136,86,167) rgb(129,15,124)".split(" "),7:"rgb(237,248,251) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(140,107,177) rgb(136,65,157) rgb(110,1,107)".split(" "),8:"rgb(247,252,253) rgb(224,236,244) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(140,107,177) rgb(136,65,157) rgb(110,1,107)".split(" "),
9:"rgb(247,252,253) rgb(224,236,244) rgb(191,211,230) rgb(158,188,218) rgb(140,150,198) rgb(140,107,177) rgb(136,65,157) rgb(129,15,124) rgb(77,0,75)".split(" "),type:"seq"},Oranges:{3:["rgb(254,230,206)","rgb(253,174,107)","rgb(230,85,13)"],4:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(217,71,1)"],5:["rgb(254,237,222)","rgb(253,190,133)","rgb(253,141,60)","rgb(230,85,13)","rgb(166,54,3)"],6:"rgb(254,237,222) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(230,85,13) rgb(166,54,3)".split(" "),
7:"rgb(254,237,222) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(241,105,19) rgb(217,72,1) rgb(140,45,4)".split(" "),8:"rgb(255,245,235) rgb(254,230,206) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(241,105,19) rgb(217,72,1) rgb(140,45,4)".split(" "),9:"rgb(255,245,235) rgb(254,230,206) rgb(253,208,162) rgb(253,174,107) rgb(253,141,60) rgb(241,105,19) rgb(217,72,1) rgb(166,54,3) rgb(127,39,4)".split(" "),type:"seq"},BuGn:{3:["rgb(229,245,249)","rgb(153,216,201)","rgb(44,162,95)"],
4:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(35,139,69)"],5:["rgb(237,248,251)","rgb(178,226,226)","rgb(102,194,164)","rgb(44,162,95)","rgb(0,109,44)"],6:"rgb(237,248,251) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(44,162,95) rgb(0,109,44)".split(" "),7:"rgb(237,248,251) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(65,174,118) rgb(35,139,69) rgb(0,88,36)".split(" "),8:"rgb(247,252,253) rgb(229,245,249) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(65,174,118) rgb(35,139,69) rgb(0,88,36)".split(" "),
9:"rgb(247,252,253) rgb(229,245,249) rgb(204,236,230) rgb(153,216,201) rgb(102,194,164) rgb(65,174,118) rgb(35,139,69) rgb(0,109,44) rgb(0,68,27)".split(" "),type:"seq"},YlOrBr:{3:["rgb(255,247,188)","rgb(254,196,79)","rgb(217,95,14)"],4:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(204,76,2)"],5:["rgb(255,255,212)","rgb(254,217,142)","rgb(254,153,41)","rgb(217,95,14)","rgb(153,52,4)"],6:"rgb(255,255,212) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(217,95,14) rgb(153,52,4)".split(" "),
7:"rgb(255,255,212) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(236,112,20) rgb(204,76,2) rgb(140,45,4)".split(" "),8:"rgb(255,255,229) rgb(255,247,188) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(236,112,20) rgb(204,76,2) rgb(140,45,4)".split(" "),9:"rgb(255,255,229) rgb(255,247,188) rgb(254,227,145) rgb(254,196,79) rgb(254,153,41) rgb(236,112,20) rgb(204,76,2) rgb(153,52,4) rgb(102,37,6)".split(" "),type:"seq"},YlGn:{3:["rgb(247,252,185)","rgb(173,221,142)","rgb(49,163,84)"],4:["rgb(255,255,204)",
"rgb(194,230,153)","rgb(120,198,121)","rgb(35,132,67)"],5:["rgb(255,255,204)","rgb(194,230,153)","rgb(120,198,121)","rgb(49,163,84)","rgb(0,104,55)"],6:"rgb(255,255,204) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(49,163,84) rgb(0,104,55)".split(" "),7:"rgb(255,255,204) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(65,171,93) rgb(35,132,67) rgb(0,90,50)".split(" "),8:"rgb(255,255,229) rgb(247,252,185) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(65,171,93) rgb(35,132,67) rgb(0,90,50)".split(" "),
9:"rgb(255,255,229) rgb(247,252,185) rgb(217,240,163) rgb(173,221,142) rgb(120,198,121) rgb(65,171,93) rgb(35,132,67) rgb(0,104,55) rgb(0,69,41)".split(" "),type:"seq"},Reds:{3:["rgb(254,224,210)","rgb(252,146,114)","rgb(222,45,38)"],4:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(203,24,29)"],5:["rgb(254,229,217)","rgb(252,174,145)","rgb(251,106,74)","rgb(222,45,38)","rgb(165,15,21)"],6:"rgb(254,229,217) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(222,45,38) rgb(165,15,21)".split(" "),
7:"rgb(254,229,217) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(239,59,44) rgb(203,24,29) rgb(153,0,13)".split(" "),8:"rgb(255,245,240) rgb(254,224,210) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(239,59,44) rgb(203,24,29) rgb(153,0,13)".split(" "),9:"rgb(255,245,240) rgb(254,224,210) rgb(252,187,161) rgb(252,146,114) rgb(251,106,74) rgb(239,59,44) rgb(203,24,29) rgb(165,15,21) rgb(103,0,13)".split(" "),type:"seq"},RdPu:{3:["rgb(253,224,221)","rgb(250,159,181)","rgb(197,27,138)"],
4:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(174,1,126)"],5:["rgb(254,235,226)","rgb(251,180,185)","rgb(247,104,161)","rgb(197,27,138)","rgb(122,1,119)"],6:"rgb(254,235,226) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(197,27,138) rgb(122,1,119)".split(" "),7:"rgb(254,235,226) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(221,52,151) rgb(174,1,126) rgb(122,1,119)".split(" "),8:"rgb(255,247,243) rgb(253,224,221) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(221,52,151) rgb(174,1,126) rgb(122,1,119)".split(" "),
9:"rgb(255,247,243) rgb(253,224,221) rgb(252,197,192) rgb(250,159,181) rgb(247,104,161) rgb(221,52,151) rgb(174,1,126) rgb(122,1,119) rgb(73,0,106)".split(" "),type:"seq"},Greens:{3:["rgb(229,245,224)","rgb(161,217,155)","rgb(49,163,84)"],4:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(35,139,69)"],5:["rgb(237,248,233)","rgb(186,228,179)","rgb(116,196,118)","rgb(49,163,84)","rgb(0,109,44)"],6:"rgb(237,248,233) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(49,163,84) rgb(0,109,44)".split(" "),
7:"rgb(237,248,233) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(65,171,93) rgb(35,139,69) rgb(0,90,50)".split(" "),8:"rgb(247,252,245) rgb(229,245,224) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(65,171,93) rgb(35,139,69) rgb(0,90,50)".split(" "),9:"rgb(247,252,245) rgb(229,245,224) rgb(199,233,192) rgb(161,217,155) rgb(116,196,118) rgb(65,171,93) rgb(35,139,69) rgb(0,109,44) rgb(0,68,27)".split(" "),type:"seq"},YlGnBu:{3:["rgb(237,248,177)","rgb(127,205,187)","rgb(44,127,184)"],
4:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(34,94,168)"],5:["rgb(255,255,204)","rgb(161,218,180)","rgb(65,182,196)","rgb(44,127,184)","rgb(37,52,148)"],6:"rgb(255,255,204) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(44,127,184) rgb(37,52,148)".split(" "),7:"rgb(255,255,204) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(12,44,132)".split(" "),8:"rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(12,44,132)".split(" "),
9:"rgb(255,255,217) rgb(237,248,177) rgb(199,233,180) rgb(127,205,187) rgb(65,182,196) rgb(29,145,192) rgb(34,94,168) rgb(37,52,148) rgb(8,29,88)".split(" "),type:"seq"},Purples:{3:["rgb(239,237,245)","rgb(188,189,220)","rgb(117,107,177)"],4:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(106,81,163)"],5:["rgb(242,240,247)","rgb(203,201,226)","rgb(158,154,200)","rgb(117,107,177)","rgb(84,39,143)"],6:"rgb(242,240,247) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(117,107,177) rgb(84,39,143)".split(" "),
7:"rgb(242,240,247) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(128,125,186) rgb(106,81,163) rgb(74,20,134)".split(" "),8:"rgb(252,251,253) rgb(239,237,245) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(128,125,186) rgb(106,81,163) rgb(74,20,134)".split(" "),9:"rgb(252,251,253) rgb(239,237,245) rgb(218,218,235) rgb(188,189,220) rgb(158,154,200) rgb(128,125,186) rgb(106,81,163) rgb(84,39,143) rgb(63,0,125)".split(" "),type:"seq"},GnBu:{3:["rgb(224,243,219)","rgb(168,221,181)","rgb(67,162,202)"],
4:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(43,140,190)"],5:["rgb(240,249,232)","rgb(186,228,188)","rgb(123,204,196)","rgb(67,162,202)","rgb(8,104,172)"],6:"rgb(240,249,232) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(67,162,202) rgb(8,104,172)".split(" "),7:"rgb(240,249,232) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(78,179,211) rgb(43,140,190) rgb(8,88,158)".split(" "),8:"rgb(247,252,240) rgb(224,243,219) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(78,179,211) rgb(43,140,190) rgb(8,88,158)".split(" "),
9:"rgb(247,252,240) rgb(224,243,219) rgb(204,235,197) rgb(168,221,181) rgb(123,204,196) rgb(78,179,211) rgb(43,140,190) rgb(8,104,172) rgb(8,64,129)".split(" "),type:"seq"},Greys:{3:["rgb(240,240,240)","rgb(189,189,189)","rgb(99,99,99)"],4:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(82,82,82)"],5:["rgb(247,247,247)","rgb(204,204,204)","rgb(150,150,150)","rgb(99,99,99)","rgb(37,37,37)"],6:"rgb(247,247,247) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(99,99,99) rgb(37,37,37)".split(" "),
7:"rgb(247,247,247) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(115,115,115) rgb(82,82,82) rgb(37,37,37)".split(" "),8:"rgb(255,255,255) rgb(240,240,240) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(115,115,115) rgb(82,82,82) rgb(37,37,37)".split(" "),9:"rgb(255,255,255) rgb(240,240,240) rgb(217,217,217) rgb(189,189,189) rgb(150,150,150) rgb(115,115,115) rgb(82,82,82) rgb(37,37,37) rgb(0,0,0)".split(" "),type:"seq"},YlOrRd:{3:["rgb(255,237,160)","rgb(254,178,76)","rgb(240,59,32)"],
4:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(227,26,28)"],5:["rgb(255,255,178)","rgb(254,204,92)","rgb(253,141,60)","rgb(240,59,32)","rgb(189,0,38)"],6:"rgb(255,255,178) rgb(254,217,118) rgb(254,178,76) rgb(253,141,60) rgb(240,59,32) rgb(189,0,38)".split(" "),7:"rgb(255,255,178) rgb(254,217,118) rgb(254,178,76) rgb(253,141,60) rgb(252,78,42) rgb(227,26,28) rgb(177,0,38)".split(" "),8:"rgb(255,255,204) rgb(255,237,160) rgb(254,217,118) rgb(254,178,76) rgb(253,141,60) rgb(252,78,42) rgb(227,26,28) rgb(177,0,38)".split(" "),
type:"seq"},PuRd:{3:["rgb(231,225,239)","rgb(201,148,199)","rgb(221,28,119)"],4:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(206,18,86)"],5:["rgb(241,238,246)","rgb(215,181,216)","rgb(223,101,176)","rgb(221,28,119)","rgb(152,0,67)"],6:"rgb(241,238,246) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(221,28,119) rgb(152,0,67)".split(" "),7:"rgb(241,238,246) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(231,41,138) rgb(206,18,86) rgb(145,0,63)".split(" "),8:"rgb(247,244,249) rgb(231,225,239) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(231,41,138) rgb(206,18,86) rgb(145,0,63)".split(" "),
9:"rgb(247,244,249) rgb(231,225,239) rgb(212,185,218) rgb(201,148,199) rgb(223,101,176) rgb(231,41,138) rgb(206,18,86) rgb(152,0,67) rgb(103,0,31)".split(" "),type:"seq"},Blues:{3:["rgb(222,235,247)","rgb(158,202,225)","rgb(49,130,189)"],4:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(33,113,181)"],5:["rgb(239,243,255)","rgb(189,215,231)","rgb(107,174,214)","rgb(49,130,189)","rgb(8,81,156)"],6:"rgb(239,243,255) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(49,130,189) rgb(8,81,156)".split(" "),
7:"rgb(239,243,255) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,69,148)".split(" "),8:"rgb(247,251,255) rgb(222,235,247) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,69,148)".split(" "),9:"rgb(247,251,255) rgb(222,235,247) rgb(198,219,239) rgb(158,202,225) rgb(107,174,214) rgb(66,146,198) rgb(33,113,181) rgb(8,81,156) rgb(8,48,107)".split(" "),type:"seq"},PuBuGn:{3:["rgb(236,226,240)","rgb(166,189,219)","rgb(28,144,153)"],
4:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(2,129,138)"],5:["rgb(246,239,247)","rgb(189,201,225)","rgb(103,169,207)","rgb(28,144,153)","rgb(1,108,89)"],6:"rgb(246,239,247) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(28,144,153) rgb(1,108,89)".split(" "),7:"rgb(246,239,247) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(54,144,192) rgb(2,129,138) rgb(1,100,80)".split(" "),8:"rgb(255,247,251) rgb(236,226,240) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(54,144,192) rgb(2,129,138) rgb(1,100,80)".split(" "),
9:"rgb(255,247,251) rgb(236,226,240) rgb(208,209,230) rgb(166,189,219) rgb(103,169,207) rgb(54,144,192) rgb(2,129,138) rgb(1,108,89) rgb(1,70,54)".split(" "),type:"seq"}};var JSDAS=function(){var b=function(b,e,h){return JSDAS.Parser.parseElement(b,JSDAS.Formats[h||JSDAS.Formats.current][e])},e={version:function(){return"0.1"},debug:function(b){b&&(this._debug=b);return this._debug},setXMLLoader:function(b){return b&&"function"==typeof b.load?(this.XMLLoader=b,!0):!1},sources:function(b,e,h,m){JSDAS.XMLLoader.load(b,function(b){b=JSDAS.error?void 0:JSDAS.parseSources(b,m);JSDAS.error?h&&"FUNCTION"==typeof h&&h():e(b)},h)},types:function(b,e,h,m){JSDAS.XMLLoader.load(b,
function(b){b=JSDAS.error?void 0:JSDAS.parseTypes(b,m);JSDAS.error?h&&"FUNCTION"==typeof h&&h():e(b)},h)},dsn:function(b,e){JSDAS.XMLLoader.load(b,function(b){e(JSDAS.parseDSN(b,"v153"))})},sequence:function(b,e,h,m){JSDAS.XMLLoader.load(b,function(b){b=JSDAS.parseSequence(b,m);var d=b.SEQUENCE;if("undefined"==typeof d)h&&"FUNCTION"==typeof h&&h();else{for(var q=0,t=d.length;q<t;++q){var u=d[q];u.textContent=u.textContent.replace(/\n/gi,"")}e(b)}},h)},features:function(b,e,h,m){JSDAS.XMLLoader.load(b,
function(b){b=JSDAS.error?void 0:JSDAS.parseFeatures(b,m);JSDAS.error?h&&"FUNCTION"==typeof h&&h():e(b)},h)},entry_points:function(b,e,h,m){JSDAS.XMLLoader.load(b,function(b){b=JSDAS.error?void 0:JSDAS.parseEntry_points(b,m);JSDAS.error?h&&"FUNCTION"==typeof h&&h():e(b)},h)},alignment:function(b,e,h,m){JSDAS.XMLLoader.load(b,function(b){b=JSDAS.error?void 0:JSDAS.parseAlignment(b,m);JSDAS.error?h&&"FUNCTION"==typeof h&&h():e(b)},h)},stylesheet:function(b,e,h,m){JSDAS.XMLLoader.load(b,function(b){b=
JSDAS.error?void 0:JSDAS.parseStylesheet(b,m);JSDAS.error?h&&"FUNCTION"==typeof h&&h():e(b)},h)},coordinate_systems:function(b,e,h,m){JSDAS.XMLLoader.load(b,function(b){b=JSDAS.error?void 0:JSDAS.parseCoordinate_systems(b,m);JSDAS.error?h&&"FUNCTION"==typeof h&&h():e(b)},h)},parseSources:function(d,e){return b(d,"sources",e)},parseDSN:function(d,e){return b(d,"dsn",e)},parseTypes:function(d,e){return b(d,"types",e)},parseSequence:function(d,e){return b(d,"sequence",e)},parseFeatures:function(d,e){return b(d,
"features",e)},parseEntry_points:function(d,e){return b(d,"entry_points",e)},parseAlignment:function(d,e){return b(d,"alignment",e)},parseStylesheet:function(d,e){return b(d,"stylesheet",e)},parseCoordinate_systems:function(d,e){return b(d,"coordinate_systems",e)},errors:[],error:!1,flushErrors:function(){this.errors=[];e.error=!1},addError:function(b,f){b&&(e.errors[e.errors.length]={id:b,comment:f},e.error=!0)}};return e}(),JSDAS=JSDAS||{};
(function(){var b=[{name:"id",type:"string",mandatory:!1},{name:"start",type:"string",mandatory:!1},{name:"stop",type:"string",mandatory:!1},{name:"type",type:"string",mandatory:!1},{name:"version",type:"string",mandatory:!1},{name:"label",type:"string",mandatory:!1}];JSDAS.Formats={current:"v16",v16:{sources:{tagname:"SOURCES",multiple:!1,mandatory:!0,properties:[],childs:[{tagname:"SOURCE",multiple:!0,mandatory:!0,properties:[{name:"uri",type:"string",mandatory:!0},{name:"title",type:"string",mandatory:!0},
{name:"description",type:"string",mandatory:!1},{name:"doc_href",type:"string",mandatory:!1}],childs:[{tagname:"MAINTAINER",multiple:!1,mandatory:!1,properties:[{name:"email",type:"string",mandatory:!0}],childs:[]},{tagname:"VERSION",multiple:!0,mandatory:!0,properties:[{name:"uri",type:"string",mandatory:!1},{name:"created",type:"date",mandatory:!1}],childs:[{tagname:"COORDINATES",multiple:!0,mandatory:!0,properties:[{name:"uri",type:"string",mandatory:!0},{name:"source",type:"string",mandatory:!0},
{name:"authority",type:"string",mandatory:!0},{name:"version",type:"string",mandatory:!1}],childs:"text"},{tagname:"CAPABILITY",multiple:!0,mandatory:!0,properties:[{name:"type",type:"string",mandatory:!0},{name:"query_uri",type:"string",mandatory:!0}],childs:[]},{tagname:"PROP",multiple:!0,mandatory:!1,properties:[{name:"name",type:"string",mandatory:!0},{name:"value",type:"string",mandatory:!0}],childs:[]}]}]}]},types:{tagname:"DASTYPES",multiple:!1,mandatory:!0,properties:[],childs:[{tagname:"GFF",
multiple:!1,mandatory:!0,properties:[{name:"version",type:"string",mandatory:!0},{name:"href",type:"string",mandatory:!0}],childs:[{tagname:"SEGMENT",multiple:!0,mandatory:!0,properties:b,childs:[{tagname:"TYPE",multiple:!0,mandatory:!1,properties:[{name:"id",type:"string",mandatory:!0},{name:"category",type:"string",mandatory:!1},{name:"method",type:"string",mandatory:!1},{name:"cvId",type:"string",mandatory:!1}],childs:"text"}]}]}]},sequence:{tagname:"DASSEQUENCE",multiple:!1,mandatory:!0,properties:[],
childs:[{tagname:"SEQUENCE",multiple:!0,mandatory:!0,childs:"text",properties:[{name:"id",type:"string",mandatory:!0},{name:"start",type:"string",mandatory:!0},{name:"stop",type:"string",mandatory:!0},{name:"version",type:"string",mandatory:!1},{name:"label",type:"string",mandatory:!1},{name:"moltype",type:"string",mandatory:!1}]}]},features:{tagname:"DASGFF",multiple:!1,mandatory:!0,properties:[],childs:[{tagname:"GFF",multiple:!1,mandatory:!0,properties:[],childs:[{tagname:"SEGMENT",multiple:!0,
mandatory:!0,properties:b,childs:[{tagname:"FEATURE",multiple:!0,mandatory:!1,properties:[{name:"id",type:"string",mandatory:!0},{name:"label",type:"string",mandatory:!1}],childs:[{tagname:"TYPE",multiple:!1,mandatory:!0,properties:[{name:"id",type:"string",mandatory:!0},{name:"category",type:"string",mandatory:!0},{name:"method",type:"string",mandatory:!1},{name:"cvId",type:"string",mandatory:!1},{name:"reference",type:"string",mandatory:!1},{name:"subparts",type:"string",mandatory:!1},{name:"superparts",
type:"string",mandatory:!1}],childs:"text"},{tagname:"METHOD",multiple:!1,mandatory:!0,properties:[{name:"id",type:"string",mandatory:!0},{name:"cvId",type:"string",mandatory:!1}],childs:"text"},{tagname:"START",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"END",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"SCORE",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ORIENTATION",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"PHASE",multiple:!1,
mandatory:!1,properties:[],childs:"text"},{tagname:"NOTE",multiple:!0,mandatory:!1,properties:[],childs:"text"},{tagname:"LINK",multiple:!0,mandatory:!1,properties:[{name:"href",type:"string",mandatory:!0}],childs:"text"},{tagname:"TARGET",multiple:!0,mandatory:!1,properties:[{name:"id",type:"string",mandatory:!0},{name:"start",type:"string",mandatory:!0},{name:"stop",type:"string",mandatory:!0}],childs:"text"},{tagname:"GROUP",multiple:!0,mandatory:!1,properties:[{name:"id",type:"string",mandatory:!0},
{name:"label",type:"string",mandatory:!0},{name:"type",type:"string",mandatory:!0}],childs:[{tagname:"NOTE",multiple:!0,mandatory:!1,properties:[],childs:"text"},{tagname:"LINK",multiple:!0,mandatory:!1,properties:[{name:"href",type:"string",mandatory:!0}],childs:"text"},{tagname:"TARGET",multiple:!0,mandatory:!1,properties:[{name:"id",type:"string",mandatory:!0},{name:"start",type:"string",mandatory:!0},{name:"stop",type:"string",mandatory:!0}],childs:"text"}]},{tagname:"PARENT",multiple:!0,mandatory:!1,
properties:[{name:"id",type:"string",mandatory:!0}],childs:[]},{tagname:"PART",multiple:!0,mandatory:!1,properties:[{name:"id",type:"string",mandatory:!0}],childs:[]}]}]}]}]},alignment:{tagname:"DASALIGNMENT",multiple:!1,mandatory:!0,properties:[],childs:[{tagname:"alignment",multiple:!0,mandatory:!1,properties:[{name:"aligntype",type:"string",mandatory:!1},{name:"name",type:"string",mandatory:!1},{name:"description",type:"string",mandatory:!1},{name:"position",type:"string",mandatory:!1},{name:"max",
type:"string",mandatory:!1}],childs:[{tagname:"alignobject",multiple:!0,mandatory:!0,properties:[{name:"dbaccessionid",type:"string",mandatory:!0},{name:"objectversion",type:"string",mandatory:!0},{name:"chain",type:"string",mandatory:!1},{name:"intobjectid",type:"string",mandatory:!0},{name:"dbsource",type:"string",mandatory:!0},{name:"dbversion",type:"string",mandatory:!0},{name:"dbcoordsys",type:"string",mandatory:!0}],childs:[{tagname:"alignobjectdetail",multiple:!0,mandatory:!1,properties:[{name:"dbsource",
type:"string",mandatory:!0},{name:"property",type:"string",mandatory:!0}],childs:"text"},{tagname:"sequence",multiple:!0,mandatory:!1,properties:[],childs:"text"}]},{tagname:"score",multiple:!0,mandatory:!1,properties:[{name:"methodname",type:"string",mandatory:!0},{name:"value",type:"string",mandatory:!0}],childs:[]},{tagname:"block",multiple:!0,mandatory:!1,properties:[{name:"blockorder",type:"string",mandatory:!0},{name:"blockscore",type:"string",mandatory:!0}],clilds:[{tagname:"segment",multiple:!0,
mandatory:!0,properties:[{name:"intobjectid",type:"string",mandatory:!0},{name:"end",type:"string",mandatory:!1},{name:"orientation",type:"string",mandatory:!1},{name:"start",type:"string",mandatory:!1}],childs:[{tagname:"cigar",multiple:!0,mandatory:!1,properties:[],childs:"text"}]}]},{tagname:"geo3d",multiple:!0,mandatory:!1,properties:[{name:"intobjectid",type:"string",mandatory:!1}],childs:[{tagname:"vector",multiple:!1,mandatory:!0,properties:[{name:"x",type:"string",mandatory:!0},{name:"y",
type:"string",mandatory:!0},{name:"z",type:"string",mandatory:!0}],childs:[]},{tagname:"matrix",multiple:!1,mandatory:!0,properties:[{name:"mat11",type:"string",mandatory:!0},{name:"mat12",type:"string",mandatory:!0},{name:"mat13",type:"string",mandatory:!0},{name:"mat21",type:"string",mandatory:!0},{name:"mat22",type:"string",mandatory:!0},{name:"mat23",type:"string",mandatory:!0},{name:"mat31",type:"string",mandatory:!0},{name:"mat32",type:"string",mandatory:!0},{name:"mat33",type:"string",mandatory:!0}],
childs:[]}]}]}]},stylesheet:{tagname:"DASSTYLE",multiple:!1,mandatory:!0,properties:[],childs:[{tagname:"STYLESHEET",multiple:!1,mandatory:!0,properties:[{name:"version",type:"string",mandatory:!0}],childs:[{tagname:"CATEGORY",multiple:!0,mandatory:!0,properties:[{name:"id",type:"string",mandatory:!0}],childs:[{tagname:"TYPE",multiple:!0,mandatory:!0,properties:[{name:"id",type:"string",mandatory:!0}],childs:[{tagname:"GLYPH",multiple:!0,mandatory:!0,properties:[{name:"zoom",type:"string",mandatory:!1}],
childs:[{tagname:"ARROW",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"PARALLEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"SOUTHWEST",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"NORTHEAST",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},
{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"ANCHORED_ARROW",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"PARALLEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},
{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"BOX",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"LINEWITH",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",
multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"CROSS",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,
mandatory:!1,properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"DOT",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,
properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"EX",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,properties:[],
childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"HIDDEN",multiple:!1,mandatory:!1,properties:[],childs:[]},{tagname:"LINE",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"STYLE",multiple:!1,mandatory:!1,properties:[],childs:"text"},
{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"SPAN",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"HEIGHT",
multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"TEXT",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"FONT",multiple:!1,
mandatory:!1,properties:[],childs:"text"},{tagname:"FONTSIZE",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"STRING",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"STYLE",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,
mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"PRIMERS",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,
properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"TOOMANY",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"LINEWIDTH",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,
properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"TRIANGLE",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"DIRECTION",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LINEWIDTH",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"FGCOLOR",multiple:!1,mandatory:!1,
properties:[],childs:"text"},{tagname:"BGCOLOR",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"LABEL",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"BUMP",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"GRADIENT",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"COLOR1",multiple:!1,mandatory:!1,properties:[],
childs:"text"},{tagname:"COLOR2",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"COLOR3",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"MIN",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"MAX",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"STEPS",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"HISTOGRAM",multiple:!1,mandatory:!1,properties:[],
childs:[{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"COLOR1",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"COLOR2",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"COLOR3",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"MIN",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"MAX",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"STEPS",multiple:!1,mandatory:!1,properties:[],childs:"text"},
{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]},{tagname:"LINEPLOT",multiple:!1,mandatory:!1,properties:[],childs:[{tagname:"HEIGHT",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"COLOR1",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"COLOR2",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"COLOR3",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"MIN",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"MAX",
multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"STEPS",multiple:!1,mandatory:!1,properties:[],childs:"text"},{tagname:"ZINDEX",multiple:!1,mandatory:!1,properties:[],childs:"text"}]}]}]}]}]}]},structure:{tagname:"dasstructure",multiple:!1,mandatory:!0,properties:[],childs:[{tagname:"object",multiple:!0,mandatory:!0,properties:[{name:"dbaccessionid",type:"string",mandatory:!0},{name:"objectversion",type:"string",mandatory:!0},{name:"dbsource",type:"string",mandatory:!0},{name:"dbversion",
type:"string",mandatory:!0},{name:"dbcoordsys",type:"string",mandatory:!0}],childs:[]},{tagname:"objectdetail",multiple:!0,mandatory:!1,properties:[{name:"dbsource",type:"string",mandatory:!0},{name:"property",type:"string",mandatory:!0}],childs:"text"},{tagname:"chainid",multiple:!0,mandatory:!1,properties:[{name:"id",type:"string",mandatory:!0},{name:"model",type:"string",mandatory:!1},{name:"swissprot",type:"string",mandatory:!1}],childs:[{tagname:"group",multiple:!0,mandatory:!1,properties:[{name:"name",
type:"string",mandatory:!0},{name:"type",type:"string",mandatory:!0},{name:"groupid",type:"string",mandatory:!0},{name:"insetcode",type:"string",mandatory:!1}],childs:[{tagname:"atom",multiple:!0,mandatory:!0,properties:[{name:"x",type:"string",mandatory:!0},{name:"y",type:"string",mandatory:!0},{name:"z",type:"string",mandatory:!0},{name:"atomname",type:"string",mandatory:!0},{name:"atomid",type:"string",mandatory:!0},{name:"occupancy",type:"string",mandatory:!1},{name:"tempfactor",type:"string",
mandatory:!1},{name:"altloc",type:"string",mandatory:!1}]}]}]},{tagname:"connect",multiple:!0,mandatory:!1,properties:[{name:"typr",type:"string",mandatory:!1},{name:"atomserial",type:"string",mandatory:!1}],childs:[{tagname:"atomid",multiple:!0,mandatory:!1,properties:[{name:"atomid",type:"string",mandatory:!1}],childs:[]}]}]},entry_points:{tagname:"DASEP",multiple:!1,mandatory:!0,properties:[],childs:[{tagname:"ENTRY_POINTS",multiple:!1,mandatory:!0,childs:[{tagname:"SEGMENT",multiple:!0,mandatory:!1,
properties:[{name:"id",type:"string",mandatory:!1},{name:"start",type:"string",mandatory:!1},{name:"stop",type:"string",mandatory:!1},{name:"type",type:"string",mandatory:!1},{name:"orientation",type:"string",mandatory:!1},{name:"subparts",type:"string",mandatory:!1}],childs:"text"}],properties:[{name:"href",type:"string",mandatory:!0},{name:"start",type:"string",mandatory:!1},{name:"end",type:"string",mandatory:!1},{name:"version",type:"string",mandatory:!1},{name:"orientation",type:"string",mandatory:!1},
{name:"label",type:"string",mandatory:!1}]}]}},v153:{dsn:{tagname:"DASDSN",multiple:!1,mandatory:!0,properties:[],childs:[{tagname:"DSN",multiple:!0,mandatory:!0,properties:[],childs:[{tagname:"SOURCE",multiple:!1,mandatory:!0,properties:[{name:"id",type:"string",mandatory:!0},{name:"version",type:"string",mandatory:!1}],childs:"text"},{tagname:"MAPMASTER",multiple:!1,mandatory:!0,properties:[],childs:"text"},{tagname:"DESCRIPTION",multiple:!1,mandatory:!1,properties:[],childs:"text"}]}]}}}})();
JSDAS.URL={analyzeUrl:function(b){var e=b.split("/");b="";for(var d=void 0,f=void 0,h=void 0,m=0,n=e.length;m<n&&"das"!==e[m];)b+=e[m]+"/",m++;m<n&&m++;m<n&&(""!==e[m]&&"dsn"!==e[m]&&"sources"!==e[m]?d=e[m]:(f=e[m],""==f&&(f=void 0)),m++);m<n&&(e=e.slice(m).join("/"),m=e.indexOf("?"),-1!==m&&(f=e.substr(0,m),h=e.substr(m+1)));return{prefix:b,source:d,command:f,parameters:h}},getPrefix:function(b){b=b.split("/");for(var e="",d=0,f=b.length;d<f&&"das"!=b[d];d++)e+=b[d]+"/";return e},getSourcesURL:function(b){return this.getPrefix(b)+
"das/sources"},getSourceURL:function(b,e){if(e){var d=this.getPrefix(b);if(void 0!=d)return d+"das/"+e+("/"==e[e.length-1]?"":"/");JSDAS.addError("No_DAS_URL","It seems like the URL is not formatted acording to DAS specification or maybe undefined URL:"+b)}else{d=this.analyzeUrl(b);if(d.source&&void 0!=d.prefix)return d.prefix+"das/"+d.source+("/"==d.source[d.source.length-1]?"":"/");JSDAS.addError("No_DAS_URL","It seems like the URL is not formatted acording to DAS specification or maybe undefined  URL:"+
b)}},getEntryPointsURL:function(b,e){return this.getSourceURL(b,e)+"entry_points"},getTypesURL:function(b,e){return this.getSourceURL(b,e)+"types"},getSequenceURL:function(b,e){return this.getSourceURL(b,e)+"sequence"},getFeaturesURL:function(b,e){return this.getSourceURL(b,e)+"features"},getStylesheetURL:function(b,e){return this.getSourceURL(b,e)+"stylesheet"},getAlignmentURL:function(b,e){return this.getSourceURL(b,e)+"alignment"},hasSource:function(b){return void 0!=JSDAS.URL.analyzeUrl(b).source},
paramsURLEncode:function(b){var e="";for(par in b){var d=b[par];if("string"==typeof d)b[par]&&(e&&(e+="&"),e+=par+"="+b[par]);else if(d instanceof Array){e&&(e+="&");for(var f=0,f=0;f<d.length;f++)d[f]&&(e+=par+"="+d[f],f!=d.length-1&&(e+=";"))}}return encodeURI("?"+e)}};
JSDAS.Parser={num_elements:0,checkMandatoryElements:!1,parseElement:function(b,e){var d={};if(9==b.nodeType)for(b=b.firstChild;1!=b.nodeType&&b.nextSibling;)b=b.nextSibling;if(e.properties)for(var f=e.properties,h=0,m=f.length;h<m;++h){var n=f[h],p=n.jsname||n.name;d[p]=this.parseProperty(b,n)}if(e.childs)if(f=e.childs,"text"===f)d.textContent=b.innerText||b.textContent||b.text;else for(h=0,m=f.length;h<m;++h){for(var n=f[h],q=[],p=b.getElementsByTagName("*"),t=0,u=p.length;t<u;++t){var w=p[t];(new RegExp("^"+
n.tagname+"$","i")).test(w.nodeName)&&q.push(w)}if(0<q.length)if(p=n.jsname||n.tagname,n.multiple)for(d[p]=[],t=0,u=q.length;t<u;++t)d[p].push(this.parseElement(q[t],n));else d[p]=this.parseElement(q[0],n)}return d},parseProperty:function(b,e){for(var d,f=b.attributes,h=!1,m=0,n=f.length;m<n&&!h;++m){var p=f[m];(new RegExp("^"+e.name+"$","i")).test(p.name)&&(d=p.nodeValue,h=!0)}if(d)switch(e.type){case "date":return new Date(d);default:return d}}};
JSDAS.XMLLoader={initialize:function(){this.initialized=!0;this.proxyURL="proxy.php"},xhrCORS:function(b,e){var d;if("undefined"==typeof XMLHttpRequest)return null;d=new XMLHttpRequest;"withCredentials"in d?d.open(b,e,!0):"undefined"!=typeof XDomainRequest?(d=new XDomainRequest,d.open(b,e)):d=null;return d},xhr:function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest},load:function(b,e,d){this.initialized||this.initialize();var f=JSDAS.XMLLoader,h=!0,m=this.xhrCORS("GET",
b);m||(this.proxyURL?(m=this.xhr(),m.open("GET",this.proxyURL+"?url="+b,!0),h=!1):d&&d({id:"no_proxy",msg:"Cross-Origin requests are not supported but no proxy has been defined"}));var f=this,n=function(e){if(e&&4==e.readyState){if(f.httpSuccess(e))p(e);else if(h&&f.proxyURL){e=void 0;h=!1;var m=f.xhr();m.open("GET",f.proxyURL+"?url="+b,!0);m.onreadystatechange=function(){n(m)};m.send(null)}else d&&d({id:"xmlhttprequest_error",msg:e.status});e=void 0}},p=function(b){(b=b.responseXML)||d&&d({id:"not_xml",
msg:"The response was not XML"});"parsererror"!=b.documentElement.nodeName&&e(b)};m.onreadystatechange=function(){n(m)};try{m.send(null)}catch(q){if(h&&this.proxyURL){m=this.xhr();m.open("GET",this.proxyURL+"?url="+b,!0);m.onreadystatechange=function(){n(m)};try{m.send(null)}catch(t){d&&d({id:"sending_error",msg:"There was an error when sending the request"})}}else d&&d({id:"sending_error",msg:"There was an error when sending the request"})}},httpSuccess:function(b){try{return!b.status&&"file:"==
location.protocol&&b.responseXML||200<=b.status&&300>b.status||304==b.status||1223==b.status}catch(e){}return!1}};JSDAS=JSDAS||{};
(function(){JSDAS.Simple={getClient:function(b){var e=b,d=b?JSDAS.URL.analyzeUrl(b):void 0,f=void 0,h=function(){},m={url:function(f){f&&(e=f,d=JSDAS.URL.analyzeUrl(b));return f},source:function(b){if(d)return d.source=b||d.source,d.source},server:function(b){return m.url(b)},sources:function(b,d,f){var h=JSDAS.URL.getSourcesURL(e);h?(h+=JSDAS.URL.paramsURLEncode(f),JSDAS.sources(h,b,d)):JSDAS.addError("wrong_url","Malformed or Undefined URL?")},features:function(b,m,q){var t=JSDAS.URL.getFeaturesURL(e,
d.source);t?(t+=JSDAS.URL.paramsURLEncode(b),JSDAS.features(t,m||h,q||function(){JSDAS.addError("error_retrieving_features","Error retrieving features, see errors log")},f)):JSDAS.addError("wrong_url","Malformed or Undefined URL?")},types:function(b,m,q){var t=JSDAS.URL.getTypesURL(e,d.source);t?(t+=JSDAS.URL.paramsURLEncode(b),JSDAS.types(t,m||h,q||function(){JSDAS.addError("error_retrieving_types","Error retrieving types, see errors log")},f)):JSDAS.addError("wrong_url","Malformed or Undefined URL?")},
entry_points:function(b,m,q){var t=JSDAS.URL.getEntryPointsURL(e,d.source);t?(t+=JSDAS.URL.paramsURLEncode(b),JSDAS.entry_points(t,m||h,q||function(){JSDAS.addError("error_retrieving_entry_points","Error retrieving entry points, see errors log")},f)):JSDAS.addError("wrong_url","Malformed or Undefined URL?")},sequence:function(b,m,q){var t=JSDAS.URL.getSequenceURL(e,d.source);t?(t+=JSDAS.URL.paramsURLEncode(b),JSDAS.sequence(t,m||h,q||function(){JSDAS.addError("error_retrieving_sequence","Error retrieving sequence, see errors log")},
f)):JSDAS.addError("wrong_url","Malformed or Undefined URL?")},alignment:function(b,m,q){var t=JSDAS.URL.getAlignmentURL(e,d.source);sequence_url?(t+=JSDAS.URL.paramsURLEncode(b),JSDAS.alignment(t,m||h,q||function(){JSDAS.addError("error_retrieving_alignment","Error retrieving sequence, see errors log")},f)):JSDAS.addError("wrong_url","Malformed or Undefined URL?","simple.js")},stylesheet:function(b,m){var q=JSDAS.URL.getStylesheetURL(e,d.source);q?JSDAS.stylesheet(q,b||h,m||function(){JSDAS.addError("error_retrieving_stylesheet",
"Error retrieving sequence, see errors log")},f):JSDAS.addError("wrong_url","Malformed or Undefined URL?")},version:function(b){if(void 0==b)return f;f=b}};return m}}})();/*
 Use it if you like it
*/
function RGBColor(b){this.ok=!1;"#"==b.charAt(0)&&(b=b.substr(1,6));b=b.replace(/ /g,"");b=b.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",
darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",
gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",
oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},d;for(d in e)b==d&&(b=e[d]);var f=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(b){return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,
example:["#00ff00","336699"],process:function(b){return[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(b){return[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]}}];for(d=0;d<f.length;d++){var h=f[d].process,m=f[d].re.exec(b);m&&(channels=h(m),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r;this.g=0>this.g||isNaN(this.g)?0:
255<this.g?255:this.g;this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var b=this.r.toString(16),d=this.g.toString(16),e=this.b.toString(16);1==b.length&&(b="0"+b);1==d.length&&(d="0"+d);1==e.length&&(e="0"+e);return"#"+b+d+e};this.getHelpXML=function(){for(var b=[],d=0;d<f.length;d++)for(var h=f[d].example,m=0;m<h.length;m++)b[b.length]=h[m];for(var u in e)b[b.length]=u;h=document.createElement("ul");
h.setAttribute("id","rgbcolor-examples");for(d=0;d<b.length;d++)try{var w=document.createElement("li"),z=new RGBColor(b[d]),y=document.createElement("div");y.style.cssText="margin: 3px; border: 1px solid black; background:"+z.toHex()+"; color:"+z.toHex();y.appendChild(document.createTextNode("test"));var G=document.createTextNode(" "+b[d]+" -> "+z.toRGB()+" -> "+z.toHex());w.appendChild(y);w.appendChild(G);h.appendChild(w)}catch(E){}return h}};if("function"!==typeof Blob&&"object"!==typeof Blob||"undefined"===typeof URL)if("function"!==typeof Blob&&"object"!==typeof Blob||"undefined"===typeof webkitURL)var Blob=function(b){var e=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder||function(b){var e=function(b){return Object.prototype.toString.call(b).match(/^\[object\s(.*)\]$/)[1]},h=function(){this.data=[]},m=function(b,d,e){this.data=b;this.size=b.length;this.type=d;this.encoding=e},n=h.prototype,p=m.prototype,q=b.FileReaderSync,
t=function(b){this.code=this[this.name=b]},u="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),w=u.length,z=b.URL||b.webkitURL||b,y=z.createObjectURL,G=z.revokeObjectURL,E=z,M=b.btoa,P=b.atob,L=b.ArrayBuffer,B=b.Uint8Array;for(m.fake=p.fake=!0;w--;)t.prototype[u[w]]=w+1;z.createObjectURL||(E=b.URL={});E.createObjectURL=function(b){var d=b.type;null===d&&(d="application/octet-stream");if(b instanceof m)return d=
"data:"+d,"base64"===b.encoding?d+";base64,"+b.data:"URI"===b.encoding?d+","+decodeURIComponent(b.data):M?d+";base64,"+M(b.data):d+","+encodeURIComponent(b.data);if(y)return y.call(z,b)};E.revokeObjectURL=function(b){"data:"!==b.substring(0,5)&&G&&G.call(z,b)};n.append=function(b){var d=this.data;if(B&&(b instanceof L||b instanceof B)){var h="";b=new B(b);for(var n=0,p=b.length;n<p;n++)h+=String.fromCharCode(b[n]);d.push(h)}else if("Blob"===e(b)||"File"===e(b))if(q)h=new q,d.push(h.readAsBinaryString(b));
else throw new t("NOT_READABLE_ERR");else b instanceof m?"base64"===b.encoding&&P?d.push(P(b.data)):"URI"===b.encoding?d.push(decodeURIComponent(b.data)):"raw"===b.encoding&&d.push(b.data):("string"!==typeof b&&(b+=""),d.push(unescape(encodeURIComponent(b))))};n.getBlob=function(b){arguments.length||(b=null);return new m(this.data.join(""),b,"raw")};n.toString=function(){return"[object BlobBuilder]"};p.slice=function(b,d,e){var f=arguments.length;3>f&&(e=null);return new m(this.data.slice(b,1<f?d:
this.data.length),e,this.encoding)};p.toString=function(){return"[object Blob]"};return h}(b);return function(b,f){var h=f?f.type||"":"",m=new e;if(b)for(var n=0,p=b.length;n<p;n++)m.append(b[n]);return m.getBlob(h)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this);else self.URL=webkitURL;var saveAs=saveAs||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(b){var e=b.document,d=b.URL||b.webkitURL||b,f=e.createElementNS("http://www.w3.org/1999/xhtml","a"),h=!b.externalHost&&"download"in f,m=b.webkitRequestFileSystem,n=b.requestFileSystem||m||b.mozRequestFileSystem,p=function(d){(b.setImmediate||b.setTimeout)(function(){throw d;},0)},q=0,t=[],u=function(b,d,e){d=[].concat(d);for(var f=d.length;f--;){var h=b["on"+d[f]];if("function"===
typeof h)try{h.call(b,e||b)}catch(m){p(m)}}},w=function(d,p){var w=this,z=d.type,P=!1,L,B,A=function(){var e=(b.URL||b.webkitURL||b).createObjectURL(d);t.push(e);return e},I=function(){u(w,["writestart","progress","write","writeend"])},N=function(){if(P||!L)L=A(d);B?B.location.href=L:window.open(L,"_blank");w.readyState=w.DONE;I()},Q=function(b){return function(){if(w.readyState!==w.DONE)return b.apply(this,arguments)}},Sa={create:!0,exclusive:!1},cb;w.readyState=w.INIT;p||(p="download");if(h)L=A(d),
e=b.document,f=e.createElementNS("http://www.w3.org/1999/xhtml","a"),f.href=L,f.download=p,z=e.createEvent("MouseEvents"),z.initMouseEvent("click",!0,!1,b,0,0,0,0,0,!1,!1,!1,!1,0,null),f.dispatchEvent(z),w.readyState=w.DONE,I();else{b.chrome&&z&&"application/octet-stream"!==z&&(cb=d.slice||d.webkitSlice,d=cb.call(d,0,d.size,"application/octet-stream"),P=!0);m&&"download"!==p&&(p+=".download");if("application/octet-stream"===z||m)B=b;n?(q+=d.size,n(b.TEMPORARY,q,Q(function(b){b.root.getDirectory("saved",
Sa,Q(function(b){var e=function(){b.getFile(p,Sa,Q(function(b){b.createWriter(Q(function(e){e.onwriteend=function(d){B.location.href=b.toURL();t.push(b);w.readyState=w.DONE;u(w,"writeend",d)};e.onerror=function(){var b=e.error;b.code!==b.ABORT_ERR&&N()};["writestart","progress","write","abort"].forEach(function(b){e["on"+b]=w["on"+b]});e.write(d);w.abort=function(){e.abort();w.readyState=w.DONE};w.readyState=w.WRITING}),N)}),N)};b.getFile(p,{create:!1},Q(function(b){b.remove();e()}),Q(function(b){b.code===
b.NOT_FOUND_ERR?e():N()}))}),N)}),N)):N()}},z=w.prototype;z.abort=function(){this.readyState=this.DONE;u(this,"abort")};z.readyState=z.INIT=0;z.WRITING=1;z.DONE=2;z.error=z.onwritestart=z.onprogress=z.onwrite=z.onabort=z.onerror=z.onwriteend=null;b.addEventListener("unload",function(){for(var b=t.length;b--;){var e=t[b];"string"===typeof e?d.revokeObjectURL(e):e.remove()}t.length=0},!1);return function(b,d){return new w(b,d)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||
this.content);"undefined"!==typeof module&&(module.exports=saveAs);var xiNET={svgns:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",linkWidth:1.3,homodimerLinkWidth:2};xiNET.highlightColour=new RGBColor("#fdc086");xiNET.selectedColour=new RGBColor("#ffff99");xiNET.defaultSelfLinkColour=new RGBColor("#9970ab");xiNET.defaultInterLinkColour=new RGBColor("#35978f");xiNET.homodimerLinkColour=new RGBColor("#a50f15");
xiNET.Controller=function(b){"string"===typeof b&&(b=document.getElementById(b));this.ambigHidden=this.intraHidden=!1;this.fields={};this.emptyElement(b);this.svgElement=document.createElementNS(xiNET.svgns,"svg");this.svgElement.setAttribute("id","networkSVG");b.appendChild(this.svgElement);this.panning=!1;this.dragElement=null;this.dragging=!1;this.dragStart={};this.rotating=!1;this.svgElement.oncontextmenu=function(){return!1};b=document.createElementNS(xiNET.svgns,"rect");b.setAttribute("id",
"background_fill");b.setAttribute("x",0);b.setAttribute("y",0);b.setAttribute("width",5120);b.setAttribute("height",4096);b.setAttribute("fill-opacity","1");b.setAttribute("fill","#FFFFFF");this.svgElement.appendChild(b);this.container=document.createElementNS(xiNET.svgns,"g");this.container.setAttribute("id","container");this.p_pLinksWide=document.createElementNS(xiNET.svgns,"g");this.p_pLinksWide.setAttribute("id","p_pLinksWide");this.container.appendChild(this.p_pLinksWide);this.proteinLower=document.createElementNS(xiNET.svgns,
"g");this.proteinLower.setAttribute("id","proteinLower");this.container.appendChild(this.proteinLower);this.highlights=document.createElementNS(xiNET.svgns,"g");this.highlights.setAttribute("class","highlights");this.container.appendChild(this.highlights);this.res_resLinks=document.createElementNS(xiNET.svgns,"g");this.res_resLinks.setAttribute("id","res_resLinks");this.container.appendChild(this.res_resLinks);this.p_pLinks=document.createElementNS(xiNET.svgns,"g");this.p_pLinks.setAttribute("id",
"p_pLinks");this.container.appendChild(this.p_pLinks);this.proteinUpper=document.createElementNS(xiNET.svgns,"g");this.proteinUpper.setAttribute("id","proteinUpper");this.container.appendChild(this.proteinUpper);this.svgElement.appendChild(this.container);this.tooltip=document.createElementNS(xiNET.svgns,"text");this.tooltip.setAttribute("x",0);this.tooltip.setAttribute("y",0);b=document.createTextNode("tooltip");this.tooltip.appendChild(b);this.tooltip_bg=document.createElementNS(xiNET.svgns,"rect");
this.tooltip_bg.setAttribute("class","tooltip_bg");this.tooltip_bg.setAttribute("id","tooltip_bg");this.tooltip_bg.setAttribute("fill-opacity",.75);this.tooltip_bg.setAttribute("stroke-opacity",1);this.tooltip_bg.setAttribute("stroke-width",1);this.tooltip_subBg=document.createElementNS(xiNET.svgns,"rect");this.tooltip_subBg.setAttribute("fill","white");this.tooltip_subBg.setAttribute("stroke","white");this.tooltip_subBg.setAttribute("class","tooltip_bg");this.tooltip_subBg.setAttribute("id","tooltip_bg");
this.tooltip_subBg.setAttribute("opacity",1);this.tooltip_subBg.setAttribute("stroke-width",1);this.svgElement.appendChild(this.tooltip_subBg);this.svgElement.appendChild(this.tooltip_bg);this.svgElement.appendChild(this.tooltip);this.clear()};
xiNET.Controller.prototype.clear=function(){this.initComplete=!1;this.proteins=d3.map();this.proteinLinks=d3.map();this.matches=d3.map();this.subgraphs=[];this.maxBlobRadius=this.proteinCount=this.layoutXOffset=0;Protein.MAXSIZE=0;this.layout=null;this.z=1;this.scores=null;this.selected=d3.map();this.selectedLinks=d3.map();this.tooltip.setAttribute("visibility","hidden");this.tooltip_bg.setAttribute("visibility","hidden");this.resetZoom();this.state=xiNET.Controller.MOUSE_UP;this.emptyElement(this.p_pLinksWide);
this.emptyElement(this.highlights);this.emptyElement(this.p_pLinks);this.emptyElement(this.res_resLinks);this.emptyElement(this.proteinLower);this.emptyElement(this.proteinUpper)};xiNET.Controller.prototype.emptyElement=function(b){for(;b.lastChild;)b.removeChild(b.lastChild)};
xiNET.Controller.prototype.message=function(b,e){"undefined"!==typeof this.messageElement&&("object"===typeof b&&(b=JSON.stringify(b,null," "),b=b.replace(/\\u0000/gi,""),e=!0),e&&(b="<pre>"+b+"</pre>"),this.messageElement.innerHTML=b)};xiNET.Controller.prototype.addProtein=function(b,e,d,f,h,m){h=new Protein(b,this,h,e);h.initProtein(d,e,f,m);this.proteins.set(b,h)};
xiNET.Controller.prototype.addMatch=function(b,e,d,f,h,m,n,p,q,t,u,w,z,y){b=new Match(b,e,d,f,h,m,this,n,p,q,t,u,w,z,y);this.matches.set(h,b);return b};xiNET.Controller.prototype.addMatches=function(b){for(var e=b.length,d=0;d<e;d++)this.addMatch(b[d][0],b[d][1],b[d][2],b[d][3],b[d][4],b[d][5],b[d][6],b[d][7],b[d][8],b[d][9])};
xiNET.Controller.prototype.addAnnotation=function(b,e,d,f,h){b=this.proteins.get(b);null==d&&null==f?(d=1,f=b.size):null==d?d=f:null==f&&(f=d);if(d>f){var m=d;d=f;f=m}e=new Annotation(e,d,f,h);null==b.customAnnotations&&(b.customAnnotations=[]);b.customAnnotations.push(e);b.setPositionalFeatures(b.customAnnotations)};xiNET.Controller.prototype.addAnnotationByName=function(b,e,d,f,h){for(var m=this.proteins.values(),n=m.length,p=0;p<n;p++){var q=m[p];q.name==b&&this.addAnnotation(q.id,e,d,f,h)}};
xiNET.Controller.prototype.addAnnotations=function(b){b=d3.csv.parseRows(b);for(var e=b[0],d=e.indexOf("ProteinId"),f=e.indexOf("AnnotName"),h=e.indexOf("StartRes"),m=e.indexOf("EndRes"),e=e.indexOf("Color"),n=b.length,p=1;p<n;p++)this.addAnnotation(b[p][d],b[p][f],b[p][h],b[p][m],b[p][e])};
xiNET.Controller.prototype.init=function(b,e){var d=this.svgElement.parentNode;"undefined"!==typeof d&&null!=d?(b=d.clientWidth,e=d.clientHeight):(b=800,e=480);this.svgElement.setAttribute("width","100%");this.svgElement.setAttribute("height","100%");this.svgElement.setAttribute("style","display:block;");this.maxBlobRadius=Math.sqrt(Protein.MAXSIZE/Math.PI);Protein.UNITS_PER_RESIDUE=b/2/2E3;this.initComplete=!0;if("undefined"!==typeof this.layout&&null!=this.layout)this.loadLayout();else{for(var d=
this.proteins.values(),f=d.length,h=0;h<f;h++){var m=d[h];m.setPosition(0,0)}for(h=0;h<f;h++)m=d[h],3>this.proteins.keys().length?m.toStick():m.toBlob(),this.proteinLower.appendChild(m.lowerGroup),this.proteinUpper.appendChild(m.upperGroup);this.autoLayout(b,e)}this.message("Proteins: "+this.proteins.values().length+". Protein-protein links: "+this.proteinLinks.values().length);this.initMouseEvents();"function"===typeof this.initTouchEvents&&this.initTouchEvents()};
xiNET.Controller.prototype.getGeneName=function(b){var e=this.proteins.values()[b],d=new XMLHttpRequest;d.open("GET","http://129.215.14.148/jb/uniprot/sequence.php?id="+e.accession+"&dat",!0);d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){var b=/GN( *)(.*)/g.exec(d.responseText)[2];xlv.geneNames.set(e.accession,b);var b=xlv.proteins.values(),h=b.indexOf(e);h<b.length-1?xlv.getGeneName(h+1):xlv.message(xlv.geneNames)}};
d.send("")};xiNET.Controller.prototype.setLinkColour=function(b,e){var d=this.proteinLinks.get(b);"undefined"!==typeof d?(d.colour=new RGBColor(e),d.colourSpecified=!0):(d=this.proteins.get(b),"undefined"!==typeof d&&(d.internalLinkColour=new RGBColor(e)))};xiNET.Controller.prototype.parkAll=function(){for(var b=this.proteins.values(),e=b.length,d=0;d<e;d++){var f=b[d];!1===f.isParked&&f.toggleParked()}};
xiNET.Controller.prototype.resetZoom=function(){this.container.setAttribute("transform","scale(1)");this.scale()};xiNET.Controller.prototype.getLayout=function(){return JSON.stringify(this,null,"\t").replace(/\\u0000/gi,"")};xiNET.Controller.prototype.setLayout=function(b){this.layout="object"!==typeof b?JSON.parse(decodeURIComponent(b)):b};
xiNET.Controller.prototype.loadLayout=function(){var b=this.svgElement.suspendRedraw(5E3),e;for(e in this.layout.proteins){var d=this.layout.proteins[e],f=this.proteins.get(e);void 0!==f&&(f.setPosition(d.x,d.y),"undefined"!==typeof d.stickZoom&&(f.stickZoom=d.stickZoom),"undefined"!==typeof d.rot&&(f.rotation=d.rot),"undefined"!==typeof d.form&&1===d.form?f.toStick():f.toBlob(),f.setAllLineCoordinates(),"undefined"!==typeof d.parked&&f.setParked(d.parked),d.flipped&&f.toggleFlipped(),this.proteinLower.appendChild(f.lowerGroup),
this.proteinUpper.appendChild(f.upperGroup))}for(var d=this.proteins.values(),f=d.length,h=0;h<f;h++)e=d[h],null==e.x&&(e.toBlob(),e.setPosition(20,20),this.proteinLower.appendChild(e.lowerGroup),this.proteinUpper.appendChild(e.upperGroup));for(var m in this.layout.links)if(e=this.layout.links[m],d=this.proteinLinks.get(m),void 0!==d&&("undefined"!==typeof e.hidden&&(d.hidden=e.hidden),e=e.colour,"undefined"!==typeof e))for(d=d.residueLinks.values(),f=d.length,h=0;h<f;h++){var n=d[h];n.initSVG();
n.line.setAttribute("stroke","rgb("+e.r+","+e.g+","+e.b+")")}this.svgElement.unsuspendRedraw(b)};xiNET.Controller.prototype.toJSON=function(){return{proteins:this.proteins}};xiNET.Controller.MOUSE_UP=0;xiNET.Controller.PANNING=1;xiNET.Controller.DRAGGING=2;xiNET.Controller.ROTATING=3;xiNET.Controller.SCALING_PROTEIN=4;xiNET.Controller.SCALING_ALL_PROTEINS=5;xiNET.Controller.SELECTING=6;
xiNET.Controller.prototype.initMouseEvents=function(){var b=this;this.svgElement.onmousedown=function(d){b.mouseDown(d)};this.svgElement.onmousemove=function(d){b.mouseMove(d)};this.svgElement.onmouseup=function(d){b.mouseUp(d)};this.svgElement.onmouseout=function(d){b.hideTooltip(d)};var e=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";document.attachEvent?this.svgElement.attachEvent("on"+e,function(d){b.mouseWheel(d)}):document.addEventListener&&this.svgElement.addEventListener(e,
function(d){b.mouseWheel(d)},!1);this.marquee=document.createElementNS(xiNET.svgNS,"rect");this.marquee.setAttribute("class","marquee");this.marquee.setAttribute("fill","red");this.lastMouseUp=(new Date).getTime()};
xiNET.Controller.prototype.mouseDown=function(b){b.preventDefault();"undefined"!==typeof this.force&&null!=this.force&&this.force.stop();var e=this.getEventPoint(b);this.dragStart=this.mouseToSVG(e.x,e.y);var d;b.which?d=3===b.which:b.button&&(d=2===b.button);!0===b.ctrlKey||!0===b.shiftKey||d||(this.state=xiNET.Controller.PANNING,this.panned=!1);return!1};
xiNET.Controller.prototype.mouseMove=function(b){this.preventDefaultsAndStopPropagation(b);if(this.initComplete){var e=this.getEventPoint(b);b=this.mouseToSVG(e.x,e.y);if(null!=this.dragElement){this.hideTooltip();var d=this.dragStart.x-b.x,f=this.dragStart.y-b.y;if(this.state===xiNET.Controller.DRAGGING){var h,m;if("undefined"===typeof this.dragElement.x){var n;n=this.dragElement.fromProtein?this.dragElement.fromProtein:this.dragElement.proteinLink.fromProtein;for(var p=this.proteins.values(),q=
p.length,e=0;e<q;e++)p[e].subgraph=null;e=n.getSubgraph().nodes.values();n=e.length;for(p=0;p<n;p++)q=e[p],h=q.x,m=q.y,h-=d,m-=f,q.setPosition(h,m),q.setAllLineCoordinates();for(p=0;p<n;p++)e[p].setAllLineCoordinates()}else h=this.dragElement.x,m=this.dragElement.y,this.dragElement.setPosition(h-d,m-f),this.dragElement.setAllLineCoordinates();this.dragStart=b}else this.state===xiNET.Controller.ROTATING?(b=Math.atan2(b.y-this.dragElement.y,b.x-this.dragElement.x),0===this.whichRotator&&(b+=Math.PI),
this.dragElement.setRotation(360/(2*Math.PI)*b),this.dragElement.setAllLineCoordinates()):Math.sqrt(d*d+f*f)>5*this.z&&(this.state=xiNET.Controller.DRAGGING)}else this.state===xiNET.Controller.PANNING?xiNET.setCTM(this.container,this.container.getCTM().translate(b.x-this.dragStart.x,b.y-this.dragStart.y)):this.showTooltip(e)}return!1};
xiNET.Controller.prototype.mouseUp=function(b){var e=(new Date).getTime();this.preventDefaultsAndStopPropagation(b);if(150<e-this.lastMouseUp){var d,f;b.which?d=3===b.which:b.button&&(d=2===b.button);b.which?f=2===b.which:b.button&&(f=1===b.button);var h=this.getEventPoint(b),h=this.mouseToSVG(h.x,h.y);if(null!=this.dragElement)this.state!==xiNET.Controller.DRAGGING&&this.state!==xiNET.Controller.ROTATING?d?"undefined"===typeof this.dragElement.x?this.dragElement.intra?this.dragElement.proteinLink&&
this.dragElement.proteinLink.fromProtein.toggleFlipped():(void 0!==this.dragElement.hidden?this.dragElement.hidden=!0:this.dragElement.proteinLink.hidden=!0,this.dragElement.highlightLine.setAttribute("stroke-opacity","0"),this.checkLinks()):this.dragElement.setParked(!this.dragElement.isParked,h):f||("undefined"===typeof this.dragElement.x?this.dragElement.showID():b.shiftKey?this.dragElement.switchStickScale(h):0===this.dragElement.form?this.dragElement.setForm(1,h):this.dragElement.setForm(0,h)):
this.state===xiNET.Controller.ROTATING&&this.dragElement.setRotation(5*Math.round(this.dragElement.rotation/5));else if(d){b=this.proteinLinks.values();d=b.length;for(f=0;f<d;f++)b[f].hidden=!1;this.checkLinks()}else!1===b.ctrlKey&&this.clearSelection();this.state===xiNET.Controller.SELECTING&&(clearInterval(this.marcher),this.svgElement.removeChild(this.marquee))}this.dragElement=null;this.whichRotator=-1;this.state=xiNET.Controller.MOUSE_UP;this.lastMouseUp=e;return!1};
xiNET.Controller.prototype.updateMarquee=function(b,e){var d=this.dragStart,f=[d.x,e.x].sort(sortByNumber),d=[d.y,e.y].sort(sortByNumber);b.setAttribute("x",f[0]);b.setAttribute("y",d[0]);b.setAttribute("width",f[1]-f[0]);b.setAttribute("height",d[1]-d[0])};function sortByNumber(b,e){return b-e}
xiNET.Controller.prototype.mouseWheel=function(b){this.preventDefaultsAndStopPropagation(b);var e=1+(b.wheelDelta?b.wheelDelta/3600:b.detail/-90),d=this.container;b=this.getEventPoint(b);b=this.mouseToSVG(b.x,b.y);e=this.svgElement.createSVGMatrix().translate(b.x,b.y).scale(e).translate(-b.x,-b.y);xiNET.setCTM(d,d.getCTM().multiply(e));this.scale();return!1};xiNET.Controller.prototype.clearSelection=function(){for(var b=this.selected.values(),e=b.length,d=0;d<e;d++)b[d].setSelected(!1)};
xiNET.Controller.prototype.getEventPoint=function(b){var e=this.svgElement.createSVGPoint(),d=this.svgElement.parentNode,f=0,h=0;do f+=d.offsetTop||0,h+=d.offsetLeft||0,d=d.offsetParent;while(d);f+=getScrollTop();e.x=b.pageX-h;e.y=b.pageY-f;return e};function getScrollTop(){if("undefined"!=typeof pageYOffset)return pageYOffset;var b=document.body,e=document.documentElement,e=e.clientHeight?e:b;return e.scrollTop}
xiNET.Controller.prototype.mouseToSVG=function(b,e){var d=this.svgElement.createSVGPoint();d.x=b;d.y=e;return d=d.matrixTransform(this.container.getCTM().inverse())};xiNET.Controller.prototype.preventDefaultsAndStopPropagation=function(b){b.stopPropagation&&b.stopPropagation();null!=b.cancelBubble&&(b.cancelBubble=!0);b.preventDefault&&b.preventDefault()};xiNET.setCTM=function(b,e){b.setAttribute("transform","matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")")};xiNET.Controller.prototype.autoLayout=function(b,e){function d(b){function d(b){e.push(b.id);for(var f=0;f<b.proteinLinks.values().length;f++){var h=b.proteinLinks.values()[f];if(!0===h.check()&&(h=h.getOtherEnd(b),-1===e.indexOf(h.id))){d(h);break}}}var e=[];d(function(){for(var d=b.nodes.values(),e=d.length,f=0;f<e;f++)if(2>d[f].countExternalLinks())return d[f];console.error("missed linear subgraph start");return null}());return e}function f(b){return b*(2*h.maxBlobRadius+Protein.LABELMAXLENGTH)-
h.maxBlobRadius}"undefined"!==typeof this.force&&null!=this.force&&this.force.stop();b||(b=this.svgElement.parentNode.clientWidth);e||(e=this.svgElement.parentNode.clientHeight);var h=this;this.subgraphs.length=0;for(var m=this.proteins.values(),n=m.length,p=0;p<n;p++)m[p].subgraph=null;for(p=0;p<n;p++)m[p].getSubgraph();this.subgraphs.sort(function(b,d){return b.nodes.values().length-d.nodes.values().length});if(1===n){var q=m[0];q.setPosition(b/2,e/4*3)}else if(2===n)q=m[0],q.setPosition(b/2,.3*
e),q.setAllLineCoordinates(),m=m[1],m.setPosition(b/2,.6*e),m.setAllLineCoordinates();else{for(var t=[],m=[],p=this.subgraphs.length,q=0;q<p;q++){var u=this.subgraphs[q],w=u.nodes.values(),z=w.length,y=!0;if(1===z)y=!0;else{for(var G=!1,E=0;E<z;E++)if(2<w[E].countExternalLinks()){y=!1;break}else 2>w[E].countExternalLinks()&&(G=!0);G||(y=!1)}!0===y?t.push(u):m.push(u)}var G=y=u=0,M=-1;if(0<t.length)for(u++,q=0;q<t.length;q++)for(w=t[q].nodes.keys(),z=w.length,2<z&&(w=d(t[q])),E=0;E<z;E++){var p=this.proteins.get(w[E]),
P,L;!0===p.isParked?(G++,P=f(M),L=G*h.maxBlobRadius,L>e&&(M--,G=1,P=f(M),L=G*h.maxBlobRadius)):(y++,(60>n||1<z)&&y++,P=f(u),L=y*h.maxBlobRadius,(y+2*(z-1-E))*h.maxBlobRadius+this.maxBlobRadius>e&&(u++,y=1,60>n&&y++,P=f(u),L=y*h.maxBlobRadius));p.setPosition(P,L);p.setAllLineCoordinates()}this.layoutXOffset=f(u+.5);if("undefined"===typeof this.force||null==this.force){n={NAME:"ALL",children:[]};for(q=0;q<m.length;q++)for(w=m[q].nodes.values(),z=w.length,E=0;E<z;E++)u=this.proteins.get(w[E].id),n.children.push(u);
w=d3.layout.pack().size([b-this.layoutXOffset,e]).value(function(b){return b.size}).sort(function(b,d){return d.proteinLinks.keys().length-b.proteinLinks.keys().length}).nodes(n);z=w.length;for(E=1;E<z;E++)n=w[E],q=this.proteins.get(n.id),q.setPosition(n.x+this.layoutXOffset,n.y),q.setAllLineCoordinates(!1)}t=b-this.layoutXOffset;200>t&&(t=b);n={nodes:[],links:[]};p={};for(q=y=0;q<m.length;q++)for(w=m[q].nodes.values(),z=w.length,E=0;E<z;E++)u=this.proteins.get(w[E].id),p[u.id]=y,y++,G={},G.id=u.id,
G.x=u.x-this.layoutXOffset,G.y=u.y,G.px=u.x-this.layoutXOffset,G.py=u.y,n.nodes.push(G);for(q=0;q<m.length;q++)for(w=m[q].links.values(),E=w.length,u=0;u<E;u++)y=w[u],G=p[y.fromProtein.id],M=p[y.toProtein.id],G!==M&&("undefined"!==typeof G&&"undefined"!==typeof M?(P={},P.source=G,P.target=M,P.id=y.id,n.links.push(P)):alert("NOT RIGHT"));m=Math.sqrt(n.nodes.length/(t*e));this.force=d3.layout.force().nodes(n.nodes).links(n.links).gravity(85*m).linkDistance(60).charge(-30/m).size([t,e]);z=this.force.nodes().length;
this.force.links();this.force.on("tick",function(b){b=h.force.nodes();for(var d=0;d<z;d++){var e=b[d],f=h.proteins.get(e.id);f.setPosition(e.x+h.layoutXOffset,e.y);f.setAllLineCoordinates()}});this.force.start()}};xiNET.Controller.prototype.checkLinks=function(){if(this.initComplete){for(var b=this.svgElement.suspendRedraw(5E3),e=this.proteinLinks.values(),d=e.length,f=0;f<d;f++)e[f].check();this.svgElement.unsuspendRedraw(b)}};
xiNET.Controller.prototype.scale=function(){var b=this.svgElement.suspendRedraw(5E3);if(this.initComplete){this.z=this.container.getScreenCTM().inverse().a;for(var e=this.proteins.values(),d=e.length,f=0;f<d;f++){var h=e[f];h.setPosition(h.x,h.y);0!==h.form&&h.setAllLineCoordinates()}e=this.proteinLinks.values();d=e.length;for(f=0;f<d;f++)if(h=e[f],h.fromProtein!==h.toProtein&&null!==h.toProtein&&!h.fromProtein.isParked&&!h.toProtein.isParked)if(0===h.fromProtein.form&&0===h.toProtein.form)h.line.setAttribute("stroke-width",
this.z*xiNET.linkWidth),h.highlightLine.setAttribute("stroke-width",10*this.z),h.fatLine.setAttribute("stroke-width",this.z*h.w),h.ambig&&h.dashedLine(!0);else for(var m=h.residueLinks.keys().length,n=0;n<m;n++){var p=h.residueLinks.values()[n];p.check()&&(h.residueLinks.values()[n].line.setAttribute("stroke-width",this.z*xiNET.linkWidth),h.residueLinks.values()[n].highlightLine.setAttribute("stroke-width",10*this.z),p.ambig&&p.dashedLine(!0))}}this.svgElement.unsuspendRedraw(b)};xiNET.Controller.prototype.showTooltip=function(b){var e=b.x;b=b.y;this.tooltip.setAttribute("x",e+22);this.tooltip.setAttribute("y",b+47);this.tooltip_bg.setAttributeNS(null,"x",e+16);this.tooltip_bg.setAttributeNS(null,"y",b+28);this.tooltip_subBg.setAttributeNS(null,"x",e+16);this.tooltip_subBg.setAttributeNS(null,"y",b+28)};
xiNET.Controller.prototype.setTooltip=function(b,e){"undefined"===typeof b&&(b="undefined");this.tooltip.firstChild.data=b.toString().replace(/&(quot);/g,'"');this.tooltip.setAttribute("visibility","visible");var d=this.tooltip.getComputedTextLength();this.tooltip_bg.setAttributeNS(null,"width",d+16);this.tooltip_subBg.setAttributeNS(null,"width",d+16);"undefined"!==typeof e&&null!=e?(this.tooltip_bg.setAttribute("fill",e),this.tooltip_bg.setAttribute("stroke",e),this.tooltip_bg.setAttribute("fill-opacity",
"0.5")):(this.tooltip_bg.setAttribute("fill","white"),this.tooltip_bg.setAttribute("stroke","grey"));this.tooltip_bg.setAttribute("height",28);this.tooltip_subBg.setAttribute("height",28);this.tooltip.setAttribute("visibility","visible");this.tooltip_bg.setAttributeNS(null,"visibility","visible");this.tooltip_subBg.setAttributeNS(null,"visibility","visible")};
xiNET.Controller.prototype.hideTooltip=function(b){this.tooltip.setAttributeNS(null,"visibility","hidden");this.tooltip_bg.setAttributeNS(null,"visibility","hidden");this.tooltip_subBg.setAttributeNS(null,"visibility","hidden")};function Match(b,e,d,f,h,m,n,p,q,t,u,w,z,y,G){function E(b){if(b)if(b=b.toString().trim(),""!==b&&"-"!==b&&"n/a"!==b){P.lastIndex=0;b=b.replace(P,"");L.lastIndex=0;b=b.split(L);for(var d=b.length,e=0;e<d;e++)b[e]=b[e].trim()}else b=null;else b=null;return b}function M(b){if(b)if(b=b.toString().trim(),""!==b&&"-"!==b&&"n/a"!==b){P.lastIndex=0;b=b.toString().replace(P,"");L.lastIndex=0;b=b.split(L);for(var d=b.length,e=0;e<d;e++){var f=parseInt(b[e]);isNaN(f)?console.debug("Absurd non-numerical position. Match id:"+
this.id+". So-called 'position':"+b[e]):b[e]=f}}else b=null;else b=null;return b}this.id=h.toString().trim();this.residueLinks=[];this.xlv=n;this.dataSetId=G;"undefined"!=typeof m&&m&&(m=parseFloat(m),isNaN(m)||(this.score=m,null==this.xlv.scores&&(this.xlv.scores={min:this.score,max:this.score}),this.score>this.xlv.scores.max?this.xlv.scores.max=this.score:this.score<this.xlv.scores.min&&(this.xlv.scores.min=this.score)));"undefined"!=typeof w&&w&&(w=w.trim(),""!==w&&(this.autovalidated="t"==w||
"true"==w||!0===w?!0:!1,this.xlv.autoValidatedFound=!0));"undefined"!=typeof z&&z&&(z=z.trim(),""!==z&&(this.validated=z,this.xlv.manualValidatedFound=!0));var P=/(['"])/g,L=/[;,]/g;h=/[^A-Z]/g;b=E(b);d=E(d);"undefined"!=typeof t&&null!=t?(t=t.trim())?(h.lastindex=0,this.pepSeq1=t.replace(h,"")):this.pepSeq1=null:this.pepSeq1=null;"undefined"!==typeof u&&null!=u?(u=u.trim())?(h.lastindex=0,this.pepSeq2=u.replace(h,"")):this.pepSeq2=null:this.pepSeq2=null;e=M(e);f=M(f);p=M(p);q=M(q);this.type=null===
d&&null===f&&null===q?0:null===d?1:2;var B,A,I,N;if(0===this.type)if(null!==e)for(t=0;t<e.length;t++)B=t,B>=b.length&&(B=b.length-1),B=b[B],I=e[t],I+=p[0]-1,this.associateWithLink(B,null,I,null,e[t],this.pepSeq1.length,null,null);else for(t=0;t<p.length;t++)B=t,B>=b.length&&(B=b.length-1),B=b[B],I=p[t],this.associateWithLink(B,null,I,null,null,null,null,null);else if(1===this.type)if(null!==e)for(t=0;t<e.length;t++)B=t,B>=b.length&&(B=b.length-1),B=b[B],I=e[t],N=f?f[t]:e[t],null!==p&&(I+=p[0]-1),
null!==q&&(N+=q[0]-1),this.associateWithLink(B,null,I,N,e[t],this.pepSeq1.length,null,null);else for(t=0;t<p.length;t++)B=t,B>=b.length&&(B=b.length-1),B=b[B],I=p[0],N=q[0],this.associateWithLink(B,null,I,N,null,null,null,null);else if(null!==e){if(null!==e)for(t=0;t<e.length;t++)for(u=0;u<f.length;u++)B=t,A=u,B>=b.length&&(B=b.length-1),A>=d.length&&(A=d.length-1),B=b[B],A=d[A],I=e[t]-0,N=f[u]-0,null!==p&&(I+=p-1),null!==q&&(N+=q-1),this.associateWithLink(B,A,I,N,e[t]-0,this.pepSeq1.length,f[u],
this.pepSeq2.length)}else for(t=0;t<p.length;t++)for(u=0;u<q.length;u++)B=t,A=u,B>=b.length&&(B=b.length-1),A>=d.length&&(A=d.length-1),B=b[B],A=d[A],I=p[t]-0,N=q[u]-0,this.associateWithLink(B,A,I,N,null,null,null,null);this.hd=!1;this.overlap=[];B===A&&(this.pepSeq1&&this.pepSeq2?(B=e[0],A=f[0],N=B+(this.pepSeq1.length-1),I=A+(this.pepSeq2.length-1),B>=A&&B<=I?(this.hd=!0,this.overlap[0]=B-1,this.overlap[1]=I):A>=B&&A<=N&&(this.hd=!0,this.overlap[0]=A-1,this.overlap[1]=N)):I===N&&(this.hd=!0,this.overlap[0]=
I-1,this.overlap[1]=N));this.protein1=b;this.pepPos1=e;this.linkPos1=p;this.protein2=d;this.pepPos2=f;this.linkPos2=q}
Match.prototype.associateWithLink=function(b,e,d,f,h,m,n,p){var q,t,u;null===e?(t=this.xlv.proteins.get(b),null===f?(q=""+b+"-null",u=null):(q=""+b+"-"+b,u=t)):b<=e?(q=""+b+"-"+e,t=this.xlv.proteins.get(b),u=null!==e?this.xlv.proteins.get(e):null):(q=""+e+"-"+b,t=this.xlv.proteins.get(e),u=this.xlv.proteins.get(b));var w=this.xlv.proteinLinks.get(q);void 0===w&&(void 0!==t&&void 0!==u||alert("Something has gone wrong; a link has been added before a protein it links to. "+b+"-"+e),w=new ProteinLink(q,
t,u,this.xlv),this.xlv.proteinLinks.set(q,w),t.addLink(w),null!==u&&u.addLink(w));q=!1;b===e||null===e?d-0<f-0||null===f?t=d+"-"+f:(t=f+"-"+d,q=!0):b<e?t=d+"-"+f:(t=f+"-"+d,q=!0);u=w.residueLinks.get(t);void 0===u&&(u=b===e?d-0<f-0||"n/a"===f?new ResidueLink(t,w,d,f,this.xlv):new ResidueLink(t,w,f,d,this.xlv):b==w.fromProtein.id?new ResidueLink(t,w,d,f,this.xlv):new ResidueLink(t,w,f,d,this.xlv),w.residueLinks.set(t,u),w.residueLinks.keys().length>ProteinLink.maxNoResidueLinks&&(ProteinLink.maxNoResidueLinks=
w.residueLinks.keys().length));if("undefined"===typeof u.matches||null==u.matches)u.matches=[];!1===q?u.matches.push([this,h,m,n,p]):u.matches.push([this,n,p,h,m]);this.residueLinks.push(u)};Match.prototype.meetsFilterCriteria=function(){return this.xlv.ambigHidden&&this.isAmbig()?!1:"function"==typeof this.xlv.filter?this.xlv.filter(this):"undefined"!==typeof this.xlv.cutOff&&"undefined"!==typeof this.score?this.score>=this.xlv.cutOff?!0:!1:!0};
Match.prototype.isAmbig=function(){return 1<this.residueLinks.length?!0:!1};
Match.prototype.toTableRow=function(){var b;b="<tr>"+("<td><p>"+this.id+"</p></td>");b+="<td><p>"+this.protein1+"</p></td>";b+="<td><p>"+this.pepPos1+"</p></td>";b+="<td><p>"+this.pepSeq1+"</p></td>";b+="<td><p>"+this.linkPos1+"</p></td>";b+="<td><p>"+this.protein2+"</p></td>";b+="<td><p>"+this.pepPos2+"</p></td>";b+="<td><p>"+this.pepSeq2+"</p></td>";b+="<td><p>"+this.linkPos2+"</p></td>";b+="<td><p>"+("undefined"!==typeof this.score?this.score.toFixed(4):"undefined")+"</p></td>";!0===this.xlv.autoValidatedFound&&
(b+="<td><p>"+this.autovalidated+"</p></td>");!0===this.xlv.manualValidatedFound&&(b+="<td><p>"+this.validated+"</p></td>");return b+"</tr>"};xiNET.Link=function(){};xiNET.Link.prototype.mouseDown=function(b){this.xlv.preventDefaultsAndStopPropagation(b);void 0!==this.xlv.force&&this.xlv.force.stop();this.xlv.dragElement=this;this.xlv.clearSelection();this.setSelected(!0);b=this.xlv.getEventPoint(b);this.xlv.dragStart=this.xlv.mouseToSVG(b.x,b.y);return!1};xiNET.Link.prototype.mouseOver=function(b){this.xlv.preventDefaultsAndStopPropagation(b);this.showHighlight(!0,!0);this.xlv.setTooltip(this.tooltip);return!1};
xiNET.Link.prototype.mouseOut=function(b){this.xlv.preventDefaultsAndStopPropagation(b);this.showHighlight(!1,!0);this.xlv.hideTooltip();return!1};xiNET.Link.prototype.touchStart=function(b){this.xlv.preventDefaultsAndStopPropagation(b);void 0!==this.xlv.force&&this.xlv.force.stop();this.xlv.dragElement=this;this.xlv.clearSelection();this.setSelected(!0);b=this.xlv.getTouchEventPoint(b);this.xlv.dragStart=this.xlv.mouseToSVG(b.x,b.y);return!1};Protein.STICKHEIGHT=20;Protein.MAXSIZE=0;Protein.UNITS_PER_RESIDUE=1;Protein.LABELMAXLENGTH=60;Protein.labelY=-5;Protein.domainColours=d3.scale.ordinal().range(colorbrewer.Paired[5]);Protein.transitionTime=650;function Protein(b,e,d,f){this.id=b;this.xlv=e;this.accession=d;this.name=f;this.tooltip=this.name+" ["+this.id+"] "+this.accession}
Protein.prototype.initProtein=function(b,e,d,f){null==this.name&&(this.name=e);this.description=d;this.tooltip=this.name+" ["+this.id+"]";"undefined"!==typeof this.description&&""!=this.description&&null!==this.description&&(this.tooltip+=" "+this.description);/\d/.test(b)&&(this.labeling="",-1!==b.indexOf("K4")&&(this.labeling+="K4"),-1!==b.indexOf("K6")&&(this.labeling+="K6"),-1!==b.indexOf("K8")&&(this.labeling+="K8"),-1!==b.indexOf("K10")&&(this.labeling+="R4"),-1!==b.indexOf("R6")&&(this.labeling+=
"R6"),-1!==b.indexOf("R8")&&(this.labeling+="R8"),-1!==b.indexOf("R10")&&(this.labeling+="R10"));this.sequence=b.replace(/[^A-Z]/g,"");this.size="undefined"!=typeof f?f:this.sequence.length;Protein.MAXSIZE<this.size&&(Protein.MAXSIZE=this.size);this.proteinLinks=d3.map();this.y=this.x=this.internalLink=null;this.previousRotation=this.rotation=0;this.stickZoom=1;this.form=0;this.isSelected=this.isFlipped=this.isParked=!1;this.customAnnotations=null;this.lowerRotator=new Rotator(this,0,this.xlv);this.upperRotator=
new Rotator(this,1,this.xlv);b=this.getBlobRadius();this.lowerGroup=document.createElementNS(xiNET.svgns,"g");this.lowerGroup.setAttribute("class","protein lowerGroup");this.highlight=document.createElementNS(xiNET.svgns,"rect");void 0!==xiNET.highlightColour&&this.highlight.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlight.setAttribute("stroke-width","5");this.highlight.setAttribute("fill","none");d3.select(this.highlight).attr("stroke-opacity",0).attr("width",2*b+5).attr("height",
2*b+5).attr("x",-b-2.5).attr("y",-b-2.5).attr("rx",b+2.5).attr("ry",b+2.5);this.lowerGroup.appendChild(this.highlight);this.rectDomains=document.createElementNS(xiNET.svgns,"g");this.rectDomains.setAttribute("opacity","0");this.lowerGroup.appendChild(this.rectDomains);this.peptides=document.createElementNS(xiNET.svgns,"g");this.lowerGroup.appendChild(this.peptides);this.upperGroup=document.createElementNS(xiNET.svgns,"g");this.upperGroup.setAttribute("class","protein upperGroup");this.intraLinksHighlights=
document.createElementNS(xiNET.svgns,"g");this.intraLinks=document.createElementNS(xiNET.svgns,"g");this.upperGroup.appendChild(this.intraLinksHighlights);this.upperGroup.appendChild(this.intraLinks);this.labelSVG=document.createElementNS(xiNET.svgns,"text");this.labelSVG.setAttribute("text-anchor","end");this.labelSVG.setAttribute("fill",this.isDecoy()?"#FB8072":"black");this.labelSVG.setAttribute("x",0);this.labelSVG.setAttribute("y",10);this.labelSVG.setAttribute("class","protein xlv_text proteinLabel");
this.labelSVG.setAttribute("font-family","Arial");this.labelSVG.setAttribute("font-size","16");null!==this.name&""!==this.name?this.labelText=this.name:null!=d&""!==d?this.name=this.labelText=d:this.labelText=null!=this.accession&""!==this.accession?this.accession:this.id;25<this.labelText.length&&(this.labelText=this.labelText.substr(0,16)+"...");"undefined"!==typeof this.labeling&&(this.labelText="["+this.labeling+"] "+this.labelText);this.labelTextNode=document.createTextNode(this.labelText);this.labelSVG.appendChild(this.labelTextNode);
d3.select(this.labelSVG).attr("transform","translate( -"+(b+5)+" "+Protein.labelY+")");this.upperGroup.appendChild(this.labelSVG);this.ticks=document.createElementNS(xiNET.svgns,"g");this.outline=document.createElementNS(xiNET.svgns,"rect");this.outline.setAttribute("stroke","black");this.outline.setAttribute("stroke-width","1");d3.select(this.outline).attr("stroke-opacity",1).attr("fill-opacity",1).attr("fill","#ffffff").attr("width",2*b).attr("height",2*b).attr("x",-b).attr("y",-b).attr("rx",b).attr("ry",
b);this.upperGroup.appendChild(this.outline);this.circDomains=document.createElementNS(xiNET.svgns,"g");this.circDomains.setAttribute("opacity",1);this.upperGroup.appendChild(this.circDomains);this.scaleLabels=[];var h=this;this.upperGroup.onmousedown=function(b){h.mouseDown(b)};this.upperGroup.onmouseover=function(b){h.mouseOver(b)};this.upperGroup.onmouseout=function(b){h.mouseOut(b)};this.upperGroup.ontouchstart=function(b){h.xlv.message("protein touch start");h.touchStart(b)};this.isSelected=
!1};Protein.prototype.mouseDown=function(b){this.xlv.preventDefaultsAndStopPropagation(b);void 0!==this.xlv.force&&this.xlv.force.stop();this.xlv.dragElement=this;this.xlv.clearSelection();this.setSelected(!0);b=this.xlv.getEventPoint(b);this.xlv.dragStart=this.xlv.mouseToSVG(b.x,b.y);this.printAnnotationInfo();return!1};
Protein.prototype.touchStart=function(b){this.xlv.preventDefaultsAndStopPropagation(b);void 0!==this.xlv.force&&this.xlv.force.stop();this.xlv.dragElement=this;this.xlv.clearSelection();this.setSelected(!0);b=this.xlv.getTouchEventPoint(b);this.xlv.dragStart=this.xlv.mouseToSVG(b.x,b.y);this.printAnnotationInfo();return!1};Protein.prototype.mouseOver=function(b){this.xlv.preventDefaultsAndStopPropagation(b);this.showHighlight(!0);this.xlv.setTooltip(this.tooltip);return!1};
Protein.prototype.mouseOut=function(b){this.xlv.preventDefaultsAndStopPropagation(b);this.showHighlight(!1);this.xlv.hideTooltip();return!1};Protein.prototype.getBlobRadius=function(){return Math.sqrt(this.size/Math.PI)};Protein.prototype.isDecoy=function(){return-1===this.name.indexOf("DECOY_")&&"REV"!==this.name?!1:!0};Protein.prototype.toJSON=function(){return{x:this.x,y:this.y,rot:this.rotation,form:this.form,stickZoom:this.stickZoom,parked:this.isParked,flipped:this.isFlipped}};
Protein.prototype.addLink=function(b){this.proteinLinks.has(b.id)||this.proteinLinks.set(b.id,b);b.intra&&(this.internalLink=b);null===b.toProtein&&(this.linkerModifications=b)};Protein.prototype.showHighlight=function(b){!0===b?(this.highlight.setAttribute("stroke",xiNET.highlightColour.toRGB()),this.highlight.setAttribute("stroke-opacity","1")):(0==this.isSelected&&this.highlight.setAttribute("stroke-opacity","0"),this.highlight.setAttribute("stroke",xiNET.selectedColour.toRGB()))};
Protein.prototype.setSelected=function(b){b&&!1===this.isSelected?(this.xlv.selected.set(this.id,this),this.isSelected=!0,this.highlight.setAttribute("stroke",xiNET.selectedColour.toRGB()),this.highlight.setAttribute("stroke-opacity","1")):!1===b&&!0===this.isSelected&&(this.xlv.selected.remove(this.id),this.isSelected=!1,this.highlight.setAttribute("stroke-opacity","0"),this.highlight.setAttribute("stroke",xiNET.highlightColour.toRGB()))};
Protein.prototype.setRotation=function(b){this.rotation=b%360;0>this.rotation&&(this.rotation+=360);this.upperGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+") rotate("+this.rotation+")");this.lowerGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+") rotate("+this.rotation+")");var e=this.xlv.svgElement;b=this.labelSVG.getAttribute("transform");var d=d3.transform(b);b=this.scaleLabels.length;if(90<=this.rotation&&270>this.rotation){if(d=
e.createSVGMatrix().translate(Math.abs(d.translate[0]),-Protein.labelY).rotate(180,0,0),this.labelSVG.transform.baseVal.initialize(e.createSVGTransformFromMatrix(d)),1===this.form){for(e=0;e<b;e++)this.scaleLabels[e].setAttribute("transform","scale(-1,1)");this.ticks.setAttribute("transform","scale(1,-1)")}}else if(d=e.createSVGMatrix().translate(-Math.abs(d.translate[0]),Protein.labelY),this.labelSVG.transform.baseVal.initialize(e.createSVGTransformFromMatrix(d)),1===this.form){for(e=0;e<b;e++)this.scaleLabels[e].setAttribute("transform",
"scale(1,1)");this.ticks.setAttribute("transform","scale(1,1)")}};
Protein.prototype.setPosition=function(b,e){this.x=b;this.y=e;1===this.form&&!1===this.isParked?(this.upperGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+") rotate("+this.rotation+")"),this.lowerGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+") rotate("+this.rotation+")")):(this.upperGroup.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+") "),this.lowerGroup.setAttribute("transform","translate("+
this.x+" "+this.y+") scale("+this.xlv.z+") "),null!=this.internalLink&&("undefined"!==typeof this.internalLink.fatLine&&this.internalLink.fatLine.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+")"),this.internalLink.line.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+")"),this.internalLink.highlightLine.setAttribute("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+")")))};Protein.rotOffset=17.5;Protein.minXDist=30;
Protein.prototype.switchStickScale=function(b){this.isParked&&this.toggleParked();if(0===this.form)this.toStick();else if(8<Protein.UNITS_PER_RESIDUE*this.stickZoom)this.stickZoom=.5,this.setPosition(b.x,b.y);else{this.stickZoom*=3;var e=this.x-b.x;b=this.y-b.y;if(0===this.rotation||180===this.rotation)b=0;this.setPosition(this.x+2*e,this.y+2*b)}this.scale();this.setAllLineCoordinates()};
Protein.prototype.scale=function(){var b=this.size*Protein.UNITS_PER_RESIDUE*this.stickZoom;if(1===this.form){var e=d3.transform(this.labelSVG.getAttribute("transform")),e=this.xlv.svgElement.createSVGMatrix().rotate(e.rotate).translate(-(this.size/2*Protein.UNITS_PER_RESIDUE*this.stickZoom+10),Protein.labelY);this.labelSVG.transform.baseVal.initialize(this.xlv.svgElement.createSVGTransformFromMatrix(e));d3.select(this.rectDomains).attr("transform","scale("+this.stickZoom+", 1)");d3.select(this.circDomains).attr("transform",
"scale("+this.stickZoom+", 1)");d3.select(this.peptides).attr("transform","scale("+this.stickZoom+", 1)");d3.select(this.outline).attr("width",b).attr("x",this.getResXwithStickZoom(.5));d3.select(this.highlight).attr("width",b+5).attr("x",this.getResXwithStickZoom(.5)-2.5);this.lowerRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(.5)-Protein.rotOffset)+" 0)");this.upperRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(this.size-0+.5)+Protein.rotOffset)+
" 0)");if(null!=this.internalLink)for(var e=this.internalLink.residueLinks.values(),d=e.length,f=0;f<d;f++){var h=e[f];h.shown&&(b=this.getResidueLinkPath(h),d3.select(h.line).attr("d",b),d3.select(h.highlightLine).attr("d",b))}if(null!=this.linkerModifications)for(e=this.linkerModifications.residueLinks.values(),d=e.length,f=0;f<d;f++)h=e[f],h.shown&&(b=this.getResidueLinkPath(h),d3.select(h.line).attr("d",b),d3.select(h.highlightLine).attr("d",b));this.setScaleGroup();this.setRotation(this.rotation)}};
Protein.prototype.setScaleGroup=function(){function b(b,d,e){var f=document.createElementNS(xiNET.svgns,"g");f.setAttribute("transform","translate("+e+" 0)");e=document.createElementNS(xiNET.svgns,"text");e.setAttribute("class","protein xlv_text proteinLabel");e.setAttribute("font-family","'Courier New', monospace");e.setAttribute("font-size","14");e.setAttribute("text-anchor","middle");e.setAttribute("x",0);e.setAttribute("y",Protein.STICKHEIGHT+4);e.appendChild(document.createTextNode(d));f.appendChild(e);
b.scaleLabels.push(e);b.ticks.appendChild(f)}function e(b,d){var e=document.createElementNS(xiNET.svgns,"line");e.setAttribute("x1",d);e.setAttribute("y1",5);e.setAttribute("x2",d);e.setAttribute("y2",10);e.setAttribute("stroke","black");b.ticks.appendChild(e)}this.xlv.emptyElement(this.ticks);this.upperGroup.appendChild(this.ticks);this.scaleLabels=[];for(var d=Protein.UNITS_PER_RESIDUE*this.stickZoom,f=-1,h=this.getResXwithStickZoom(this.size),m=1;m<=this.size;m++){if(1===m||0===m%100&&200*d>Protein.minXDist||
0===m%10&&20*d>Protein.minXDist){var n=this.getResXwithStickZoom(m);(8<=d||1!==m)&&e(this,n);f=(f+1)%2;0===f&&n+Protein.minXDist<h&&b(this,m,n)}if(8<d){n=document.createElementNS(xiNET.svgns,"g");n.setAttribute("transform","translate("+this.getResXwithStickZoom(m)+" 0)");var p=document.createElementNS(xiNET.svgns,"text");p.setAttribute("font-family","'Courier New', monospace");p.setAttribute("font-size","10px");p.setAttribute("text-anchor","middle");p.setAttribute("x",0);p.setAttribute("y",3);p.appendChild(document.createTextNode(this.sequence[m-
1]));n.appendChild(p);this.scaleLabels.push(p);this.ticks.appendChild(n)}}b(this,this.size,h);8<d&&e(this,h)};Protein.prototype.toggleFlipped=function(){(this.isFlipped=!this.isFlipped)?(this.intraLinks.setAttribute("transform","scale (1 -1)"),this.intraLinksHighlights.setAttribute("transform","scale (1 -1)")):(this.intraLinks.setAttribute("transform","scale (1 1)"),this.intraLinksHighlights.setAttribute("transform","scale (1 1)"))};
Protein.prototype.setParked=function(b,e){!0!==this.busy&&(!0===this.isParked&&0==b?(this.isParked=!1,0===this.form?this.toBlob(e):this.toStick(),this.scale(),this.setAllLineCoordinates()):!1===this.isParked&&1==b&&(this.isParked=!0,this.toParked(e)))};Protein.prototype.setForm=function(b,e){!0!==this.busy&&(this.isParked?this.setParked(!1):1==b?this.toStick():this.toBlob(e))};
Protein.prototype.toBlob=function(b){1===this.form?(this.toCircle(b),b=this.getBlobRadius(),d3.select(this.outline).transition().attr("stroke-opacity",1).attr("fill-opacity",1).attr("fill","#ffffff").attr("x",-b).attr("y",-b).attr("width",2*b).attr("height",2*b).attr("rx",b).attr("ry",b).duration(Protein.transitionTime),d3.select(this.rectDomains).transition().attr("opacity",0).attr("transform","scale(1, 1)").duration(Protein.transitionTime)):(d3.select(this.outline).transition().attr("stroke-opacity",
1).attr("fill-opacity",1).attr("fill","#ffffff").duration(Protein.transitionTime),this.checkLinks());d3.select(this.circDomains).transition().attr("opacity",1).attr("transform","scale(1, 1)").duration(Protein.transitionTime)};
Protein.prototype.toCircle=function(b){function e(b){var d=d3.transform(q.labelSVG.getAttribute("transform")),d=q.xlv.svgElement.createSVGMatrix().rotate(d.rotate).translate(m(M(b)),Protein.labelY);q.labelSVG.transform.baseVal.initialize(q.xlv.svgElement.createSVGTransformFromMatrix(d));null!==n&&q.setPosition(n(M(b)),p(M(b)));d=h(M(b));q.setRotation(d);q.stickZoom=f(M(b));q.setAllLineCoordinates();if(1===b){b=q.proteinLinks.values();for(var d=b.length,t=0;t<d;t++){var u=b[t];if(null===u.toProtein||
u.getFromProtein()===q&&0===u.getToProtein().form||u.getToProtein()===q&&0===u.getFromProtein().form||u.getToProtein()==u.getFromProtein())for(var u=u.residueLinks.values(),w=u.length,y=0;y<w;y++)u[y].hide()}q.form=0;q.checkLinks();q.stickZoom=G;q.rotation=E;q.busy=!1;return!0}return 1<b?e(1):!1}this.busy=!0;this.removePeptides();this.upperGroup.removeChild(this.lowerRotator.svg);this.upperGroup.removeChild(this.upperRotator.svg);var d=this.getBlobRadius(),f=d3.interpolate(this.stickZoom,0),h=d3.interpolate(180<
this.rotation?this.rotation-360:this.rotation,0),m=d3.interpolate(-(this.size/2*Protein.UNITS_PER_RESIDUE*this.stickZoom+10),-(d+5)),n=null,p=null;"undefined"!==typeof b&&null!==b&&(n=d3.interpolate(this.x,b.x),p=d3.interpolate(this.y,b.y));var q=this;d3.select(this.ticks).transition().attr("opacity",0).duration(Protein.transitionTime/4).each("end",function(){q.upperGroup.removeChild(q.ticks)});d3.select(this.highlight).transition().attr("width",2*d+5).attr("height",2*d+5).attr("x",-d-2.5).attr("y",
-d-2.5).attr("rx",d+2.5).attr("ry",d+2.5).duration(Protein.transitionTime);d3.select(this.upperGroup).transition().attr("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+") rotate("+this.rotation+")").duration(Protein.transitionTime);d3.select(this.lowerGroup).transition().attr("transform","translate("+this.x+" "+this.y+") scale("+this.xlv.z+") rotate("+this.rotation+")").duration(Protein.transitionTime);if(null!=this.internalLink)for(var d=this.internalLink.residueLinks.values(),t=
d.length,u=0;u<t;u++){var w=d[u];!0===w.intra&&w.shown&&(b=d3.select(w.line),b.attr("d",this.getResidueLinkPath(w)),b.transition().attr("d",this.getAggregateSelfLinkPath()).duration(Protein.transitionTime),b=d3.select(w.highlightLine),b.attr("d",this.getResidueLinkPath(w)),b.transition().attr("d",this.getAggregateSelfLinkPath()).duration(Protein.transitionTime))}if(null!=this.linkerModifications)for(d=this.linkerModifications.residueLinks.values(),t=d.length,u=0;u<t;u++)b=d[u],b.shown&&(b=d3.select(b.line),
b.attr("fill","none"),b.attr("d","M 0,0 L 0,0"));q=this;if("undefined"!==typeof this.annotations){var z=this.annotations,y=z.length;for(b=0;b<y;b++)d=z[b].anno,t=z[b].rect,d3.select(z[b].pieSlice).transition().attr("d",this.getAnnotationPieSliceApproximatePath(d)).duration(Protein.transitionTime).each("end",function(){for(var b=0;b<y;b++){var d=z[b];this===d.pieSlice&&d3.select(this).attr("d",q.getAnnotationPieSliceArcPath(d.anno))}}),d3.select(t).transition().attr("d",this.getAnnotationPieSliceApproximatePath(d)).duration(Protein.transitionTime)}var G=
this.stickZoom,E=this.rotation,M=d3.ease("cubic-in-out");d3.timer(function(b){return e(b/Protein.transitionTime)})};
Protein.prototype.toParked=function(b){for(var e=this.proteinLinks.values().length,d=0;d<e;d++){var f=this.proteinLinks.values()[d];f.hide();for(var f=f.residueLinks.values(),h=f.length,m=0;m<h;m++)f[m].hide()}1===this.form?(this.toCircle(b),b=this.getBlobRadius(),d3.select(this.outline).transition().attr("stroke-opacity",0).attr("fill-opacity",1).attr("fill","#EEEEEE").attr("x",-b).attr("y",-b).attr("width",2*b).attr("height",2*b).attr("rx",b).attr("ry",b).duration(Protein.transitionTime),d3.select(this.rectDomains).transition().attr("opacity",
0).attr("transform","scale(1, 1)").duration(Protein.transitionTime)):(d3.select(this.outline).transition().attr("stroke-opacity",0).attr("fill","#EEEEEE").duration(Protein.transitionTime),d3.select(this.circDomains).transition().attr("opacity",0).attr("transform","scale(1, 1)").duration(Protein.transitionTime))};
Protein.prototype.toStick=function(){function b(d){var e=d3.transform(w.labelSVG.getAttribute("transform")),e=w.xlv.svgElement.createSVGMatrix().rotate(e.rotate).translate(p(z(d)),Protein.labelY);w.labelSVG.transform.baseVal.initialize(w.xlv.svgElement.createSVGTransformFromMatrix(e));e=n(z(d));w.setRotation(e);e=h(z(d));d3.select(w.outline).attr("width",e).attr("x",-(e/2)+.5*Protein.UNITS_PER_RESIDUE*w.stickZoom);w.stickZoom=m(z(d));w.setAllLineCoordinates();return 1===d?(w.busy=!1,!0):1<d?b(1):
!1}this.busy=!0;this.form=1;this.upperGroup.appendChild(this.lowerRotator.svg);this.upperGroup.appendChild(this.upperRotator.svg);this.lowerRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(.5)-Protein.rotOffset)+" 0)");this.upperRotator.svg.setAttribute("transform","translate("+(this.getResXwithStickZoom(this.size-0+.5)+Protein.rotOffset)+" 0)");for(var e=this.proteinLinks.values().length,d=0;d<e;d++){var f=this.proteinLinks.values()[d];f.shown&&f.hide()}var e=this.size*
Protein.UNITS_PER_RESIDUE*this.stickZoom,d=this.getBlobRadius(),h=d3.interpolate(2*d,e),m=d3.interpolate(0,this.stickZoom),n=d3.interpolate(0,180<this.rotation?this.rotation-360:this.rotation),p=d3.interpolate(-(d+5),-(this.size/2*Protein.UNITS_PER_RESIDUE*this.stickZoom+10)),d=this.stickZoom;this.stickZoom=0;this.checkLinks();this.stickZoom=d;d3.select(this.circDomains).transition().attr("opacity",0).attr("transform","scale("+this.stickZoom+", 1)").duration(Protein.transitionTime);d3.select(this.rectDomains).transition().attr("opacity",
1).attr("transform","scale("+this.stickZoom+", 1)").duration(Protein.transitionTime);d3.select(this.outline).transition().attr("stroke-opacity",1).attr("fill-opacity",0).attr("fill","#FFFFFF").attr("height",Protein.STICKHEIGHT).attr("y",-Protein.STICKHEIGHT/2).attr("rx",0).attr("ry",0).duration(Protein.transitionTime);d3.select(this.highlight).transition().attr("width",e+5).attr("height",Protein.STICKHEIGHT+5).attr("x",this.getResXwithStickZoom(.5)-2.5).attr("y",-Protein.STICKHEIGHT/2-2.5).attr("rx",
0).attr("ry",0).duration(Protein.transitionTime);if(null!=this.internalLink)for(e=this.internalLink.residueLinks.values(),d=e.length,f=0;f<d;f++){var q=e[f];q.shown&&(d3.select(q.line).attr("d",this.getAggregateSelfLinkPath()),d3.select(q.line).transition().attr("d",this.getResidueLinkPath(q)).duration(Protein.transitionTime),d3.select(q.highlightLine).attr("d",this.getAggregateSelfLinkPath()),d3.select(q.highlightLine).transition().attr("d",this.getResidueLinkPath(q)).duration(Protein.transitionTime))}if(null!=
this.linkerModifications)for(e=this.linkerModifications.residueLinks.values(),d=e.length,f=0;f<d;f++)if(q=e[f],q.shown){var t=this.getResidueLinkPath(q);d3.select(q.line).attr("d","M 0,0 L 0,0 L 0,0 L 0,0");d3.select(q.line).transition().attr("d",t).duration(Protein.transitionTime);d3.select(q.highlightLine).attr("d","M 0,0 L 0,0");d3.select(q.highlightLine).transition().attr("d",t).duration(Protein.transitionTime)}if("undefined"!==typeof this.annotations)for(e=this.annotations,d=e.length,f=0;f<d;f++){var q=
e[f].anno,t=e[f].pieSlice,u=e[f].rect;t.setAttribute("d",this.getAnnotationPieSliceApproximatePath(q));d3.select(t).transition().attr("d",this.getAnnotationRectPath(q)).duration(Protein.transitionTime);d3.select(u).transition().attr("d",this.getAnnotationRectPath(q)).duration(Protein.transitionTime)}var w=this,z=d3.ease("cubic-in-out");d3.timer(function(d){return b(d/Protein.transitionTime)});d3.select(this.ticks).attr("opacity",0);this.setScaleGroup();d3.select(this.ticks).transition().attr("opacity",
1).delay(.8*Protein.transitionTime).duration(Protein.transitionTime/2)};Protein.prototype.getAggregateSelfLinkPath=function(){var b=this.getBlobRadius()+7,e=Protein.trig(b,70),d=Protein.trig(b,20),f=Protein.trig(b,85),h=Protein.trig(b,5);return"M 0,0 Q "+f.x+","+-f.y+" "+e.x+","+-e.y+" A "+b+" "+b+" 0 0 1 "+d.x+","+-d.y+" Q "+h.x+","+-h.y+" 0,0"};
Protein.prototype.getResidueLinkPath=function(b){var e=this.getResXwithStickZoom(b.fromResidue),d=0;8<=Protein.UNITS_PER_RESIDUE*this.stickZoom&&(d=-5);if(isNaN(parseFloat(b.toResidue))){!1===b.ambig&&b.line.setAttribute("fill",xiNET.defaultSelfLinkColour.toRGB());var f=[e,26],h=[e,18],m=Protein.rotatePointAboutPoint(f,h,60);return"M "+e+","+-1*d+" L "+f[0]+","+f[1]+" L "+m[0]+","+m[1]+" L "+h[0]+","+h[1]}var f=this.getResXwithStickZoom(b.toResidue),n,p,m=Math.abs(f-e)/2,h=-(Protein.STICKHEIGHT/2+
3);15>m&&(h=-28+m);var q=[e,d],t=[f,d];!0===b.intraMolecular?(n=e+(f-e)/2,d=[n,h-m],p=[n,h-m],b=[n,h-m],n=[n,h-m]):b.hd?(n=e+(f-e)/2,d=[n,h-m],p=[n,h-m],b=Protein.rotatePointAboutPoint([e,h-m],q,-20),n=Protein.rotatePointAboutPoint([f,h-m],t,20)):(b=[e,h],n=[f,d],d=[e,h],p=[f,h]);return" M "+q[0]+","+q[1]+" Q "+b[0]+","+b[1]+" "+d[0]+","+d[1]+" A "+m+","+m+"  0 0 1 "+p[0]+","+p[1]+" Q "+n[0]+","+n[1]+" "+t[0]+","+t[1]};
Protein.prototype.showPeptides=function(b){if(1===this.form)for(var e=-Protein.STICKHEIGHT/2,d=b.length,f=Protein.STICKHEIGHT/d,h=0;h<d;h++){var m=b[h],n=document.createElementNS(xiNET.svgns,"rect");n.setAttribute("class","protein");var p=m[1];if(0<p){var q=(m[0]+.5-this.size/2)*Protein.UNITS_PER_RESIDUE,p=p*Protein.UNITS_PER_RESIDUE;n.setAttribute("x",q);n.setAttribute("y",e);n.setAttribute("width",p);n.setAttribute("height",f);n.setAttribute("fill",xiNET.highlightColour.toRGB());this.peptides.appendChild(n)}m[2]&&
(n=document.createElementNS(xiNET.svgns,"rect"),n.setAttribute("class","protein"),q=(m[2]+.5-this.size/2)*Protein.UNITS_PER_RESIDUE,p=(m[3]-m[2])*Protein.UNITS_PER_RESIDUE,n.setAttribute("x",q),n.setAttribute("y",e),n.setAttribute("width",p),n.setAttribute("height",f),n.setAttribute("fill",xiNET.homodimerLinkColour.toRGB()),n.setAttribute("fill-opacity","0.5"),this.peptides.appendChild(n));e+=f}};Protein.prototype.removePeptides=function(){this.xlv.emptyElement(this.peptides)};
Protein.prototype.getResXwithStickZoom=function(b){return(b-this.size/2)*Protein.UNITS_PER_RESIDUE*this.stickZoom};Protein.rotatePointAboutPoint=function(b,e,d){d=d/360*Math.PI*2;var f=Math.cos(d)*(b[0]-e[0])-Math.sin(d)*(b[1]-e[1])+e[0];b=Math.sin(d)*(b[0]-e[0])+Math.cos(d)*(b[1]-e[1])+e[1];return[f,b]};Protein.prototype.checkLinks=function(){for(var b=this.proteinLinks.values(),e=b.length,d=0;d<e;d++)b[d].check()};
Protein.prototype.setAllLineCoordinates=function(){for(var b=this.proteinLinks.values(),e=b.length,d=0;d<e;d++){var f=b[d];if(null!==f.getToProtein()&&0===f.getFromProtein().form&&0===f.getToProtein().form)f.setLineCoordinates(this);else for(var f=f.residueLinks.values(),h=f.length,m=0;m<h;m++){var n=f[m];n.setLineCoordinates(this);var p=n.proteinLink.getOtherEnd(this);p&&1===p.form&&8<p.stickZoom*Protein.UNITS_PER_RESIDUE&&n.setLineCoordinates(p)}}};
Protein.prototype.countExternalLinks=function(){if(this.isParked)return 0;for(var b=0,e=this.proteinLinks.keys().length,d=0;d<e;d++){var f=this.proteinLinks.values()[d];f.intra||!0===f.check()&&b++}return b};Protein.prototype.getSubgraph=function(b){null==this.subgraph&&(b={nodes:d3.map(),links:d3.map()},b.nodes.set(this.id,this),!1===this.isParked&&(this.subgraph=this.addConnectedNodes(b)),this.xlv.subgraphs.push(b));return this.subgraph};
Protein.prototype.addConnectedNodes=function(b){for(var e=this.proteinLinks.values(),d=e.length,f=0;f<d;f++){var h=e[f];h.fromProtein===h.toProtein||!0!==h.check()||b.links.has(h.id)||(b.links.set(h.id,h),h=h.getFromProtein()===this?h.getToProtein():h.getFromProtein(),null===h||b.nodes.has(h.id)||(b.nodes.set(h.id,h),h.subgraph=b,h.addConnectedNodes(b)))}return b};Protein.prototype.printAnnotationInfo=function(){function b(b,d){h+="<h6>"+d+"</h6>";b.notes&&(h+="<h7>Notes:</h7>",b.notes.forEach(function(b){h+="<p>"+e(b.notes,f.xlv.fields.notes);b=b.links;if(void 0!==b&&null!==b){for(var d="",m=0;m<b.length;m++)d+=" <a href='"+b[m].href+"' target='_blank'>"+b[m].textContent+"</a>";h+=d}h+="</p>"}));if(b.keywords){h+="<h7>Keywords:</h7><br/>";for(var m="",t=b.keywords,u=t.keys(),w=u.length,z=0;z<w;z++){for(var y=u[z],m=m+("<h8>"+y+":</h8> "),y=t.get(y),G=y.length,
E=0;E<G;E++){var M=y[E];0<E&&(m+=", ");m=M.link?m+("<a href='"+M.link+"'  target='_blank' >"+e(M.name,f.xlv.fields.key_text)+"</a>"):m+("<span  target='_blank' >"+e(M.name,f.xlv.fields.key_text)+"</span>")}m+="</p>"}h+=m}b.positional&&b.positional.forEach(function(b,d){h+="<h7>Positional features: "+b+"</h7>";h+="<table><tr><th>Name</th><th>Start</th><th>End</th><th>Notes</th></tr>";for(var m=0;m<d.length;m++){var n=d[m];h+="<tr><td><p>"+e(n.name,f.xlv.fields.pos_text)+"</p></td><td><p>"+n.start+
"</p></td><td><p>"+n.end+"</p></td><td>";if(void 0!==n.notes){h+="<p>"+n.notes;n=n.links;if(void 0!==n&&null!==n){for(var p="",q=0;q<n.length;q++)p+=" <a href='"+n[q].href+"' target='_blank'>"+n[q].textContent+"</a>";h+=p}h+="</p>"}h+="</td></tr>"}h+="</table><p>&nbsp;</p>"})}function e(b,e){if(!0===e){for(var h,m=f.xlv.textFilterRegex.length,u=[],w=[],z=0;z<m;z++){h=f.xlv.textFilterRegex[z];h.lastIndex=0;for(var y=h.exec(b);null!=y;)y=y[0],u.push({start:h.lastIndex-y.length,stop:h.lastIndex}),y=
h.exec(b)}for(h=0;h<u.length;h++)y=u[h],b=d(31*h+y.start,"<span class='highlight'>",b),b=d(31*h+24+y.stop,"</span>",b);m=f.xlv.textFilterRegexNOT.length;for(z=0;z<m;z++)for(h=new RegExp(">[^<]+("+f.xlv.textFilterRegexNOT[z].source+")","gi"),h.lastIndex=0,y=h.exec(">"+b);null!=y;)y=y[1],w.push({start:h.lastIndex-y.length-1,stop:h.lastIndex-1}),y=h.exec(">"+b);for(h=0;h<w.length;h++)y=w[h],b=d(25*h+y.start,"<span class='NOT'>",b),b=d(25*h+18+y.stop,"</span>",b)}return b}function d(b,d,e){return e.substring(0,
b)+d+e.substring(b,e.length)}var f=this,h="",h=h+("<h5>"+e(this.name,this.xlv.fields.names)+" &nbsp;&nbsp;["+e(this.id,f.xlv.fields.names)+"] </h5><p>");if(this.processedDAS){var m=this.processedDAS.get("UniProt");"undefined"!==typeof m&&(h+="<a href='"+m.href+"' target='_blank'>"+e(m.name,f.xlv.fields.names)+"</a>. ",h+="Segment start: "+m.start+", stop: "+m.stop+". ")}"undefined"!==typeof this.accession&&(h+="<a href='http://www.ebi.ac.uk/pdbe-apps/widgets/unipdb?uniprot="+this.accession+"' target='_blank'>PDB</a></p>");
"undefined"!==typeof this.description&&""!==this.description&&(h+="<p>FASTA: "+e(this.description,f.xlv.fields.names)+"</p>");"undefined"!==typeof this.geneName&&(h+="<p>Gene names: "+e(this.geneName,f.xlv.fields.names)+"</p>");if(this.processedDAS){if(m=this.processedDAS.get("UniProt"))h+="<p>"+e(m.full,f.xlv.fields.names)+"</p>",b(m,"UniProt");this.processedDAS.forEach(function(d,e){"UniProt"!==d&&b(e,d)})}this.xlv.message(h)};function Annotation(b,e,d,f,h){this.name=b;this.start=e;this.end=d;void 0!==f&&null!==f&&(this.colour=new RGBColor(f));this.notes=h}
Protein.prototype.setAnnotations=function(b,e,d){for(;this.circDomains.firstChild;)this.circDomains.removeChild(this.circDomains.firstChild);for(;this.rectDomains.firstChild;)this.rectDomains.removeChild(this.rectDomains.firstChild);for(;this.rectDomainsMouseEvents.firstChild;)this.rectDomainsMouseEvents.removeChild(this.rectDomainsMouseEvents.firstChild);e=this.processedDAS.get(e);!0===b?"none"===d?this.setPositionalFeatures(this.customAnnotatiuons):void 0!==e&&(b=e.positional,void 0!==b&&this.setPositionalFeatures(b.get(d))):
void 0!==e&&(b=e.keywords,void 0!==b&&this.setKeywords(b.get(d)))};
Protein.prototype.setKeywords=function(b){function e(b,d){var e=d/360*Math.PI*2;return{x:b*Math.cos(e),y:b*Math.sin(e)}}if(void 0!==b&&null!==b)for(var d=b.length,f=359/d,h=0;h<d;h++){var m=b[h],n=document.createElementNS(xiNET.svgns,"path");n.setAttribute("class","protein");var p=h*f,q=p+f,t=this.getBlobRadius()-2,u=e(t,p-90),w=e(t,q-90),z=0;180<q-p&&(z=1);n.setAttribute("d","M0,0 L"+u.x+","+u.y+" A"+t+","+t+" 0 "+z+",1 "+w.x+","+w.y+" z");n.setAttribute("stroke","none");p=null==m.colour?new RGBColor(Protein.domainColours(m.name)):
m.colour;n.setAttribute("fill","rgb("+p.r+","+p.g+","+p.b+")");n.setAttribute("fill-opacity","0.85");n.name=m.name;var y=this.xlv,G=this;n.onmouseover=function(b){var d=b.target.correspondingUseElement?b.target.correspondingUseElement:b.target;y.preventDefaultsAndStopPropagation(b);y.setTooltip(d.name,d.getAttribute("fill"));G.showHighlight(!0)};this.circDomains.appendChild(n)}};
Protein.prototype.setPositionalFeatures=function(b){this.annotations=[];this.circDomains&&this.xlv.emptyElement(this.circDomains);this.rectDomains&&this.xlv.emptyElement(this.rectDomains);if(void 0!==b&&null!==b){b.sort(function(b,d){return d.end-d.start-(b.end-b.start)});for(var e=0;e<b.length;e++){var d=b[e];d.start-=0;d.end-=0;var f=document.createElementNS(xiNET.svgns,"path"),h=document.createElementNS(xiNET.svgns,"path");this.annotations.push({anno:d,pieSlice:f,rect:h});0===this.form?(f.setAttribute("d",
this.getAnnotationPieSliceArcPath(d)),h.setAttribute("d",this.getAnnotationPieSliceApproximatePath(d))):(f.setAttribute("d",this.getAnnotationRectPath(d)),h.setAttribute("d",this.getAnnotationRectPath(d)));f.setAttribute("stroke","none");h.setAttribute("stroke","none");var m;m=null==d.colour?"alpha_helix"===d.name?new RGBColor("#7EB6FF88"):"beta_strand"===d.name?new RGBColor("#9AFF9A88"):"turn"===d.name?new RGBColor("#FF00AA88"):new RGBColor(Protein.domainColours(d.name)):d.colour;f.setAttribute("fill",
"rgb("+m.r+","+m.g+","+m.b+")");f.setAttribute("fill-opacity","0.5");h.setAttribute("fill","rgb("+m.r+","+m.g+","+m.b+")");h.setAttribute("fill-opacity","0.5");f.name=d.name+" ["+d.start+" - "+d.end+"]";var n=this.xlv,p=this;f.onmouseover=function(b){var d=b.target.correspondingUseElement?b.target.correspondingUseElement:b.target;n.preventDefaultsAndStopPropagation(b);n.setTooltip(d.name,d.getAttribute("fill"));p.showHighlight(!0)};h.onmouseover=function(b){var d=b.target.correspondingUseElement?
b.target.correspondingUseElement:b.target;n.preventDefaultsAndStopPropagation(b);n.setTooltip(d.name,d.getAttribute("fill"));p.showHighlight(!0)};this.circDomains.appendChild(f);this.rectDomains.appendChild(h)}}};Protein.trig=function(b,e){var d=e/360*Math.PI*2;return{x:b*Math.cos(d),y:b*Math.sin(d)}};Protein.stepsInArc=5;
Protein.prototype.getAnnotationPieSliceArcPath=function(b){var e=(b.start-1)/this.size*360;b=b.end/this.size*360;var d=this.getBlobRadius()-2,f=Protein.trig(d,e-90),h=Protein.trig(d,b-90),m=0;180<b-e&&(m=1);return"M0,0 L"+f.x+","+f.y+" A"+d+","+d+" 0 "+m+" 1 "+h.x+","+h.y+" Z"};
Protein.prototype.getAnnotationPieSliceApproximatePath=function(b){var e=(b.start-1)/this.size*360;b=b.end/this.size*360;var d=this.getBlobRadius()-2;Protein.trig(d,e-90);Protein.trig(d,b-90);for(var f="M 0,0",h=0;h<=Protein.stepsInArc;h++)var m=Protein.trig(d,e+h/5*(b-e)-90),f=f+(" L "+m.x+","+m.y);return f+=" L 0,0  Z"};
Protein.prototype.getAnnotationRectPath=function(b){var e=Protein.STICKHEIGHT/2,d=-Protein.STICKHEIGHT/2,f=(b.start-.5-this.size/2)*Protein.UNITS_PER_RESIDUE;b=(1+(b.end-b.start))*Protein.UNITS_PER_RESIDUE;for(var h="M "+f+","+e,m=0;m<=Protein.stepsInArc;m++)h+=" L "+(f+m/Protein.stepsInArc*b)+","+d;return h+(" L "+(f+b)+","+e+" Z")};ProteinLink.maxNoResidueLinks=0;ProteinLink.prototype=new xiNET.Link;function ProteinLink(b,e,d,f){this.id=b;this.residueLinks=d3.map();this.xlv=f;this.fromProtein=e;this.toProtein=d;this.intra=!1;this.fromProtein===this.toProtein&&(this.intra=!0);this.ambig=!1;this.tooltip=this.id;this.hidden=this.dashed=this.shown=!1;this.initSVG()}
ProteinLink.prototype.initSVG=function(){if(this.intra){var b=this.fromProtein.getAggregateSelfLinkPath();this.line=document.createElementNS(xiNET.svgns,"path");this.line.setAttribute("d",b);this.highlightLine=document.createElementNS(xiNET.svgns,"path");this.highlightLine.setAttribute("d",b);this.fatLine=document.createElementNS(xiNET.svgns,"path");this.fatLine.setAttribute("d",b)}else this.line=document.createElementNS(xiNET.svgns,"line"),this.highlightLine=document.createElementNS(xiNET.svgns,
"line"),this.fatLine=document.createElementNS(xiNET.svgns,"line");this.line.setAttribute("class","link");this.line.setAttribute("fill","none");this.line.setAttribute("stroke","black");this.line.setAttribute("stroke-width",1);this.line.setAttribute("stroke-linecap","round");this.highlightLine.setAttribute("class","link");this.highlightLine.setAttribute("fill","none");this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlightLine.setAttribute("stroke-width","10");this.highlightLine.setAttribute("stroke-linecap",
"round");this.highlightLine.setAttribute("stroke-opacity","0");this.fatLine.setAttribute("class","link");this.fatLine.setAttribute("fill","none");this.fatLine.setAttribute("stroke","lightgray");this.fatLine.setAttribute("stroke-linecap","round");this.fatLine.setAttribute("stroke-linejoin","round");var e=this;this.line.onmousedown=function(b){e.mouseDown(b)};this.line.onmouseover=function(b){e.mouseOver(b)};this.line.onmouseout=function(b){e.mouseOut(b)};this.line.ontouchstart=function(b){e.touchStart(b)};
this.highlightLine.onmousedown=function(b){e.mouseDown(b)};this.highlightLine.onmouseover=function(b){e.mouseOver(b)};this.highlightLine.onmouseout=function(b){e.mouseOut(b)};this.highlightLine.ontouchstart=function(b){e.touchStart(b)};this.fatLine.onmousedown=function(b){e.mouseDown(b)};this.fatLine.onmousedown=function(b){e.mouseDown(b)};this.fatLine.onmouseover=function(b){e.mouseOver(b)};this.fatLine.onmouseout=function(b){e.mouseOut(b)};this.fatLine.ontouchstart=function(b){e.touchStart(b)};
this.isSelected=!1};ProteinLink.prototype.getFromProtein=function(){return this.fromProtein};ProteinLink.prototype.getToProtein=function(){return this.toProtein};
ProteinLink.prototype.showHighlight=function(b,e){"undefined"===typeof e&&(e=!1);this.shown&&(b?(this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB()),this.highlightLine.setAttribute("stroke-opacity","1")):(this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),0==this.isSelected&&this.highlightLine.setAttribute("stroke-opacity","0")));if(e&&this.ambig)for(var d=this.residueLinks.values().length,f=0;f<d;f++)for(var h=this.residueLinks.values()[f],m=h.matches.length,
n=0;n<m;n++){var p=h.matches[n][0];if(p.isAmbig())for(var q=p.residueLinks.length,t=0;t<q;t++)h=p.residueLinks[t],!0===h.shown&&0==h.isSelected&&h.showHighlight(b,!1),!0===h.proteinLink.shown&&h.proteinLink.showHighlight(b,!1)}};
ProteinLink.prototype.setSelected=function(b){b&&!1===this.isSelected?(this.xlv.selected.set(this.id,this),this.isSelected=!0,this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),this.highlightLine.setAttribute("stroke-opacity","1")):!1===b&&!0===this.isSelected&&(this.xlv.selected.remove(this.id),this.isSelected=!1,this.highlightLine.setAttribute("stroke-opacity","0"),this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB()))};
ProteinLink.prototype.showID=function(){if("function"===typeof send_match_ids){var b,e=this.getFilteredMatches(),d=e.length;b="";for(var f=!0,h=0;h<d;h++)!0===f?f=!1:b+=",",b+=e[h];send_match_ids(b)}else{b="<h5>"+this.fromProtein.name+" ["+this.fromProtein.id+"] to "+this.toProtein.name+" ["+this.toProtein.id+"]</h5>";for(var d=this.residueLinks.values(),m=d.length,f=[],e=d3.map(),n=d3.map(),h=0;h<m;h++){var p=d[h],q=!1;if(p.matches)for(var t=p.matches.length,u=0;u<t;u++){var w=p.matches[u][0];if(w.meetsFilterCriteria())if(!1===
q&&(q=!0,f.push(p)),e.set(w.id),w.isAmbig())for(var z=0;z<w.residueLinks.length;z++)n.set(w.residueLinks[z].proteinLink.id);else this.ambig=!1}else f.push(p)}m=f.length;b+="<h5>"+m+" unique residue - residue linkage site";1<m&&(b+="s");b+=". "+e.values().length+" matches.</h5>";n="<table><tr><th>Id</th><th>Protein1</th>";n+="<th>PepPos1</th>";n+="<th>PepSeq1</th>";n+="<th>LinkPos1</th>";n+="<th>Protein2</th>";n+="<th>PepPos2</th>";n+="<th>PepSeq2</th>";n+="<th>LinkPos2</th>";n+="<th>Score</th>";!0===
this.xlv.autoValidatedFound&&(n+="<th>Auto</th>");!0===this.xlv.manualValidatedFound&&(n+="<th>Manual</th>");n+="</tr>";for(h=0;h<m;h++)for(e=f[h].getFilteredMatches(),d=e.length,p=0;p<d;p++)n+=e[p][0].toTableRow();n+="</table>";b+=n;this.xlv.message(b)}};ProteinLink.prototype.getFilteredMatches=function(){for(var b=this.residueLinks.values(),e=b.length,d=d3.map(),f=0;f<e;f++)for(var h=b[f],m=h.matches.length,n=0;n<m;n++){var p=h.matches[n];p.meetsFilterCriteria()&&d.set(p.id)}return d.keys()};
ProteinLink.prototype.check=function(){if(this.fromProtein.isParked||null!==this.toProtein&&this.toProtein.isParked)return this.hide(),!1;if(this.xlv.intraHidden&&this.intra){if(0===this.fromProtein.form)this.hide();else for(var b=this.residueLinks.values(),e=b.length,d=0;d<e;d++)b[d].hide();return!1}if(this.hidden){if(0===this.fromProtein.form&&null!==this.toProtein&&0===this.toProtein.form)this.hide();else for(b=this.residueLinks.values(),e=b.length,d=0;d<e;d++)b[d].hide();return!1}b=this.residueLinks.values();
e=b.length;this.hd=!1;if(0===this.fromProtein.form&&null!==this.toProtein&&0===this.toProtein.form){this.ambig=!0;for(var f=[],h=d3.map(),m=d3.map(),d=0;d<e;d++){var n=b[d],p=!1;if(n.matches)for(var q=n.matches.length,t=0;t<q;t++){var u=n.matches[t][0];if(u.meetsFilterCriteria())if(!0===u.hd&&(this.hd=!0),!1===p&&(p=!0,f.push(n)),h.set(u.id),u.isAmbig())for(var w=0;w<u.residueLinks.length;w++)m.set(u.residueLinks[w].proteinLink.id);else this.ambig=!1}else f.push(n)}b=f.length;if(0<b)return this.tooltip=
this.id+", "+b+" unique cross-link",1<b&&(this.tooltip+="s"),this.tooltip+=" ("+h.keys().length,1===h.keys().length?this.tooltip+=" match)":this.tooltip+=" matches)",this.w=45/ProteinLink.maxNoResidueLinks*b,this.ambig=this.ambig&&1<m.keys().length,this.dashedLine(this.ambig),this.intra&&(this.hd?(this.line.setAttribute("stroke",xiNET.homodimerLinkColour.toRGB()),this.line.setAttribute("stroke-width",xiNET.homodimerLinkWidth)):(this.line.setAttribute("stroke","black"),this.line.setAttribute("stroke-width",
1))),this.show(),!0;this.hide();return!1}if(null!==this.toProtein||0!==this.fromProtein.form){h=!1;for(m=0;m<e;m++)!0===b[m].check()&&(h=!0);return h}};ProteinLink.prototype.dashedLine=function(b){b?(this.dashed=!0,!0===this.intra?this.line.setAttribute("stroke-dasharray","4, 4"):this.line.setAttribute("stroke-dasharray",4*this.xlv.z+", "+4*this.xlv.z)):b||(this.dashed=!1,this.line.removeAttribute("stroke-dasharray"))};
ProteinLink.prototype.show=function(){this.xlv.initComplete&&(this.shown||(this.shown=!0,this.intra?(1<ProteinLink.maxNoResidueLinks&&(this.fatLine.setAttribute("transform","translate("+this.fromProtein.x+" "+this.fromProtein.y+") scale("+this.xlv.z+")"),this.xlv.p_pLinksWide.appendChild(this.fatLine)),this.line.setAttribute("transform","translate("+this.fromProtein.x+" "+this.fromProtein.y+") scale("+this.xlv.z+")"),this.highlightLine.setAttribute("transform","translate("+this.fromProtein.x+" "+
this.fromProtein.y+") scale("+this.xlv.z+")")):(this.line.setAttribute("stroke-width",1*this.xlv.z),this.highlightLine.setAttribute("stroke-width",10*this.xlv.z),this.setLineCoordinates(this.fromProtein),this.setLineCoordinates(this.toProtein),1<ProteinLink.maxNoResidueLinks&&this.xlv.p_pLinksWide.appendChild(this.fatLine)),this.xlv.highlights.appendChild(this.highlightLine),this.xlv.p_pLinks.appendChild(this.line)),1<ProteinLink.maxNoResidueLinks&&(this.intra?this.fatLine.setAttribute("stroke-width",
this.w):this.fatLine.setAttribute("stroke-width",this.xlv.z*this.w)))};ProteinLink.prototype.hide=function(){this.shown&&(this.shown=!1,1<ProteinLink.maxNoResidueLinks&&this.xlv.p_pLinksWide.removeChild(this.fatLine),this.xlv.highlights.removeChild(this.highlightLine),this.xlv.p_pLinks.removeChild(this.line))};
ProteinLink.prototype.setLineCoordinates=function(b){null!=b.x&&null!=b.y&&null!==this.getToProtein()&&this.shown&&(this.getFromProtein()===b?(this.line.setAttribute("x1",b.x),this.line.setAttribute("y1",b.y),this.highlightLine.setAttribute("x1",b.x),this.highlightLine.setAttribute("y1",b.y),this.fatLine.setAttribute("x1",b.x),this.fatLine.setAttribute("y1",b.y)):this.getToProtein()===b&&(this.line.setAttribute("x2",b.x),this.line.setAttribute("y2",b.y),this.highlightLine.setAttribute("x2",b.x),this.highlightLine.setAttribute("y2",
b.y),this.fatLine.setAttribute("x2",b.x),this.fatLine.setAttribute("y2",b.y)))};ProteinLink.prototype.getOtherEnd=function(b){return this.fromProtein===b?this.toProtein:this.fromProtein};ProteinLink.prototype.toJSON=function(){return{sc:this.residueLinks.values()[0].matches[0].score,rl:this.residueLinks}};ResidueLink.prototype=new xiNET.Link;function ResidueLink(b,e,d,f,h,m){this.id=b;this.xlv=h;this.proteinLink=e;this.fromResidue=d;this.toResidue=f;this.intra=!1;"undefined"!==typeof this.proteinLink&&this.proteinLink.fromProtein===this.proteinLink.toProtein&&(this.intra=!0);this.ambig=!1;this.tooltip=this.id;!0===m&&(this.flip=!0);this.dashed=this.shown=!1;this.curveMidX=null}
ResidueLink.prototype.initSVG=function(){if("undefined"===typeof this.line){this.intra||null===this.proteinLink.toProtein?(this.line=document.createElementNS(xiNET.svgns,"path"),this.line.setAttribute("stroke",xiNET.defaultSelfLinkColour.toRGB()),this.highlightLine=document.createElementNS(xiNET.svgns,"path")):(this.line=document.createElementNS(xiNET.svgns,"line"),this.line.setAttribute("stroke",xiNET.defaultInterLinkColour.toRGB()),this.line.setAttribute("stroke-linecap","round"),this.highlightLine=
document.createElementNS(xiNET.svgns,"line"),this.highlightLine.setAttribute("stroke-linecap","round"));this.line.setAttribute("class","link");this.line.setAttribute("fill","none");this.highlightLine.setAttribute("class","link");this.highlightLine.setAttribute("fill","none");this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlightLine.setAttribute("stroke-width","10");this.highlightLine.setAttribute("stroke-opacity","0");"undefined"!==typeof this.colour&&this.line.setAttribute("stroke",
this.colour);var b=this;this.line.onmousedown=function(e){b.mouseDown(e)};this.line.onmouseover=function(e){b.mouseOver(e)};this.line.onmouseout=function(e){b.mouseOut(e)};this.line.ontouchstart=function(e){b.touchStart(e)};this.highlightLine.onmousedown=function(e){b.mouseDown(e)};this.highlightLine.onmouseover=function(e){b.mouseOver(e)};this.highlightLine.onmouseout=function(e){b.mouseOut(e)};this.highlightLine.ontouchstart=function(e){b.touchStart(e)}}this.isSelected=!1};
ResidueLink.prototype.getFromProtein=function(){return this.proteinLink.fromProtein};ResidueLink.prototype.getToProtein=function(){return this.proteinLink.toProtein};
ResidueLink.prototype.showHighlight=function(b,e){if(!(this.proteinLink.fromProtein.busy||this.proteinLink.toProtein&&this.proteinLink.toProtein.busy)){"undefined"===typeof e&&(e=!1);if(this.shown)if(b){this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB());this.highlightLine.setAttribute("stroke-opacity","0.7");for(var d=[],f=[],h=this.getFilteredMatches(),m=h.length,n=0;n<m;n++){var p=h[n][0],q=h[n][3]-1,t=h[n][4];d.push([h[n][1]-1,h[n][2],p.overlap[0],p.overlap[1]]);f.push([q,
t,p.overlap[0],p.overlap[1]])}this.proteinLink.fromProtein.showPeptides(d);null!==this.proteinLink.toProtein&&this.proteinLink.toProtein.showPeptides(f)}else this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),0==this.isSelected&&this.highlightLine.setAttribute("stroke-opacity","0"),this.proteinLink.fromProtein.removePeptides(),null!==this.proteinLink.toProtein&&this.proteinLink.toProtein.removePeptides();if(e&&this.ambig)for(d=this.matches?this.matches.length:0,n=0;n<d;n++)if(p=
this.matches[n][0],p.isAmbig())for(f=p.residueLinks.length,h=0;h<f;h++)m=p.residueLinks[h],m.showHighlight(b,!1),m.proteinLink.showHighlight(b,!1)}};
ResidueLink.prototype.setSelected=function(b){b&&!1===this.isSelected?(this.xlv.selected.set(this.id,this),this.isSelected=!0,this.highlightLine.setAttribute("stroke",xiNET.selectedColour.toRGB()),this.highlightLine.setAttribute("stroke-opacity","0.7")):!1===b&&!0===this.isSelected&&(this.xlv.selected.remove(this.id),this.isSelected=!1,this.highlightLine.setAttribute("stroke-opacity","0"),this.highlightLine.setAttribute("stroke",xiNET.highlightColour.toRGB()))};
ResidueLink.prototype.showID=function(){if("function"===typeof send_match_ids){for(var b=this.getFilteredMatches(),e=[],d=b.length,f=!0,h=0;h<d;h++)f?f=!1:e+=",",e+=b[h].id;send_match_ids(e)}else{b=this.getFromProtein();d=this.getToProtein();e="<h5>"+b.name+" ["+b.id+"], residue "+this.fromResidue+" to "+(d?d.name:"null")+" ["+(d?d.id:"")+"], residue "+this.toResidue+"</h5>";b=this.getFilteredMatches();d=b.length;e+="<p>"+d+" match";e=1<d?e+"es:</p>":e+":</p>";f="<table><tr><th>Id</th><th>Protein1</th>";
f+="<th>PepPos1</th>";f+="<th>PepSeq1</th>";f+="<th>LinkPos1</th>";f+="<th>Protein2</th>";f+="<th>PepPos2</th>";f+="<th>PepSeq2</th>";f+="<th>LinkPos2</th>";f+="<th>Score</th>";!0===this.xlv.autoValidatedFound&&(f+="<th>Auto</th>");!0===this.xlv.manualValidatedFound&&(f+="<th>Manual</th>");f+="</tr>";for(h=0;h<d;h++)f+=b[h][0].toTableRow();f+="</table><p>&nbsp;</p>";e+=f;this.xlv.message(e)}};
ResidueLink.prototype.getFilteredMatches=function(){this.ambig=!0;this.intraMolecular=this.hd=!1;for(var b=[],e=this.matches?this.matches.length:0,d=0;d<e;d++){var f=this.matches[d][0];f.meetsFilterCriteria()&&(b.push(this.matches[d]),!1===f.isAmbig()&&(this.ambig=!1),!0===f.hd&&(this.hd=!0),1===f.type&&(this.intraMolecular=!0))}return b};
ResidueLink.prototype.check=function(b){if(this.xlv.intraHidden&&this.intra||this.proteinLink.hidden)return this.hide(),!1;if("undefined"===typeof this.matches||null==this.matches)return this.ambig=!1,this.show(),!0;b=this.getFilteredMatches().length;if(0<b)return this.tooltip=this.proteinLink.fromProtein.labelText+"_"+this.fromResidue+"-"+(null!=this.proteinLink.toProtein?this.proteinLink.toProtein.labelText:"null")+"_"+this.toResidue+" ("+b,this.tooltip=1==b?this.tooltip+" match)":this.tooltip+
" matches)",this.show(),this.dashedLine(this.ambig),!0===this.intra&&(!0===this.hd?(this.line.setAttribute("stroke",xiNET.homodimerLinkColour.toRGB()),this.line.setAttribute("transform","scale(1, -1)"),this.line.setAttribute("stroke-width",xiNET.homodimerLinkWidth),this.highlightLine.setAttribute("transform","scale(1, -1)")):(this.line.setAttribute("stroke",xiNET.defaultSelfLinkColour.toRGB()),this.line.setAttribute("transform","scale(1, 1)"),this.line.setAttribute("stroke-width",xiNET.linkWidth),
this.highlightLine.setAttribute("transform","scale(1, 1)"))),!0;this.hide();return!1};ResidueLink.prototype.dashedLine=function(b){"undefined"===typeof this.line||isNaN(parseFloat(this.toResidue))||(b?this.intra?(this.dashed=!0,this.line.setAttribute("stroke-dasharray","4, 4")):(this.dashed=!0,this.line.setAttribute("stroke-dasharray",4*this.xlv.z+", "+4*this.xlv.z)):b||(this.dashed=!1,this.line.removeAttribute("stroke-dasharray")))};
ResidueLink.prototype.show=function(){this.xlv.initComplete&&!this.shown&&(this.shown=!0,"undefined"===typeof this.line&&this.initSVG(),this.intra||null===this.proteinLink.toProtein?(this.line.setAttribute("stroke-width",xiNET.linkWidth),this.line.setAttribute("d",this.proteinLink.fromProtein.getResidueLinkPath(this)),this.proteinLink.fromProtein.intraLinksHighlights.appendChild(this.highlightLine),this.proteinLink.fromProtein.intraLinks.appendChild(this.line)):(this.line.setAttribute("stroke-width",
this.xlv.z*xiNET.linkWidth),this.highlightLine.setAttribute("stroke-width",10*this.xlv.z),this.setLineCoordinates(this.proteinLink.fromProtein),this.setLineCoordinates(this.proteinLink.toProtein),this.xlv.highlights.appendChild(this.highlightLine),this.xlv.res_resLinks.appendChild(this.line)))};
ResidueLink.prototype.hide=function(){this.xlv.initComplete&&this.shown&&(this.shown=!1,this.intra||null===this.proteinLink.toProtein?(this.proteinLink.fromProtein.intraLinksHighlights.removeChild(this.highlightLine),this.proteinLink.fromProtein.intraLinks.removeChild(this.line)):(this.xlv.res_resLinks.removeChild(this.line),this.xlv.highlights.removeChild(this.highlightLine)))};
ResidueLink.prototype.setLineCoordinates=function(b){if(null!=b.x&&null!=b.y&&null!==this.getToProtein()&&this.shown){var e;this.getFromProtein()===b?(0===b.form?(e=b.x,b=b.y):(b=this.getResidueCoordinates(this.fromResidue,b),e=b[0],b=b[1]),this.line.setAttribute("x1",e),this.line.setAttribute("y1",b),this.highlightLine.setAttribute("x1",e),this.highlightLine.setAttribute("y1",b)):this.getToProtein()===b&&(0===b.form?(e=b.x,b=b.y):(b=this.getResidueCoordinates(this.toResidue,b),e=b[0],b=b[1]),this.line.setAttribute("x2",
e),this.line.setAttribute("y2",b),this.highlightLine.setAttribute("x2",e),this.highlightLine.setAttribute("y2",b))}};
ResidueLink.prototype.getResidueCoordinates=function(b,e){var d=e.getResXwithStickZoom(b)*this.xlv.z,f=0;if(8<Protein.UNITS_PER_RESIDUE*e.stickZoom){var f=this.getFromProtein(),h=this.getToProtein(),m=Math.atan2(f.y-h.y,f.x-h.x)/(2*Math.PI)*360;0>m&&(m+=360);e===f?(f=m-f.rotation,0>f&&(f+=360),h=5,180>f&&(h=-5)):(f=m-h.rotation,0>f&&(f+=360),h=5,180<f&&(h=-5));f=h*this.xlv.z}f=Protein.rotatePointAboutPoint([d,f],[0,0],e.rotation);d=f[0]+e.x;f=f[1]+e.y;return[d,f]};
ResidueLink.prototype.leastAmbiguousMatches=function(){};ResidueLink.prototype.toJSON=function(){for(var b=[],e=this.matches.length,d=0;d<e;d++)b.push(this.matches[d].id);return{}};xiNET.Controller.prototype.changeAnnotations=function(b,e){var d=!0;1!==b&&(d=!1);if("undefined"!==typeof e&&null!=e)var f=e.options[e.selectedIndex].parentNode.label,h=e.options[e.selectedIndex].value;for(var m=this.proteins.values(),n=m.length,p=0;p<n;p++)m[p].setAnnotations(d,f,h)};
xiNET.Controller.prototype.textFilterKeyUp=function(b){this.textFilterRegex=[];this.textFilterRegexNOT=[];this.fields={names:document.getElementById("names").checked,notes:document.getElementById("notes").checked,key_text:document.getElementById("key_text").checked,pos_text:document.getElementById("posFeat_text").checked};if("!"===b)this.parkAll();else if(""!==b){for(var e=b.split(" "),d=e.length,f=0;f<d;f++){var h=e[f];""!==h&&("!"!==h[0]?this.textFilterRegex.push(new RegExp(h,"gi")):this.textFilterRegexNOT.push(new RegExp(h.substring(1),
"gi")))}e=this.proteins.values();d=e.length;for(f=0;f<d;f++)h=e[f],h.meetsTextFilter(this.textFilterRegex,this.fields)?h.setParked(!1):h.setParked(!0)}this.message("<p>Text filter: "+b+"<br/>"+JSON.stringify(this.fields,"\t")+"</p>");this.checkLinks()};
Protein.prototype.meetsTextFilter=function(b,e){var d="";if(!0===e.names&&(d+=this.name+","+this.accession+",","undefined"!==typeof this.description&&""!==this.description&&(d+=this.description+","),"undefined"!==typeof this.geneName&&(d+=this.geneName+","),"undefined"!==typeof this.processedDAS)){var f=this.processedDAS.get("UniProt");"undefined"!==typeof f&&(d+=f.name+","+f.full+",")}"undefined"!==typeof this.processedDAS&&(!0===e.notes&&this.processedDAS.forEach(function(b,e){"undefined"!==typeof e.notes&&
e.notes.forEach(function(b){d+=b.notes+","})}),!0===e.key_text&&this.processedDAS.forEach(function(b,e){"undefined"!==typeof e.keywords&&e.keywords.forEach(function(b,e){e.forEach(function(b){d+=b.name+","})})}),!0===e.pos_text&&this.processedDAS.forEach(function(b,e){"undefined"!==typeof e.positional&&e.positional.forEach(function(b,e){e.forEach(function(b){d+=b.name+","})})}));for(var h=this.xlv.textFilterRegex.length,m=0;m<h;m++)if(f=this.xlv.textFilterRegex[m],f.lastIndex=0,!1===f.test(d))return!1;
h=this.xlv.textFilterRegexNOT.length;for(m=0;m<h;m++)if(f=this.xlv.textFilterRegexNOT[m],f.lastIndex=0,!0===f.test(d))return!1;return!0};xiNET.Controller.prototype.stepOut=function(){for(var b=this.proteins.values(),e=b.length,d=[],f=0;f<e;f++){var h=b[f];if(!1===h.isParked)for(var m=h.proteinLinks.values(),n=m.length,p=0;p<n;p++){var q=m[p];!1===q.intra&&q.sc>=this.cutOff&&d.push(q.getOtherEnd(h))}}b=d.length;for(e=0;e<b;e++)d[e].setParked(!1);this.checkLinks()};
xiNET.Controller.prototype.stepIn=function(){for(var b=this.proteins.values(),e=b.length,d=[],f=0;f<e;f++){var h=b[f];1>=h.countExternalLinks()&&d.push(h)}b=d.length;for(e=0;e<b;e++)d[e].setParked(!0)};xiNET.Controller.prototype.parkUnconnected=function(){for(var b=this.proteins.values(),e=b.length,d=[],f=0;f<e;f++){var h=b[f];0===h.countExternalLinks()&&d.push(h)}b=d.length;for(e=0;e<b;e++)d[e].setParked(!0)};
xiNET.Controller.prototype.exportProteins=function(){for(var b="",e=this.proteins.values(),d=e.length,f=0;f<d;f++)var h=e[f],b=b+("xlv.addProtein('"+h.id+"','"+h.name+"','"+h.sequence+"','','"+h.accession+"');\n");xlv.message(b)};xiNET.Controller.prototype.exportLinks=function(){var b=JSON.stringify(this.proteinLinks,null,"\t"),b=b.replace(/\\u0000/gi,"");xlv.message(b,!0)};xiNET.Controller.prototype.setCutOff=function(b){this.cutOff=b;this.checkLinks()};
xiNET.Controller.prototype.hideInternal=function(b){this.intraHidden=b;this.checkLinks()};xiNET.Controller.prototype.hideAmbig=function(b){this.ambigHidden=b;this.checkLinks()};xiNET.Controller.prototype.exportSVG=function(){var b=this.svgElement.parentNode.innerHTML.replace(/<g class="PV_rotator".*?<\/g><\/g>/gi,"").replace(/<rect .*?\/rect>/i,""),b=new Blob([b],{type:"data:image/svg;charset=utf-8"});saveAs(b,"xiNET_output.svg")};
xiNET.Controller.prototype.setMessageElement=function(b){this.messageElement=b};
function saveLayout(){for(var b=xlv.getLayout(),e=this.currentLayoutName,d="";""===d||"default"===d;)d=prompt("Enter description of layout:",e);if(null!=d){var f;window.XMLHttpRequest&&(f=new XMLHttpRequest);b="sid="+xlv.sid+"&layout="+encodeURIComponent(b)+"&desc="+d;f.open("POST","./saveLayout.php",!0);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.onreadystatechange=function(){if(4===f.readyState&&200===f.status){xlv.message("<br>Layout saved");for(var b=document.getElementById("load_layout"),
e=b.options,n=0;n<e.length;n++)if(e[n].text==d)return;e=document.createElement("option");e.setAttribute("value",d);e.appendChild(document.createTextNode(d));b.appendChild(e)}};f.send(b)}}
function loadLayout(b){this.currentLayoutName=b;if(""!=b){var e=new XMLHttpRequest;b="sid="+xlv.sid+"&desc="+b;e.open("POST","../searches/getLayout.php",!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var b=e.responseText;xlv.message("response:"+b,!0);xlv.setLayout(b);xlv.loadLayout();xlv.checkLinks()}};e.send(b)}};function Rotator(b,e,d){var f=this;this.xlv=d;this.proteinOrPartThereof=b;this.upperOrLower=e;this.svg=document.createElementNS(xiNET.svgns,"g");this.rotatorSymbol=document.createElementNS(xiNET.svgns,"g");b=document.createElementNS(xiNET.svgns,"circle");b.setAttribute("r",14);b.setAttribute("stroke","none");b.setAttribute("fill","gray");b.setAttribute("fill-opacity","0.0");this.svg.appendChild(b);b=document.createElementNS(xiNET.svgns,"circle");b.setAttribute("r",20);b.setAttribute("stroke","black");
b.setAttribute("stroke-width","1");b.setAttribute("fill","none");this.rotatorSymbol.appendChild(b);b=document.createElementNS(xiNET.svgns,"path");b.setAttribute("d","M 19.818182,-3 L 16,3.10345 L 23.636363,3.10345 L 19.818182,-3 z ");b.setAttribute("stroke","black");b.setAttribute("stroke-width","1");b.setAttribute("fill","black");this.rotatorSymbol.appendChild(b);b=document.createElementNS(xiNET.svgns,"path");b.setAttribute("d","M 19.818182,-3 L 16,3.10345 L 23.636363,3.10345 L 19.818182,-3 z ");
b.setAttribute("stroke","black");b.setAttribute("stroke-width","1");b.setAttribute("fill","black");b.setAttribute("transform","rotate(180)");this.rotatorSymbol.appendChild(b);this.rotatorSymbol.setAttribute("transform","rotate(45) scale (0.7, 0.7)");this.rotatorSymbol.setAttribute("visibility","hidden");this.inner=document.createElementNS(xiNET.svgns,"g");this.inner.setAttribute("class","PV_rotator");this.inner.appendChild(this.rotatorSymbol);this.svg.appendChild(this.inner);this.svg.onmouseover=
function(b){f.rotatorMouseOver(b)};this.svg.onmouseout=function(b){f.rotatorMouseOut(b)};this.svg.onmousedown=function(b){f.rotatorMouseDown(b)}}Rotator.prototype.rotatorMouseOver=function(b){this.xlv.rotating||this.rotatorSymbol.setAttribute("visibility","visible")};Rotator.prototype.rotatorMouseOut=function(b){this.rotatorSymbol.setAttribute("visibility","hidden")};
Rotator.prototype.rotatorMouseDown=function(b){this.xlv.state=xiNET.Controller.ROTATING;this.xlv.dragElement=this.proteinOrPartThereof;b=this.xlv.getEventPoint(b);this.xlv.mouseToSVG(b.x,b.y);this.xlv.whichRotator=this.upperOrLower;return!1};xiNET.DASUtil=function(b){this.xlv=b;this.dasServers=[{name:"SuperFamily 1.75",url:"http://supfam.org/SUPERFAMILY/cgi-bin/das/up/features"},{name:"UniProt",url:"http://www.ebi.ac.uk/das-srv/uniprot/das/uniprot/features"}];this.xlv.proteins.values()[0]&&this.lookup(this.xlv.proteins.values()[0],this.dasServers[0])};
xiNET.DASUtil.prototype.lookup=function(b,e){var d=b.accession;if(void 0!==d&&""!==d&&"__AMBIGUOUS__"!==d){var f=this;JSDAS.Simple.getClient(e.url).features({segment:b.accession},function(d){b.processDAS(e.name,d);f.nextDASQuery(b,e)},function(){f.nextDASQuery(b,e)})}else this.nextDASQuery(b,e)};
xiNET.DASUtil.prototype.nextDASQuery=function(b,e){var d=this.xlv.proteins.values(),f=d.indexOf(b);f<d.length-1?this.lookup(d[f+1],e):(d=this.dasServers.indexOf(e),d<this.dasServers.length-1&&this.lookup(this.xlv.proteins.values()[0],this.dasServers[d+1]))};
Protein.prototype.processDAS=function(b,e){function d(b){var d=f.positional;void 0===d&&(d=d3.map(),f.positional=d);var e=d.get(b);void 0===e&&(e=[],d.set(b,e));e.push(I)}if(void 0!==e){void 0===this.processedDAS&&(this.processedDAS=d3.map());var f={};if(e.GFF.SEGMENT){var h=e.GFF.SEGMENT[0],m=h.FEATURE;if(void 0!==m){for(var n=[],p=d3.map(),q=[],t=0;t<m.length;t++){var u=m[t],w=u.START?u.START.textContent:0,z=u.END?u.END.textContent:0,y=u.TYPE.category,G=u.TYPE.textContent,E=u.METHOD?u.METHOD.textContent:
"",M=u.LINK,P=u.NOTE?u.NOTE:[];void 0!==y&&(y=y.replace(/\'/gi,"").replace(/\"/gi,"").replace(/&quot;/gi,"").replace(/\n/gi,""));void 0!==G&&(G=G.replace(/\'/gi,"").replace(/\"/gi,"").replace(/&quot;/gi,"").replace(/\n/gi,""));for(var L=void 0,B=0;B<P.length;B++)void 0===L&&(L=""),L+=P[B].textContent+" ";void 0!==L&&(L=L.replace(/"/gi,"'"));if("Keyword"===y||"GO"===b){if("GO"===b?(w=y,u=G):(w=G,u=u.label),"technical_term"!==w){var A;void 0!==M&&0<M.length&&(A=M[0].href);M={name:u,link:A};u=p.get(w);
void 0===u&&(u=[],p.set(w,u));u.push(M)}}else if(0<w&&0<z){var I;if("SuperFamily 1.75"===b)"Component"!==E&&(I={name:G,start:w,end:z,notes:L,links:M},d(y));else if("UniProt"===b)"Secondary structure"===y?(I={name:G,start:w,end:z,notes:L,links:M},d(y)):"Molecule processing"!==y&&"Sequence variation"!==y&&"Sequence conflict"!==y&&"Site"!==y&&"Experimental information"!==y&&"Amino acid modification"!==y&&(E=new RegExp("_"+h.id,"g"),I={name:u.label.replace(new RegExp("_"+w+"_"+z,"g"),"").replace(E,"")+
" ("+G+")",start:w,end:z,notes:L,links:M},d(y));else if("Pfam"===b){if("Pfam-A"===E||"Pfam-B"===E)I={name:u.label.substring(0,u.label.indexOf(":"))+" ("+G+")",start:w,end:z,notes:L,links:M},d(E)}else"InterPro"===b?"GENE3D"===E&&(I={name:u.label+" ("+G+")",start:w,end:z,notes:L,links:M},d(E)):(I={name:u.label+" ("+G+")",start:w,end:z,notes:L,links:M},d(y))}else"Protein name"===y?"UniProt"===b&&(f.name=u.label,f.href=M[0].href,f.full=L,f.start=h.start,f.stop=h.stop):"Taxonomy"!==y&&"Organism"!==y&&
("Comment"===y?n.push({notes:L,links:M}):"Publication"!==y&&n.push({notes:G+", "+y+", "+u.label+", "+E+" ",links:M}))}0<n.length&&(f.notes=n);0<p.keys().length&&(f.keywords=p);0<q.length&&(f.publications=q)}this.processedDAS.set(b,f);"SuperFamily 1.75"===b&&f.positional&&(void 0!==this.customAnnotations&&null!==this.customAnnotations||this.setPositionalFeatures(f.positional.get("miscellaneous")))}}};
function updateMenus(b){var e="<h6>Positional feature sets</h4>",d=[],f=!1;b=b.proteins.values();for(var h=b.length,m=0;m<h;m++)void 0!==this.customAnnotations&&null!==this.customAnnotations&&(f=!0),b[m].processedDAS.forEach(function(b,e){e.positional&&(e.positional=d3.map(e.positional),e.positional.forEach(function(e,f){d.push({server:b,category:e})}))});var n=d3.nest().key(function(b){return b.server}).key(function(b){return b.category}).rollup(function(b){return b.length+" annotated proteins"}).map(d),
e=e+("<pre>"+JSON.stringify(n,null,"\t")+"</pre>"),p=document.getElementById("pos_feat_select");if("undefined"!==typeof p&&null!=p){for(;p.firstChild;)p.removeChild(p.firstChild);m=document.createElement("option");m.setAttribute("value","none");f?m.appendChild(document.createTextNode("None or custom")):m.appendChild(document.createTextNode("None"));p.appendChild(m);d3.keys(n).forEach(function(b){var d=document.createElement("optGroup");d.setAttribute("label",b);d3.keys(n[b]).forEach(function(b){b=
b.replace(/\n/gi,"");var e=document.createElement("option");e.setAttribute("value",b);e.appendChild(document.createTextNode(b));d.appendChild(e)});p.appendChild(d)});p.removeAttribute("disabled");for(var e=e+"<h6>Keyword sets</h4>",q=[],m=0;m<h;m++)b[m].processedDAS.forEach(function(b,d){d.keywords&&(d.keywords=d3.map(d.keywords),d.keywords.forEach(function(d,e){q.push({server:b,category:d})}))});for(var t=d3.nest().key(function(b){return b.server}).key(function(b){return b.category}).rollup(function(b){return b.length+
" annotated proteins"}).map(q),e=e+("<pre>"+JSON.stringify(t,null,"\t")+"</pre>"),p=document.getElementById("keyword_select");p.firstChild;)p.removeChild(p.firstChild);m=document.createElement("option");m.setAttribute("value","none");m.appendChild(document.createTextNode("None"));p.appendChild(m);d3.keys(t).forEach(function(b){var d=document.createElement("optGroup");d.setAttribute("label",b);d3.keys(t[b]).forEach(function(b){var e=document.createElement("option");e.setAttribute("value",b);e.appendChild(document.createTextNode(b));
d.appendChild(e)});p.appendChild(d)});p.removeAttribute("disabled")}};xiNET.Controller.prototype.readCSV=function(b,e){function d(b,d){for(var e=1;e<L;e++)for(var f=m[e][b].replace(/(['"])/g,"").split(/[;,]/),h=0;h<f.length;h++){var n=f[h].trim();if("-"!==n.trim()&&"n/a"!==n.trim()){var p,q;if(-1===f[h].indexOf("|"))p=f[h].trim();else{q=f[h].split("|");p=q[1].trim();q=q[2].trim();var t=q.indexOf("_");-1!==t&&(q=q.substring(0,t).trim())}d.proteins.has(n)||(t=new Protein(n,d,p,q),d.proteins.set(n,t),t=B.get(p),"undefined"===typeof t?B.set(p,[n]):t.push(n))}}}function f(b){for(var d=
function(){alert("No FASTA file and DAS sequence look up failed.")},e=function(d){var e=d.SEQUENCE[0].id.trim(),f=d.SEQUENCE[0].textContent.trim();d=d.SEQUENCE[0].label.trim();for(var m=B.get(e),n=0;n<m.length;n++)b.proteins.get(m[n]).initProtein(f,d);B.remove(e);b.message("Waiting on DAS response (sequence) for:<br/>"+B.keys().toString());0===B.keys().length&&(b.message("All sequences downloaded from DAS"),h(b))},f=B.keys(),m=f.length,n=0;n<m;n++)A.sequence({segment:f[n]},e,d)}function h(b){for(var d,
f,h,n,B=1;B<L;B++){d=m[B][p];f=m[B][t];h=-1!==z?m[B][z]:B;-1!==w&&(n=m[B][w]);var A=/(.*)-(.*)-a(\d*)-b(\d*)/.exec(h),ta=/(.*)-(.*)-(.*)/.exec(h);if(null!==A){for(var Ka=A[1],ta=A[2],ha=A[3]-0,Ea=A[4]-0,A=m[B][y].toString().split(/[;,]/),$=0;$<A.length;$++)A[$]=parseInt(A[$])-ha+1;for(var na=m[B][E].toString().split(/[;,]/),$=0;$<na.length;$++)na[$]=parseInt(na[$])-Ea+1;b.addMatch(d,A.join(";"),f,na.join(";"),h,n,ha,Ea,Ka,ta)}else if(-1===P||null===ta||"intralink"!==m[B][P]&&"monolink"!==m[B][P])A=
m[B],b.addMatch(d,A[q],f,A[u],h,n,A[y],A[E],A[G],A[M]);else{Ka=ta[1];ha=parseInt(ta[2].substring(1));A=m[B][y].toString().split(/[;,]/);for($=0;$<A.length;$++)A[$]=parseInt(A[$])-ha+1;"intralink"===m[B][P]?(Ea=parseInt(ta[3].substring(1)),b.addMatch(d,A.join(";"),null,null,h,n,ha,Ea,Ka,null)):b.addMatch(d,A.join(";"),null,null,h,n,ha,null,Ka,null)}}d=b.proteins.values().length;f=b.proteins.values();for(h=0;h<d;h++)n=f[h],0===n.proteinLinks.keys().length&&b.proteins.remove(n.id);b.init();"function"===
typeof initSlider&&initSlider();e&&b.addAnnotations(e);new xiNET.DASUtil(b)}var m=d3.csv.parseRows(b),n=m[0];console.log(n.toString());var p=n.indexOf("Protein1"),q=n.indexOf("PepPos1"),t=n.indexOf("Protein2"),u=n.indexOf("PepPos2"),w=n.indexOf("Score"),z=n.indexOf("Id"),y=n.indexOf("LinkPos1"),G=n.indexOf("PepSeq1"),E=n.indexOf("LinkPos2"),M=n.indexOf("PepSeq2"),P=n.indexOf("Type");if(-1===p)alert("Failed to read column 'Protein1' from CSV file");else if(-1===t)alert("Failed to read column 'Protein2' from CSV file");
else{if(-1===y&&(y=n.indexOf("AbsPos1"),-1===y&&(y=n.indexOf("Residue1"),-1===y))){alert("Failed to read column 'LinkPos1' from CSV file");return}if(-1===E&&(E=n.indexOf("AbsPos2"),-1===E&&(E=n.indexOf("Residue2"),-1===E))){alert("Failed to read column 'LinkPos2' from CSV file");return}-1===w&&(w=n.indexOf("ld-Score"));var L=m.length;if(0===this.proteins.keys().length){var B=d3.map(),A=JSDAS.Simple.getClient("http://www.ebi.ac.uk/das-srv/uniprot/das/uniprot/");d(p,this);d(t,this);f(this)}else h(xlv)}};xiNET.Controller.prototype.readFasta=function(b){function e(b){var d=b;-1!==b.indexOf("|")&&(b=b.split("|"),3===b.length&&(d=b[2],b=d.indexOf("_"),-1!==b&&(d=d.substring(0,b))));return d}b=b.split("\n");for(var d=null,f,h,m=0;m<b.length;m++){var n=""+b[m];if(0!==n.indexOf(";"))if(0===n.indexOf(">")){if(null!==d){var p=new Protein(d,this);p.initProtein(h.trim(),e(d),f);this.proteins.set(d,p);h=""}f=n.indexOf(" ");-1===f&&(f=n.length);d=n.substring(1,f).trim().replace(/(['"])/g,"");f=n.substring(f).trim()}else h+=
n.trim()}p=new Protein(d,this);p.initProtein(h.trim(),e(d),f);this.proteins.set(d,p);for(m=0;m<b.length;m++)n=""+b[m],0!==n.indexOf(";")&&(0===n.indexOf(">")?(null!==d&&(d="decoy_reverse_"+d,p=new Protein(d,this),p.initProtein(h.trim().split("").reverse().join(""),"DECOY_"+e(d),"DECOY. "+f),this.proteins.set(d,p),h=""),f=n.indexOf(" "),-1===f&&(f=n.length),d=n.substring(1,f).trim().replace(/(['"])/g,""),f=n.substring(f).trim()):h+=n.trim());for(m=0;m<b.length;m++)n=""+b[m],0!==n.indexOf(";")&&(0===
n.indexOf(">")?(null!==d&&(d="reverse_"+d,p=new Protein(d,this),p.initProtein(h.trim().split("").reverse().join(""),"DECOY_"+e(d),"DECOY. "+f),this.proteins.set(d,p),h=""),f=n.indexOf(" "),-1===f&&(f=n.length),d=n.substring(1,f).trim().replace(/(['"])/g,""),f=n.substring(f).trim()):h+=n.trim())};
