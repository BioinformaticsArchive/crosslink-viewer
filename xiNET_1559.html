 <!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>xiNET | Rappsilber Laboratory</title>
		<link rel="stylesheet" href="/xiNET_web/crosslink-viewer/css/xiNET.css">
		<link rel="stylesheet" href="/xiNET_web/crosslink-viewer/css/bootstrap.css">
		<link rel="stylesheet" href="/xiNET_web/crosslink-viewer/css/flat-ui.css" >
		<link rel="stylesheet" href="/xiNET_web/crosslink-viewer/css/demo.css">
        <!--libraries-->
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/lib/d3.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/lib/colorbrewer.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/lib/jsdas.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/lib/rgbcolor.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/lib/prototype.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/lib/slider.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/lib/Blob.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/lib/FileSaver.js"></script>
        <!--xiNET-->
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/controller/Init.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/controller/MouseEvents.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/controller/Layout.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/controller/Refresh.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/controller/ToolTips.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/controller/Rotator.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/model/Match.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/model/Link.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/model/Protein.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/model/Protein_printAnnotationInfo.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/model/Annotations.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/model/ProteinLink.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/model/ResidueLink.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/controller/ExternalControls.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/controller/DASUtil.js"></script>
        <script type="text/javascript" src="/xiNET_web/crosslink-viewer/js/controller/ReadCSV.js"></script>
    </head>
    <body>
	<div id="outerDiv">
			<div class="controls">
				<button class="btn btn-inverse help" onclick="toggleHelpPanel()">Help</button>
				<button class="btn btn-inverse info" onclick="toggleInfoPanel()">Selection</button>
				<button class="btn btn-inverse exportsvg" onclick="xlv.exportSVG('networkSVG');">Export</button>
				<button class="btn btn-inverse autolayout" onclick="xlv.autoLayout();">Auto</button>
				<button class="btn btn-inverse resetzoom" onclick="xlv.resetZoom();">Reset</button>		
				<button class="btn btn-inverse saveLayout" onclick="xlv.saveLayout();">Save</button>		
				
				<div class="controlGroup">
                    <p class="scoreLabel">A&nbsp;<input checked="checked" id="manualA" onclick="PV.hideA = (!document.getElementById('manualA').checked); xlv.checkLinks();" type="checkbox"/></p>
                    <p class="scoreLabel">B&nbsp;<input checked="checked" id="manualB" onclick="PV.hideB = (!document.getElementById('manualB').checked); xlv.checkLinks();" type="checkbox"/></p>
                    <p class="scoreLabel">C&nbsp;<input checked="checked" id="manualC" onclick="PV.hideC = (!document.getElementById('manualC').checked); xlv.checkLinks();" type="checkbox"/></p>
                    <p class="scoreLabel">?&nbsp;<input checked="checked" id="manualQ" onclick="PV.hideQ = (!document.getElementById('manualQ').checked); xlv.checkLinks();" type="checkbox"/></p>
                </div>
				
				<div class="controlGroup" id="scoreSlider" style="width:500px">
					<p class="scoreLabel">Auto&nbsp;<input checked="checked" id="autoTrue" onclick="PV.hideAUTOTRUE = (!document.getElementById('autoTrue').checked); xlv.checkLinks();" type="checkbox"/></p>
					<p class="scoreLabel" id="scoreLabel1"></p>
					<div id="track1" class="sliderbar">
						<div class="selected" id="handle1"></div> 
					</div>
					<p class="scoreLabel" id="scoreLabel2"></p>
					<p id="debug1">&nbsp;&nbsp;Score Cut-Off:</p>
				</div>
				
				<div class="controlGroup"><p>Self&nbsp;
					<input checked="checked" id="internal" onclick=
						"xlv.hideInternal(!document.getElementById('internal').checked)" 
					type="checkbox"></p>
				</div>
				
				 <div class="controlGroup"><p>Ambig.&nbsp;
					<input checked="checked" id="ambig" onclick=
						"xlv.hideAmbig(!document.getElementById('ambig').checked)" 
					type="checkbox"></p>
                </div>
			</div>
<!--
						<button type="button" id="linkInfo" onclick="PV_linkInfo()">
                            Link summary
                        </button>
                        <button type="button" id="linkInfo" onclick="PV_residueInfo()">
							Residue summary
                        </button>
-->					
			<div id="networkContainer"></div>
				
			<div class="overlay-box" id="infoPanel">
				<div>
					<h4>Selection Details:</h4>
					<div id="networkCaption">
						<p>No Selection.</p>
					</div>
				</div>
			</div>
			<div class="overlay-box" id="helpPanel">
				<div>
					<h4>Help:</h4>	
					<table class="hor-minimalist-a"  bordercolor="#eee" >
						<tr>
							<td>Toggle the proteins between a bar and a circle</td>
							<td>Double-click on protein</td>
						</tr>
						<tr>
							<td>Zoom</td>
							<td>Mouse wheel</td>
						</tr>
						<tr>
							<td>Pan</td>
							<td>Click and drag on background</td>
						</tr>
						<tr>
							<td>Move protein</td>
							<td>Click and drag on protein</td>
						</tr>
						<tr>
							<td>Expand bar <br>(increases bar length until sequence is visible)</td>
							<td>Shift_left-click on protein</td>
						</tr>
						<tr>
							<td>Rotate bar</td>
							<td>Click and drag on handles that appear at end of bar</td>
						</tr>
						<tr>
							<td>Hide/show protein (and all links to it)</td>
							<td>Right-click on protein</td>
						</tr>
						<tr>
							<td>Hide/show links between two specific proteins</td>
							<td>Right click on any link between those proteins</td>
						</tr>
						<tr>
							<td>'Flip' side of bar on which internal links are shown</td>
							<td>Right-click on internal link</td>
						</tr>
					</table> 
					<p>&nbsp;</p>
					<p>Tip: To change the size of proteins in relation to the size of
						 the page press Ctrl/- or Ctrl/+. 
						 (This zooms the browser, on a Mac its Cmd/- or Cmd/+.) 
					</p>
				</div>
			</div>	
		</div>

            <script type="text/javascript">//<![CDATA[
	var targetDiv = document.getElementById('networkContainer');
	var messageDiv = document.getElementById('networkCaption');
	xlv = new xiNET.Controller(targetDiv);
	xlv.setMessageElement(messageDiv);
	xlv.cutOff = 0;
    //
    //    jQuery.noConflict();
    //
    PV = {};
    PV.hideA = false;
    PV.hideB = false;
    PV.hideC = false;
    PV.hideQ = false;
    PV.hideAUTOTRUE = false;
    
    xlv.filter = function (match) {
		var vChar = match.validated;//.toUpperCase()[0];
		if (vChar == 'A' && !PV.hideA) return true;
		else if (vChar == 'B' && !PV.hideB) return true;
		else if (vChar == 'C' && !PV.hideC) return true;
		else if (vChar == '?' && !PV.hideQ) return true;
		else{
			if (match.autovalidated){
				if (!PV.hideAUTOTRUE && (match.score >= xlv.cutOff))  return true;
			}
		//        else {
		//            if (!PV.hideAUTOFALSE && (this.score >= PV.cutOff))  return true;
		//            }
		//            }
		}
		return false;
	}
	
xlv.sid = "1559";//SELECT has_protein.peptide_id, has_protein.protein_id, (peptide_position + 1) as peptide_position INTO TEMPORARY tempHasProtein109_150_74_29_1393665870 FROM has_protein, tempMatchedPeptides109_150_74_29_1393665870 WHERE tempMatchedPeptides109_150_74_29_1393665870.peptide_id = has_protein.peptide_id GROUP BY  has_protein.peptide_id, has_protein.protein_id, peptide_position;
//SELECT t1.layout AS l  FROM layouts AS t1  LEFT OUTER JOIN layouts AS t2  ON (t1.search_id = t2.search_id AND t1.time &lt; t2.time)  WHERE t1.search_id = 1559 AND t2.search_id IS NULL;
xlv.addProtein (595291,'SKA2','MEAEVDKLELMFQKAESDLDYIQYRLEYEIKTNHPDSASEKNPVTLLKELSVIKSRYQTLYARFKPVAVEQKESKSRICcmATVKKTMNMIQKLQKQTDLELSPLTKEEKTAAEQFKFHMPDL','SKA2_HUMAN Spindle and kinetochore-associated protein 2 OS=Homo sapiens GN=SKA2 PE=1 SV=1','Q8WVK7','121');
xlv.addProtein (595292,'SKA1','MASSDLEQLCcmSHVNEKIGNIKKTLSLRNCcmGQEPTLKTVLNKIGDEIIVINELLNKLELEIQYQEQTNNSLKELCcmESLEEDYKDIEHLKENVPSHLPQVTVTQSCcmVKGSDLDPEEPIKVEEPEPVKKPPKEQRSIKEMPFITCcmDEFNGVPSYMKSRLTYNQINDVIKEINKAVISKYKILHQPKKSMNSVTRNLYHRFIDEETKDTKGRYFIVEADIKEFTTLKADKKFHVLLNILRHCcmRRLSEVRGGGLTRYVIT','SKA1_HUMAN Spindle and kinetochore-associated protein 1 OS=Homo sapiens GN=SKA1 PE=1 SV=1','Q96BD8','255');
xlv.addProtein (595295,'SKA3','MDPIRSFCcmGKLRSLASTLDCcmETARLQRALDGEESDFEDYPMRILYDLHSEVQTLKDDVNILLDKARLENQEGIDFIKATKVLMEKNSMDIMKIREYFQKYGYSPRVKKNSVHEQEAINSDPELSNCcmENFQKTDVKDDLSDPPVASSCcmISEKSPRSPQLSDFGLERYIVSQVLPNPPQAVNNYKEEPVIVTPPTKQSLVKVLKTPKCcmALKMDDFECcmVTPKLEHFGISEYTMCcmLNEDYTMGLKNARNNKSEEAIDTESRLNDNVFATPSPIIQQLEKSDAEYTNSPLVPTFCcmTPGLKIPSTKNSIALVSTNYPLSKTNSSSNDLEVEDRTSLVLNSDTCcmFENLTDPSSPTISSYENLLRTPTPPEVTKIPEDILQLLSKYNSNLATPIAIKAVPPSKRFLKHGQNIRDVSNKEN','SKA3_HUMAN Spindle and kinetochore-associated protein 3 OS=Homo sapiens GN=SKA3 PE=1 SV=2','Q8IX90','412');
xlv.addProtein (595296,'TBB2B','MREIVHIQAGQCcmGNQIGAKFWEVISDEHGIDPTGSYHGDSDLQLERINVYYNEATGNKYVPRAILVDLEPGTMDSVRSGPFGQIFRPDNFVFGQSGAGNNWAKGHYTEGAELVDSVLDVVRKESESCcmDCcmLQGFQLTHSLGGGTGSGMGTLLISKIREEYPDRIMNTFSVMPSPKVSDTVVEPYNATLSVHQLVENTDETYCcmIDNEALYDICcmFRTLKLTTPTYGDLNHLVSATMSGVTTCcmLRFPGQLNADLRKLAVNMVPFPRLHFFMPGFAPLTSRGSQQYRALTVPELTQQMFDSKNMMAACcmDPRHGRYLTVAAIFRGRMSMKEVDEQMLNVQNKNSSYFVEWIPNNVKTAVCcmDIPPRGLKMSATFIGNSTAIQELFKRISEQFTAMFRRKAFLHWYTGEGMDEMEFTEAESNMNDLVSEYQQYQDATADEQGEFEEEEGEDEA','TBB2B_BOVIN Tubulin beta-2B chain OS=Bos taurus GN=TUBB2B PE=1 SV=2','Q6B856','445');
xlv.addProtein (595297,'TBB3','MREIVHIQAGQCcmGNQIGAKFWEVISDEHGIDPSGNYVGDSDLQLERISVYYNEASSHKYVPRAILVDLEPGTMDSVRSGAFGHLFRPDNFIFGQSGAGNNWAKGHYTEGAELVDSVLDVVRKECcmENCcmDCcmLQGFQLTHSLGGGTGSGMGTLLISKVREEYPDRIMNTFSVVPSPKVSDTVVEPYNATLSIHQLVENTDETYCcmIDNEALYDICcmFRTLKLATPTYGDLNHLVSATMSGVTTSLRFPGQLNADLRKLAVNMVPFPRLHFFMPGFAPLTARGSQQYRALTVPELTQQMFDAKNMMAACcmDPRHGRYLTVATVFRGRMSMKEVDEQMLAIQSKNSSYFVEWIPNNVKVAVCcmDIPPRGLKMSSTFIGNSTAIQELFKRISEQFTAMFRRKAFLHWYTGEGMDEMEFTEAESNMNDLVSEYQQYQDATAEEEGEMYEDDEEESEAQGPK','ref|NP_001070595.1| tubulin beta-3 chain [Bos taurus]','116004471','450');
xlv.addProtein (595300,'TBA1B','MRECcmISIHVGQAGVQIGNACcmWELYCcmLEHGIQPDGQMPSDKTIGGGDDSFNTFFSETGAGKHVPRAVFVDLEPTVIDEVRTGTYRQLFHPEQLITGKEDAANNYARGHYTIGKEIIDLVLDRIRKLADQCcmTGLQGFLVFHSFGGGTGSGFTSLLMERLSVDYGKKSKLEFSIYPAPQVSTAVVEPYNSILTTHTTLEHSDCcmAFMVDNEAIYDICcmRRNLDIERPTYTNLNRLISQIVSSITASLRFDGALNVDLTEFQTNLVPYPRIHFPLATYAPVISAEKAYHEQLSVAEITNACcmFEPANQMVKCcmDPRHGKYMACcmCcmLLYRGDVVPKDVNAAIATIKTKRSIQFVDWCcmPTGFKVGINYQPPTVVPGGDLAKVQRAVCcmMLSNTTAIAEAWARLDHKFDLMYAKRAFVHWYVGEGMEEGEFSEAREDMAALEKDYEEVGVDSVEGEGEEEGEEY','TBA1B_BOVIN Tubulin alpha-1B chain OS=Bos taurus PE=1 SV=2','P81947','451')

xlv.addMatch("595292",[156],"595292",[156],105668554,16.121405005758536,8,2,"LTYNQINDVIK","LTYNQINDVIK",'t','A','f');
xlv.addMatch("595297,595296",[104,104],"595292",[197],105669540,14.076265317920171,8,10,"GHYTEGAELVDSVLDVVR","FIDEETKDTKGR",'t','A','f');
xlv.addMatch("595292",[197],"595300",[113],105667773,12.903735273568381,7,1,"FIDEETKDTK","EIIDLVLDR",'t','B','f');
xlv.addMatch("595297,595296",[104,104],"595292",[197],105669509,12.22013558952423,8,10,"GHYTEGAELVDSVLDVVR","FIDEETKDTKGR",'t','A','f');
xlv.addMatch("595300",[113],"595292",[224],105670922,12.10013651460346,1,3,"EIIDLVLDR","ADKK",'f','B','f');
xlv.addMatch("595292",[197],"595297,595296",[104,104],105669520,11.926373984387777,9,8,"FIDEETKDTKGR","GHYTEGAELVDSVLDVVR",'t','A','f');
xlv.addMatch("595292",[197],"595300",[113],105667774,11.802225877509864,7,1,"FIDEETKDTK","EIIDLVLDR",'t','B','f');
xlv.addMatch("595292",[197],"595300",[423],105667809,11.680432266427825,10,2,"FIDEETKDTKGR","EDMAALEK",'t','B','f');
xlv.addMatch("595300",[403],"595292",[224],105668841,11.64585088127479,12,3,"AFVHWYVGEGMEEGEFSEAR","ADKK",'f','C','f');
xlv.addMatch("595292",[178],"595300",[423],105666243,11.491635925753842,6,1,"ILHQPKK","EDMoxAALEK",'f','B','f');
xlv.addMatch("595297,595296",[104,104],"595292",[218],105669192,11.430114494006848,8,6,"GHYTEGAELVDSVLDVVR","EFTTLKADKK",'t','A','f');
xlv.addMatch("595292",[178],"595300",[423],105666233,11.426481090737836,6,1,"ILHQPKK","EDMAALEK",'t','B','f');
xlv.addMatch("595297,595296",[104,104],"595292",[197],105669522,11.406848913360593,8,10,"GHYTEGAELVDSVLDVVR","FIDEETKDTKGR",'t','B','f');
xlv.addMatch("595292",[197],"595300",[423],105667921,11.406067371371567,10,2,"FIDEETKDTKGR","EDMoxAALEK",'t','B','f');
xlv.addMatch("595292",[197],"595296",[155],105667766,11.348028344116848,6,7,"FIDEETKDTK","IREEYPDR",'t','B','f');
xlv.addMatch("595292",[197],"595300",[113],105667775,11.2500573628709,6,1,"FIDEETKDTK","EIIDLVLDR",'t','B','f');
xlv.addMatch("595297,595296",[104,104],"595292",[197],105669518,11.045325470961629,8,7,"GHYTEGAELVDSVLDVVR","FIDEETKDTKGR",'t','B','f');
xlv.addMatch("595297,595296",[104,104],"595292",[197],105669233,10.95172511791143,8,7,"GHYTEGAELVDSVLDVVR","FIDEETKDTK",'f','C','f');
xlv.addMatch("595300",[423],"595292",[224],105670658,10.761697766294466,1,3,"EDMAALEK","ADKK",'f','B','f');
xlv.addMatch("595292",[218],"595297",[155],105667670,10.626541790609112,6,3,"EFTTLKADKK","VREEYPDR",'t','C','f');
xlv.addMatch("595292",[197],"595296",[155],105668406,10.62261508457825,9,4,"FIDEETKDTKGR","IREEYPDR",'t','C','f');
xlv.addMatch("595295",[315],"595292",[178],105667797,10.584236115933296,9,6,"TNSSSNDLEVEDR","ILHQPKK",'t','B','f');
xlv.addMatch("595297,595296",[104,104],"595292",[224],105668101,10.570853696008065,11,3,"GHYTEGAELVDSVLDVVR","ADKK",'f','B','f');
xlv.addMatch("595292",[156],"595292",[72],105668691,10.55044940152342,8,5,"LTYNQINDVIK","ELCcmESLEEDYK",'t','C','f');
xlv.addMatch("595297,595296",[104,104],"595292",[218],105669184,10.51380646766718,8,3,"GHYTEGAELVDSVLDVVR","EFTTLKADKK",'t','C','f');
xlv.addMatch("595292",[126],"595300",[423],105666258,10.49356682076222,4,2,"KPPKEQR","EDMAALEK",'t','C','f');
xlv.addMatch("595297,595296",[104,104],"595292",[218],105669187,10.39994849719127,8,3,"GHYTEGAELVDSVLDVVR","EFTTLKADKK",'t','C','f');
xlv.addMatch("595297,595296",[104,104],"595292",[197],105669246,10.35493895985002,8,6,"GHYTEGAELVDSVLDVVR","FIDEETKDTK",'t','C','f');
xlv.addMatch("595292",[156],"595292",[72],105668694,10.277677752522198,8,5,"LTYNQINDVIK","ELCcmESLEEDYK",'t','C','f');
xlv.addMatch("595300",[403],"595292",[224],105668873,10.256431553631387,12,3,"AFVHWYVGEGMoxEEGEFSEAR","ADKK",'f','B','f');
xlv.addMatch("595297,595296",[104,104],"595292",[224],105668095,10.217242489477272,8,3,"GHYTEGAELVDSVLDVVR","ADKK",'f','C','f');
xlv.addMatch("595296",[155],"595292",[197],105668391,10.169977220933019,3,10,"IREEYPDR","FIDEETKDTKGR",'t','B','f');
xlv.addMatch("595292",[218],"595296,595297",[157,157],105666475,10.158287574164742,6,1,"EFTTLKADK","EEYPDR",'f','C','f');
xlv.addMatch("595292",[176],"595300",[423],105666783,10.103513823583429,1,1,"YKILHQPK","EDMAALEK",'f','C','f');
xlv.addMatch("595292",[197],"595296",[155],105667763,10.03843905882152,6,7,"FIDEETKDTK","IREEYPDR",'t','B','f');
xlv.addMatch("595292",[178],"595296,595297",[157,157],105666026,10.021738487905166,6,1,"ILHQPKK","EEYPDR",'f','C','f');
xlv.addMatch("595292",[218],"595296,595297",[157,157],105666483,9.924808867517354,6,1,"EFTTLKADK","EEYPDR",'f','C','f');
xlv.addMatch("595292",[184],"595300",[423],105666303,9.828962699488748,1,1,"KSMNSVTR","EDMAALEK",'f','C','f');
xlv.addMatch("595295",[67],"595291",[73],105666740,9.740161111290845,5,3,"LENQEGIDFIK","ESKSR",'f','C','f');
xlv.addMatch("595300",[423],"595292",[224],105670795,9.70297410049084,1,3,"EDMoxAALEK","ADKK",'f','C','f');
xlv.addMatch("595292",[197],"595296",[155],105667760,9.610680594011493,6,3,"FIDEETKDTK","IREEYPDR",'t','C','f');
xlv.addMatch("595300",[403],"595292",[224],105668844,9.556887519041261,12,3,"AFVHWYVGEGMEEGEFSEAR","ADKK",'f','C','f');
xlv.addMatch("595292",[197],"595300",[423],105667891,9.44237122348408,7,2,"FIDEETKDTKGR","EDMoxAALEK",'f','C','f');
xlv.addMatch("595297,595296",[104,104],"595292",[197],105669230,9.434826316321153,5,6,"GHYTEGAELVDSVLDVVR","FIDEETKDTK",'t','C','f');
xlv.addMatch("595297,595296",[104,104],"595292",[224],105668117,9.320787555642736,8,3,"GHYTEGAELVDSVLDVVR","ADKK",'f','C','f');
xlv.addMatch("595292",[184],"595300",[423],105666462,9.278578145557251,1,1,"KSMoxNSVTR","EDMAALEK",'f','C','f');
xlv.addMatch("595297,595296",[104,104],"595292",[197],105669531,9.097822998200634,4,4,"GHYTEGAELVDSVLDVVR","FIDEETKDTKGR",'t','C','f');
xlv.addMatch("595292",[184],"595296",[155],105667104,9.090787423075493,1,3,"KSMNSVTR","IREEYPDR",'t','B','f');
xlv.addMatch("595292",[218],"595296",[155],105667705,9.062354698595037,6,4,"EFTTLKADKK","IREEYPDR",'t','C','f');
xlv.addMatch("595295",[315],"595292",[178],105667799,8.79535441462789,9,6,"TNSSSNDLEVEDR","ILHQPKK",'t','C','f');
xlv.addMatch("595297,595296",[104,104],"595292",[218],105668969,8.746450882949478,8,6,"GHYTEGAELVDSVLDVVR","EFTTLKADK",'t','C','f');
xlv.addMatch("595292",[197],"595297",[155],105667726,8.693194958634171,6,4,"FIDEETKDTK","VREEYPDR",'t','C','f');
xlv.addMatch("595300",[113],"595292",[224],105665910,8.565203447880076,1,3,"EIIDLVLDR","ADKK",'f','C','f');
xlv.addMatch("595300",[403],"595292",[224],105668864,8.521009518493653,12,3,"AFVHWYVGEGMoxEEGEFSEAR","ADKK",'f','B','f');
xlv.addMatch("595297,595296",[104,104],"595292",[197],105669239,8.484268983631484,5,7,"GHYTEGAELVDSVLDVVR","FIDEETKDTK",'t','C','f');
xlv.addMatch("595292",[126],"595300",[423],105666248,8.479719011328626,4,1,"KPPKEQR","EDMAALEK",'t','C','f');
xlv.addMatch("595292",[184],"595300",[423],105666295,8.41690059342265,1,1,"KSMNSVTR","EDMAALEK",'f','C','f');
xlv.addMatch("595292",[184],"595297",[155],105667079,8.392882524734326,1,3,"KSMNSVTR","VREEYPDR",'t','B','f');
xlv.addMatch("595292",[197],"595296",[155],105667764,8.231068161692198,6,7,"FIDEETKDTK","IREEYPDR",'f','C','f');
xlv.addMatch("595296",[155],"595292",[184],105667129,8.08090281916901,4,1,"IREEYPDR","KSMoxNSVTR",'t','C','f');
xlv.addMatch("595295",[315],"595292",[178],105667798,7.867536336971613,12,6,"TNSSSNDLEVEDR","ILHQPKK",'f','C','f');
xlv.addMatch("595292",[197],"595296",[155],105667769,7.860233292172401,6,7,"FIDEETKDTK","IREEYPDR",'f','C','f');
xlv.addMatch("595292",[197],"595296",[155],105667770,7.829077135293102,6,4,"FIDEETKDTK","IREEYPDR",'f','C','f');
xlv.addMatch("595292",[184],"595300",[423],105666489,7.740979551865548,1,1,"KSMoxNSVTR","EDMoxAALEK",'f','C','f');
xlv.addMatch("595292",[197],"595300",[113],105668414,7.6620272752396925,10,1,"FIDEETKDTKGR","EIIDLVLDR",'t','C','f');
xlv.addMatch("595292",[197],"595297",[155],105667739,7.602036972505289,6,4,"FIDEETKDTK","VREEYPDR",'t','C','f');
xlv.addMatch("595292",[184],"595300",[423],105666457,7.122282069502989,2,2,"KSMoxNSVTR","EDMAALEK",'f','C','f');

    xlv.init();
    
    new xiNET.DASUtil(xlv);

    function PV_savePVLayout() {
        var layout = PV_getPVLayout();
        var dateString = getDateString();
        PV.message("layout sent:" + layout, true);
        var defaultDesc = "Layout for search " + PV.sid + ", " + dateString;
        var desc = prompt("Enter description of layout:", defaultDesc);

        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        var url = "saveLayout.php";
        var params = "sid=" + PV.sid + "&layout=" + encodeURIComponent(layout) + "&desc=" + desc;
        xmlhttp.open("POST", url, true);

        //Send the proper header information along with the request
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        //chrome doesn't like following
        //  xmlhttp.setRequestHeader("Content-length", params.length);
        //    xmlhttp.setRequestHeader("Connection", "close");

        xmlhttp.onreadystatechange = function() {//Call a function when the state changes.
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                PV.message("response:" + xmlhttp.responseText, true);
            }
        }
        xmlhttp.send(params);

        function getDateString() {
            var d_names = new Array("Sunday", "Monday", "Tuesday",
                    "Wednesday", "Thursday", "Friday", "Saturday");
            var m_names = new Array("January", "February", "March",
                    "April", "May", "June", "July", "August", "September",
                    "October", "November", "December");
            var d = new Date();
            var curr_day = d.getDay();
            var curr_date = d.getDate();
            var sup = "";
            if (curr_date == 1 || curr_date == 21 || curr_date == 31) {
                sup = "st";
            }
            else if (curr_date == 2 || curr_date == 22) {
                sup = "nd";
            }
            else if (curr_date == 3 || curr_date == 23) {
                sup = "rd";
            }
            else {
                sup = "th";
            }
            var curr_month = d.getMonth();
            var curr_year = d.getFullYear();
            var curr_hour = d.getHours();
            if (curr_hour < 12) {
                a_p = "AM";
            }
            else {
                a_p = "PM";
            }
            if (curr_hour == 0) {
                curr_hour = 12;
            }
            if (curr_hour > 12) {
                curr_hour = curr_hour - 12;
            }
            var curr_min = d.getMinutes();
            curr_min = curr_min + "";
            if (curr_min.length == 1) {
                curr_min = "0" + curr_min;
            }
            return d_names[curr_day] + " " + curr_date + sup + " " + m_names[curr_month]
                    + " " + curr_year + ", " + curr_hour + ":" + curr_min + " " + a_p;
        }
    }

    function PV_linkInfo() {

        if (PV.set1 !== undefined) {
            var set1Links = [];
            var set2Links = [];
            var set3Links = [];
            var nonuniqueLinks = [];

            var links = XiPV.proteinLinks.values();
            var lc = links.length;
            for (var l = 0; l < lc; l++) {
                var link = links[l];
                message += "<u>" + link.fromProtein.name + " - " + link.toProtein.name + "</u><br/>"
                //inter protein res links
                var c2 = link.residueLinks.values().length;
                var lcount = 0;
                for (var rl = 0; rl < c2; rl++) {
                    var set1 = false;
                    var set2 = false;
                    var set3 = false;

                    var resLink = link.residueLinks.values()[rl];
                    var count = resLink.matches.length;
                    for (var i = 0; i < count; i++) {
                        var match = resLink.matches[i];
                        if (match.search_id == PV.set1)
                            set1 = true;
                        else if (match.search_id == PV.set2)
                            set2 = true;
                        else if (match.search_id == PV.set3)
                            set3 = true;
                    }
                    if (set1 && !set2 && !set3)
                        set1Links.push(resLink);
                    else
                    if (!set1 && set2 && !set3)
                        set2Links.push(resLink);
                    else
                    if (!set1 && !set2 && set3)
                        set3Links.push(resLink);
                    else
                        nonuniqueLinks.push(resLink);
                }
            }

            set1Links.sort(function(a, b) {
                var result = (a.fromResidue - 0) - (b.fromResidue - 0);
                if (result === 0) {
                    result = (a.toResidue - 0) - (b.toResidue - 0)
                }
                return result;
            });
            set2Links.sort(function(a, b) {
                var result = (a.fromResidue - 0) - (b.fromResidue - 0);
                if (result === 0) {
                    result = (a.toResidue - 0) - (b.toResidue - 0)
                }
                return result;
            });

            set3Links.sort(function(a, b) {
                var result = (a.fromResidue - 0) - (b.fromResidue - 0);
                if (result === 0) {
                    result = (a.toResidue - 0) - (b.toResidue - 0)
                }
                return result;
            });

            nonuniqueLinks.sort(function(a, b) {
                var result = (a.fromResidue - 0) - (b.fromResidue - 0);
                if (result === 0) {
                    result = (a.toResidue - 0) - (b.toResidue - 0)
                }
                return result;
            });

            var message = "<br/><strong>Search ID: " + PV.set1 + " only (" + set1Links.length + " links)</strong><br/><br/>";
            var c2 = set1Links.length;
            for (var rl = 0; rl < c2; rl++) {
                var resLink = set1Links[rl];
                message += resLink.fromProtein.name.substring(0, 4) + ", <strong>" + resLink.fromResidue + "</strong> (" + link.fromProtein.sequence[resLink.fromResidue - 1]
                        + ") - "
                        + resLink.toProtein.name.substring(0, 4) + ", <strong>" + resLink.toResidue + "</strong> (" + link.toProtein.sequence[resLink.toResidue - 1] + "), " + "";

                message += resLink.matches[0].pep1Seq + " to " + resLink.matches[0].pep2Seq + "</br>";


            }

            message += "<br/><strong>Search ID: " + PV.set2 + " only (" + set2Links.length + " links)</strong><br/><br/>";
            var c2 = set2Links.length;
            for (var rl = 0; rl < c2; rl++) {
                var resLink = set2Links[rl];
                message += resLink.fromProtein.name.substring(0, 4) + ", <strong>" + resLink.fromResidue + "</strong> (" + link.fromProtein.sequence[resLink.fromResidue - 1]
                        + ") - "
                        + resLink.toProtein.name.substring(0, 4) + ", <strong>" + resLink.toResidue + "</strong> (" + link.toProtein.sequence[resLink.toResidue - 1] + "), " + "";

                message += resLink.matches[0].pep1Seq + " to " + resLink.matches[0].pep2Seq + "</br>";
            }

            message += "<br/><strong>Search ID: " + PV.set3 + " only (" + set3Links.length + " links)</strong><br/><br/>";
            var c2 = set3Links.length;
            for (var rl = 0; rl < c2; rl++) {
                var resLink = set3Links[rl];
                message += resLink.fromProtein.name.substring(0, 4) + ", <strong>" + resLink.fromResidue + "</strong> (" + link.fromProtein.sequence[resLink.fromResidue - 1]
                        + ") - "
                        + resLink.toProtein.name.substring(0, 4) + ", <strong>" + resLink.toResidue + "</strong> (" + link.toProtein.sequence[resLink.toResidue - 1] + "), " + "";

                message += resLink.matches[0].pep1Seq + " to " + resLink.matches[0].pep2Seq + "</br>";
            }



            message += "<br/><strong>Non-unique - multiple searches (" + nonuniqueLinks.length + " links)</strong><br/><br/>";
            var c2 = nonuniqueLinks.length;
            for (var rl = 0; rl < c2; rl++) {
                var resLink = nonuniqueLinks[rl];
                message += resLink.fromProtein.name.substring(0, 4) + ", <strong>" + resLink.fromResidue + "</strong> (" + link.fromProtein.sequence[resLink.fromResidue - 1]
                        + ") - "
                        + resLink.toProtein.name.substring(0, 4) + ", <strong>" + resLink.toResidue + "</strong> (" + link.toProtein.sequence[resLink.toResidue - 1] + "), " + "";

                message += resLink.matches[0].pep1Seq + " to " + resLink.matches[0].pep2Seq + "</br>";
            }
            PV.message(message);
        }
        else
        {
            var message = "Search ID: " + PV.sid + "<br/><br/>CUTOFF:" + PV.cutOff + "<br/><br/>";
            var links = XiPV.proteinLinks.values();
            var lc = links.length;
            for (var l = 0; l < lc; l++) {
                var link = links[l];
                //            if (link.fromProt != link.toProt){
                message += "<u>" + link.fromProtein.name + " - " + link.toProtein.name + "</u><br/><br/>"
                            +"FromProtein, FromResidue, FromAA, ToProtein, ToResidue, ToAA, HighestScore, NumberMatches, Distance<br/>";
                //inter protein res links
                var c2 = link.residueLinks.values().length;
                var lcount = 0;
                for (var rl = 0; rl < c2; rl++) {
                    var resLink = link.residueLinks.values()[rl];
                    var matchFound = false;

                    var scans = "[scan numbers:";
                    var count = resLink.matches.length;

                    var highestScore = 0;
                    var noMatches = 0;
                    var d;
                    if (typeof XiPV.shortestDists !== 'undefined') {d = XiPV.shortestDists[resLink.id];}
                    for (var i = 0; i < count; i++) {
                        var match = resLink.matches[i];
                        if (match.check()) {
                            noMatches++;
                            
                            if (match.score > highestScore) {
                                highestScore = match.score;
                            }
                            
                            if (matchFound)
                                scans += ", ";
                            else
                                matchFound = true;
                            scans += match.scan_no;
                        }
                    }
                    if (matchFound) {
                        message += link.fromProtein.name + ", " + resLink.fromResidue + ", " + link.fromProtein.sequence[resLink.fromResidue - 1]
                                + ", "
                                + link.toProtein.name + ", " + resLink.toResidue + ", " + link.toProtein.sequence[resLink.toResidue - 1] + ", " + highestScore + ", " + noMatches + ", " + d + "<br/>";
                        lcount++;
                    }
                }
                message += "<br/><br/>(" + lcount + " unique links)<br/><br/>";
                //            }
            }
            PV.message(message);
        }
        /*        function appendLinkSummary(link){
         var aboveSevenMatchFound = false;
         var scans = "[scan numbers:";
         var count = link.matches.length;
         for (var i=0; i < count; i++) {
         var match = link.matches[i];
         //                if (match.score > 7.0) {
         if (aboveSevenMatchFound) scans += ", ";
         else aboveSevenMatchFound = true;
         scans += match.scan_no;
         //                }
         }
         if (aboveSevenMatchFound){
         message += link.id + " " + scans + "]<br/>";
         intraCount++;
         }
         }*/
    }

    function PV_residueInfo() {
        var message = "<h2>Summary of linked residues (currently ignores score cut-off)</h2>";
        var resTypes = {};
        var resPairTypes = {};

        var prots = XiPV.proteins.values();
        var proteinCount = prots.length;
        for (var p = 0; p < proteinCount; p++) {
            var protein = prots[p];
            //            var intraCount = 0;

            var proteinSelfLink = XiPV.proteinLinks.get(protein.id + "-" + protein.id);
            if (proteinSelfLink != undefined) {
                //        alert("in");
                var internalLinks = proteinSelfLink.residueLinks.values();
                var iLinkCount = internalLinks.length;
                for (var l = 0; l < iLinkCount; l++) {

                    //                    intraCount++;
                    var intLink = internalLinks[l];
                    var res1 = protein.sequence[intLink.fromResidue - 1];
                    var res2 = protein.sequence[intLink.toResidue - 1];
                    if (res2 < res1) {
                        var temp = res1;
                        res1 = res2;
                        res2 = temp;
                    }
                    var resPairKey = res1 + '-' + res2;
                    var resPairCount = resPairTypes[resPairKey];
                    if (resPairCount == undefined) {
                        resPairCount = {key: resPairKey, lnkCnt: 0, links: {}};
                        resPairTypes[resPairKey] = resPairCount;
                    }
                    resPairCount["lnkCnt"]++;
                    //                    addLinkSummary(intLink, resPairCount["links"]);

                    var res1Count = resTypes[res1];
                    if (res1Count == undefined) {
                        res1Count = {key: res1, lnkCnt: 0, links: {}};
                        resTypes[res1] = res1Count;
                    }
                    res1Count["lnkCnt"]++;
                    //                    addLinkSummary(intLink, res1Count["links"]);

                    var res2Count = resTypes[res2];
                    if (res2Count == undefined) {
                        res2Count = {key: res2, lnkCnt: 0, links: {}};
                        resTypes[res2] = res2Count;
                    }

                    res2Count["lnkCnt"]++;
                    //                    addLinkSummary(intLink, res2Count["links"]);
                }
            }
        }



        var links = XiPV.proteinLinks.values();
        var linkCount = links.length;
        for (var l = 0; l < linkCount; l++) {
            var link = links[l];
            if (link.fromProtein != link.toProtein) {
                //                            message += "<u>Inter protein links:"+link.id+"</u><br/><br/>"
                //inter protein res links
                var c2 = link.residueLinks.values().length;
                var interCount = 0;
                for (var rl = 0; rl < c2; rl++) {
                    var resLink = link.residueLinks.values()[rl];
                    var res1 = resLink.fromProtein.sequence[resLink.fromResidue - 1];
                    var res2 = resLink.toProtein.sequence[resLink.toResidue - 1];
                    if (res2 < res1) {
                        var temp = res1;
                        res1 = res2;
                        res2 = temp;
                    }
                    var resPairKey = res1 + '-' + res2;
                    var resPairCount = resPairTypes[resPairKey];
                    if (resPairCount == undefined) {
                        resPairCount = {key: resPairKey, lnkCnt: 0, links: {}};
                        resPairTypes[resPairKey] = resPairCount;
                    }
                    resPairCount["lnkCnt"]++;
                    //                                    addLinkSummary(intLink, resPairCount["links"]);

                    var res1Count = resTypes[res1];
                    if (res1Count == undefined) {
                        res1Count = {key: res1, lnkCnt: 0, links: {}};
                        resTypes[res1] = res1Count;
                    }
                    res1Count["lnkCnt"]++;
                    //                addLinkSummary(resLink, res1Count["links"]);

                    var res2Count = resTypes[res2];
                    if (res2Count == undefined) {
                        res2Count = {key: res2, lnkCnt: 0, links: {}};
                        resTypes[res2] = res2Count;
                    }

                    res2Count["lnkCnt"]++;
                    //                addLinkSummary(resLink, res2Count["links"]);}
                    //                            message += " (" + interCount + " unique links)<br/>";
                }
            }
        }

        //            message += "<u>"+ protein.name + " <b>(" + intraCount + " unique internal links)</b></u><br/><br/> ";
        //            var table1 = "<table><tr><th>Residue Pairs</th><th>#Unique links</th>"
        //                + "<th>Links</th><th>Details</th></tr>\n";
        //            message += getTableFromResTypeObj(resPairTypes, table1);// + '<pre>' + JSON.stringify(resTypes, null, '\t') + '</pre>';

        message += getTableFromResTypeObj(resPairTypes);
        message += '<br/>';
        message += getTableFromResTypeObj(resTypes);// + '<pre>' + JSON.stringify(resTypes, null, '\t') + '</pre>';


        PV.message(message);
        //
        function addLinkSummary(link, linkInfo) {
            var mCount = link.matches.length;
            var summary = link.id + " (" + mCount + " matches), scans: ";

            var lnkMatches = new Array();
            for (var i = 0; i < mCount; i++) {
                var match = link.matches[i];
                lnkMatches.push({scan_no: match.scan_no,
                    score: roundNumber(match.score, 3),
                    auto: match.autovalidated,
                    val: match.validated});
            }
            lnkMatches.sort(function(a, b) {
                return b["score"] - a["score"]
            });
            linkInfo[link.id] = lnkMatches;
        }
        //
        function getTableFromResTypeObj(resTypes) {
            var sortable = toArray(resTypes);
            sortable.sort(function(a, b) {
                return b["lnkCnt"] - a["lnkCnt"]
            });
            //
            var table = "<table><tr><th>Residue</th><th>#occurences in unique links</th></tr>\n";

            //
            for (var i = 0; i < sortable.length; i++) {
                var resPairRowCount = 0;
                var resPair = sortable[i];
                var uLnkCount = resPair.lnkCnt;
                table += "<tr><td>"
                        + resPair.key + "</td>"
                        + "<td>"
                        + resPair.lnkCnt + "</td></tr>";
                //                var first = true;
                //                var rCnt = 0;
                //                for (var lnk in resPair["links"]){
                //                    rCnt++;
                //                    var linkDetails = resPair["links"][lnk];
                //                    if (!first) table += "<tr>";
                //                    else first = false;
                //                    table += "<td>"+lnk+"</td><td>";
                //                    var summary = "<b>" + linkDetails.length + " matches.</b> Scans[score]:"
                //                    for (var l = 0; l < linkDetails.length; l++){
                //                        var m = linkDetails[l];
                //                        summary += " #" + m.scan_no + " [" + m.score + "] ";
                //                    }
                //                    table += summary + "</td></tr>";
                //                }
                //                for (var thisCodeIsTerrible = 0; thisCodeIsTerrible < (uLnkCount - rCnt); thisCodeIsTerrible++){
                //                    table += "<tr><td></td><td></td></tr>";
                //                }
                //                table += "</td></tr>";
            }
            table += "</table>";
            return table;// + '<pre>' + JSON.stringify(sortable, null, '\t') + '</pre>';
        }
        //
        function toArray(obj) {
            var arr = new Array();
            for (var key in obj) {
                if (obj.hasOwnProperty(key)) {
                    arr.push(obj[key]);
                }
            }
            return arr;
        }
    }


    //]]></script>
            
            
		<script type="text/javascript">
                //<![CDATA[			
                
                document.onkeypress = function (e) {
					//~ //e = e || window.event;
					//~ //alert(e.keyCode);
					xlv.exportSVG('networkSVG');
				};
                
                
				function initSlider(){
					if (xlv.scores != null){
						document.getElementById('scoreLabel1').innerHTML = (xlv.scores.min - 0.01).toFixed(2);
						document.getElementById('scoreLabel2').innerHTML = (xlv.scores.max + 0.01).toFixed(2) + '&nbsp;&nbsp;';
						document.getElementById('debug1').innerHTML = 'Cut-Off:' + (xlv.scores.min - 0.01).toFixed(2);
						new Control.Slider('handle1', 'track1', {
							sliderValue: 0,
							onSlide: function(v) {
								var cut = calcCutOff(v);
								document.getElementById('debug1').innerHTML = 'Cut-Off: ' + cut.toFixed(2);
								xlv.setCutOff(cut);
							},
							onChange: function(v) {
								var cut = calcCutOff(v);
								document.getElementById('debug1').innerHTML = 'Cut-Off: ' + cut.toFixed(2);
								xlv.setCutOff(cut);
							}
						});
						function calcCutOff(v) {
							var result = (v * (xlv.scores.max - xlv.scores.min + 0.02)) + xlv.scores.min - 0.01;
							return result;
						}
					}
					else {
						//no score
						document.getElementById('scoreSlider').setAttribute("style", "display:none;");
					}
				}
				
				initSlider();				
                //]]>
        </script>
		<script type="text/javascript">
				//<![CDATA[
				helpShown = false;
				infoShown = false;
				function toggleHelpPanel() {
					if (helpShown){
						hideHelpPanel();
					}
					else {
						showHelpPanel();
					}
				}
				
				function toggleInfoPanel() {
					if (infoShown){
						hideInfoPanel();
					}
					else {
						showInfoPanel();
					}
				}
				
				function showHelpPanel() {
						helpShown = true;
						d3.select("#helpPanel").style('display','block');
						d3.select("#helpPanel").transition().style("top", "0%").duration(700);
						d3.select(".help").attr('class', "btn help");
				}
				function hideHelpPanel() {
						helpShown = false;
						d3.select("#helpPanel").transition().style("top", "100%").duration(700);
						d3.select("#helpPanel").transition().style('display','none').delay(700);;
						d3.select(".help").attr('class', "btn btn-inverse help");
				}
				function showInfoPanel() {
						infoShown = true;
						d3.select("#infoPanel").style('display','block');
						d3.select("#infoPanel").transition().style("top", "0%").duration(700);
						d3.select(".info").attr('class', "btn info");	
				}
				function hideInfoPanel() {
						infoShown = false;
						d3.select("#infoPanel").transition().style("top", "100%").duration(700);
						d3.select("#infoPanel").transition().style('display','none').delay(700);;
						d3.select(".info").attr('class', "btn btn-inverse info");
				}
				//]]>
		</script>
    </body>
</html>
